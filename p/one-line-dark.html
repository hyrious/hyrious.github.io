<!DOCTYPE html>
<html lang="zh-Hans-CN">
<head>
  <meta charset="UTF-8">
  <title>一行实现暗色模式</title>
  <meta name="color-scheme" content="light dark">
  <meta name="viewport" content="width=device-width">
  <link rel="icon" href="../favicon.ico">
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <h2>一行实现暗色模式</h2>
  <address>最后更新于 <time>2022-11-20</time></address>

<!-- prettier-ignore -->
<pre><code class="language-css"><span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">invert</span>(<span class="hljs-number">0.875</span>) <span class="hljs-built_in">hue-rotate</span>(<span class="hljs-number">180deg</span>) }
</code></pre>
<p>脚本（可以放到收藏夹<br><code>javascript:var s=document.body.style;s.background=&#39;#000&#39;;s.filter=&quot;invert(0.875) hue-rotate(180deg)&quot;;void 0</code><br>）</p>
<pre><code class="language-js"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">filter</span> = <span class="hljs-string">&quot;invert(0.875) hue-rotate(180deg)&quot;</span>;
</code></pre>
<p>分析：设原始颜色为 <code>Color(h,s,l)</code>，经过以下运算，</p>
<table>
<thead>
<tr>
<th>运算</th>
<th>Hue 色相</th>
<th>Saturation 饱和度</th>
<th>Lightness 亮度</th>
</tr>
</thead>
<tbody><tr>
<td>取反</td>
<td>旋转到对面 (180 度)</td>
<td>不变</td>
<td>取 100 - L</td>
</tr>
<tr>
<td>旋转色相</td>
<td>旋转 180 度</td>
<td>不变</td>
<td>不变</td>
</tr>
</tbody></table>
<p>可以看到最终结果为色相不变（也就是说<span style=color:red>红色</span>不会变成<span style=color:cyan>青色</span>），亮度取反。例如黑色的文字在亮度取反时就会变成白色。</p>
<p>这种投机取巧的办法会让阴影色变亮，是错误的。因此只适合在样式简单的网站或者仅仅给 SVG 图片使用（这样一来就不需要准备两份 SVG 图片了）。</p>

  <footer>
    <p><a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a> 2022 @ hyrious</p>
  </footer>
</body>
</html>
