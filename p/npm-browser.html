<!DOCTYPE html><html lang="zh-Hans-CN" data-critters-container><head><meta charset="UTF-8"><title>NPM Browser: 在线浏览 NPM 包内容</title><meta name="author" content="hyrious"><meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" href="/feed.xml" type="application/rss+xml" title="hyrious.log"><style>*,:after,:before{box-sizing:border-box;background-repeat:no-repeat}:after,:before{text-decoration:inherit;vertical-align:inherit}:where(body){margin:0}:where(hr){color:inherit;height:0}:where(pre){font-family:monospace,monospace;font-size:1em;overflow:auto}:where(code,kbd,samp){font-family:monospace,monospace;font-size:1em}:root{--title-color:#0d1117;--link-color:#0057ab;--link-bg-color:#deefff;--text-color:rgba(0, 0, 0, .8);--bg-color:#fff;--gray-color:#79828b;--pre-color:rgba(0, 0, 0, .05)}@media (prefers-color-scheme:dark){:root{--title-color:#dddddc;--link-color:#79c0ff;--link-bg-color:#263441;--text-color:rgba(255, 255, 255, .8);--bg-color:#0d1117;--gray-color:#747d86;--pre-color:rgba(255, 255, 255, .05)}}html{font-family:Chinese Quotes,Inter var,Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Ubuntu,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}code,pre{font-family:ui-monospace,Cascadia Mono,Consolas,Roboto Mono,"Ubuntu Monospace",Noto Mono,monospace,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:90%}body{margin:auto;padding:2ch;max-width:70ch;color:var(--text-color,#000);background-color:var(--bg-color,#fff);line-height:1.58;font-synthesis:style}@property --offset{syntax:"<length>";inherits:false;initial-value:0}a{color:var(--link-color,#000);text-decoration:underline solid;text-decoration-color:transparent;text-decoration-thickness:2px;text-underline-offset:var(--offset,.1em);transition:text-decoration-color .2s,--offset .2s;box-shadow:0 -.7em var(--link-bg-color,#deefff) inset}a:hover{cursor:pointer}a:focus,a:hover{text-decoration-color:var(--link-color,#000);--offset:.2em}@supports not (background:paint(something)){a{transition:text-decoration-color .2s,text-underline-offset .2s}a:focus,a:hover{text-underline-offset:.2em}}h2{font-weight:700;font-size:28px;line-height:34px;margin:21px 0 12px;color:var(--title-color,#000)}h3{font-weight:700;font-size:22px;line-height:24px;margin:2rem 0 1rem;color:var(--title-color,#000)}h2,h3{text-wrap:balance}footer{padding:2ch 0;color:var(--gray-color);position:sticky;top:100vh;font-variant-numeric:tabular-nums}address{font-style:normal;font-size:15px;line-height:18px;color:var(--gray-color,#79828b);margin-bottom:14px;font-variant-numeric:tabular-nums}p{margin:0 0 9px;line-height:1.75}pre:not(.shiki){padding:0;margin:0;background:0 0;overflow:visible}@media (max-width:66ch){pre:not(.shiki){overflow-x:auto}}.shiki{font-family:DM Mono,Input Mono,Fira Code,monospace;font-size:.92em;line-height:1.4;margin:.5em 0;padding:1ch 16px;border-radius:6px;background-color:var(--pre-color)!important}@media (prefers-color-scheme:dark){.shiki{color:var(--s-dark)!important}}hr{margin:22px 33%;border:0;border-top:1px solid currentColor}sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}.footnotes ol{padding-left:16px}.footnotes li{position:relative}.footnotes li:target{color:var(--text-color)}.footnotes li:target:before{position:absolute;top:-8px;right:-8px;bottom:-8px;left:-24px;pointer-events:none;content:"";border:2px solid var(--text-color);border-radius:6px}.footnotes .data-footnote-backref g-emoji{font-family:monospace}.half-shrink-left{margin-left:-.5em}footer a{color:inherit}footer a{box-shadow:unset}footer a:focus,footer a:hover{text-decoration-color:inherit}</style><link rel="preload" crossorigin href="/assets/index-vWxNvpCb.css" as="style"></head><body class="post"><h2>NPM Browser: 在线浏览 NPM 包内容</h2><address>最后更新于 <time>2022-12-14</time></address><p><time>2022-12-14</time> 更新</p><p>最近 npm 官网上线了一个查看包内容的 tab <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/npm?activeTab=explore">https://www.npmjs.com/package/npm?activeTab=explore</a>, <a target="_blank" rel="noopener" href="https://github.blog/changelog/2022-12-06-explore-the-content-of-your-npm-packages-with-the-new-code-explorer/">https://github.blog/changelog/2022-12-06-explore-the-content-of-your-npm-packages-with-the-new-code-explorer/</a></p><hr><p><time>2022-08-24</time> 更新</p><p>我以前经常使用 <a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/npm/lib0/">jsdelivr</a> 和 <a target="_blank" rel="noopener" href="https://unpkg.com/lib0/">unpkg</a> 来查看一些 NPM 包的源码，这么做有几个好处：</p><ol><li>假如这个包没有开源<sup><a href="#user-content-fn-1" data-footnote-ref id="user-content-fnref-1">1</a></sup>，我们仍然可以读到一些有用的内容；</li><li>虽然开源了，但是有可能打包工具配置有问题，可以借助这些网站快速查看包结构；</li><li>是在线的，不用污染本地环境。</li></ol><p>虽然这两个 CDN 都很快，但是想要切换文件还是比较慢。因此我写了个 <a target="_blank" rel="noopener" href="https://hyrious.me/npm-browser">NPM Browser</a> 来满足我的需求，它的前身是 <a target="_blank" rel="noopener" href="https://hyrious.me/tool/npm.html">tool/npm</a>。</p><h3 id="用法">用法</h3><p>直接打开输入包名即可从 npm registry 上下载 tgz 并解压出来查看。目前我还没有发现第二个 npm registry 镜像能够给前端开 CORS 的。并且我还用了 indexeddb 缓存每个包的内容，浏览看过的包会很快。</p><p>搜索包也是用的 npm registry 的 API，有时可能会超出 rate limit 导致无法响应。</p><p>地址栏会实时显示整个应用的状态，可以简单地分享给别人<del>对线</del>，格式为:</p><pre><code>网址?q=包名@版本/package/路径:行数</code></pre><p>下面演示几个用法：</p><ul><li>查看最新版 lodash 包的内容: <a target="_blank" rel="noopener" href="https://hyrious.me/npm-browser/?q=lodash">https://hyrious.me/npm-browser/?q=lodash</a></li><li>指定到具体版本的具体文件的具体行: <a target="_blank" rel="noopener" href="https://hyrious.me/npm-browser/?q=@github/textarea-autosize@0.3.0/package/dist/index.js:72">https://hyrious.me/npm-browser/?q=@github/textarea-autosize@0.3.0/package/dist/index.js:72</a></li></ul><p>另一个我觉得很有用的功能是文件 diff，在标题栏包名右边第二个按钮就是。有的时候一些第三方包升级，但是 changelog 不会事无巨细地列出所有代码的修改，此时可以利用这个功能查看到底改了啥，例如前几天 markedjs 更新了一个小版本：</p><ul><li><a target="_blank" rel="noopener" href="https://hyrious.me/tool/diff-npm.html?a=marked%404.0.18%2Flib%2Fmarked.esm.js&b=marked%404.0.19%2Flib%2Fmarked.esm.js&s=1&f=l">/package/lib/marked.esm.js: marked@4.0.18 &rarr; marked@4.0.19</a></li></ul><p>以上。</p><section class="footnotes"><ol dir="auto"><li id="user-content-fn-1"><p dir="auto">例如 <a target="_blank" rel="noopener" href="https://motion.dev">motion</a> <a href="#user-content-fnref-1" class="data-footnote-backref" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">↩</g-emoji></a></p></li></ol></section><footer><p><a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a> 2023 @ hyrious</p></footer><link rel="stylesheet" href="/assets/index-vWxNvpCb.css"></body></html>