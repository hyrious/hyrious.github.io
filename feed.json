{
    "version": "https://jsonfeed.org/version/1",
    "title": "hyrious.log",
    "home_page_url": "https://hyrious.me/",
    "feed_url": "https://hyrious.me/feed.json",
    "description": "hyrious.log",
    "author": {
        "name": "hyrious",
        "url": "https://hyrious.me"
    },
    "items": [
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#24292E}.Î¼2{color:#22863A}.Î¼3{color:#6F42C1}.Î¼4{color:#032F62}.Î¼5{color:#005CC5}.Î¼6{color:#D73A49}.Î¼7{color:#6A737D}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#E1E4E8}.Î¼2{color:#85E89D}.Î¼3{color:#B392F0}.Î¼4{color:#9ECBFF}.Î¼5{color:#79B8FF}.Î¼6{color:#F97583}.Î¼7{color:#6A737D}}</style><blockquote>\n<p>å‚è€ƒï¼š<a target=\"_blank\" rel=\"noopener\" href=\"https://web.dev/articles/css-subgrid\">https://web.dev/articles/css-subgrid</a></p>\n</blockquote>\n<p>è‡ªä» <code>subgrid</code> è¢«<a target=\"_blank\" rel=\"noopener\" href=\"https://caniuse.com/css-subgrid\">å¹¿æ³›æ”¯æŒ</a>åï¼Œç½‘æ ¼å¸ƒå±€ç³»ç»Ÿç»ˆäºå¯ä»¥åœ¨å‰ç«¯è¢«å½“æˆä¸€æŠŠæ¢­çš„å­˜åœ¨ (å’Œ <code>flex</code> å¹³èµ·å¹³åäº†)ï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹ã€‚</p>\n<p>æ¥çœ‹è¿™ä¹ˆä¸€ä¸ªä¾‹å­ (å–è‡ª <a target=\"_blank\" rel=\"noopener\" href=\"https://meyerweb.com/eric/thoughts/2016/01/15/subgrids-considered-essential/\">Subgrids Considered Essential</a>)ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">&#x3C;</span><span class=\"Î¼2\">ul</span><span class=\"Î¼1\">></span></span>\n<span class=\"line\"><span class=\"Î¼1\">  &#x3C;</span><span class=\"Î¼2\">li</span><span class=\"Î¼1\">>&#x3C;</span><span class=\"Î¼2\">label</span><span class=\"Î¼1\">>Name:&#x3C;/</span><span class=\"Î¼2\">label</span><span class=\"Î¼1\">> &#x3C;</span><span class=\"Î¼2\">input</span><span class=\"Î¼3\"> id</span><span class=\"Î¼1\">=</span><span class=\"Î¼4\">\"name\"</span><span class=\"Î¼1\">>&#x3C;/</span><span class=\"Î¼2\">li</span><span class=\"Î¼1\">></span></span>\n<span class=\"line\"><span class=\"Î¼1\">  &#x3C;</span><span class=\"Î¼2\">li</span><span class=\"Î¼1\">>&#x3C;</span><span class=\"Î¼2\">label</span><span class=\"Î¼1\">>Email:&#x3C;/</span><span class=\"Î¼2\">label</span><span class=\"Î¼1\">> &#x3C;</span><span class=\"Î¼2\">input</span><span class=\"Î¼3\"> id</span><span class=\"Î¼1\">=</span><span class=\"Î¼4\">\"email\"</span><span class=\"Î¼1\">>&#x3C;/</span><span class=\"Î¼2\">li</span><span class=\"Î¼1\">></span></span>\n<span class=\"line\"><span class=\"Î¼1\">  &#x3C;</span><span class=\"Î¼2\">li</span><span class=\"Î¼1\">>&#x3C;</span><span class=\"Î¼2\">label</span><span class=\"Î¼1\">>Password:&#x3C;/</span><span class=\"Î¼2\">label</span><span class=\"Î¼1\">> &#x3C;</span><span class=\"Î¼2\">input</span><span class=\"Î¼3\"> id</span><span class=\"Î¼1\">=</span><span class=\"Î¼4\">\"password\"</span><span class=\"Î¼1\">>&#x3C;/</span><span class=\"Î¼2\">li</span><span class=\"Î¼1\">></span></span>\n<span class=\"line\"><span class=\"Î¼1\">&#x3C;/</span><span class=\"Î¼2\">ul</span><span class=\"Î¼1\">></span></span></code></pre>\n<p>ä½ çš„è®¾è®¡å¸ˆæœ‹å‹ï¼šè¿™å‡ ä¸ª label èƒ½ä¸èƒ½åŠ ä¸ªçºµå‘å¯¹é½ï¼Ÿ</p>\n<p>é™¤äº†å¼ºè¡Œç»™ <code>&lt;label&gt;</code> åŠ ä¸ªä¼°ç®—çš„ <code>width</code> å¤–ï¼Œå…¶å®ç”¨ <code>subgrid</code> å°±å¯ä»¥å®ç°ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">ul</span><span class=\"Î¼1\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  display</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">grid</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-template-columns</span><span class=\"Î¼1\">: [column-1] </span><span class=\"Î¼5\">max-content</span><span class=\"Î¼1\"> [column-2] </span><span class=\"Î¼5\">1</span><span class=\"Î¼6\">fr</span><span class=\"Î¼1\"> [</span><span class=\"Î¼5\">end</span><span class=\"Î¼1\">];</span></span>\n<span class=\"line\"><span class=\"Î¼1\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">ul</span><span class=\"Î¼2\"> li</span><span class=\"Î¼1\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-column</span><span class=\"Î¼1\">: span </span><span class=\"Î¼5\">2</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  display</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">grid</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-template-columns</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">subgrid</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼1\">}</span></span></code></pre>\n<p>ç®€å•è§£é‡Šå‡ ç‚¹ï¼š</p>\n<ul>\n<li><code>[name]</code> æ˜¯ç”¨æ¥ç»™<strong>æ ¼çº¿</strong>å‘½åçš„ï¼Œä¹Ÿå¯ä»¥ä¸å‘½åç›´æ¥ä» 1 å¼€å§‹æ•° (æˆ–è€…ä»å³ä¾§ -1 å¼€å§‹æ•°)ï¼Œä¹Ÿå°±æ˜¯è¯´æœ¬ä¾‹ä¸­ <code>[column-1]</code> å®é™…ä¸Šç­‰äº 1ï¼Œ<code>[end]</code> å®é™…ä¸Šç­‰äº 3 æˆ–è€… -1</li>\n<li><code>grid-template-columns: max-content 1fr</code> è®¾ç½®äº†è¿™æ ·ä¸€ä¸ªç½‘æ ¼ï¼š<br>ä¸€å…±ä¸¤åˆ—ï¼Œç¬¬ä¸€åˆ—å®½åº¦æ˜¯å…¶å†…å®¹çš„æœ€å¤§å®½åº¦ï¼Œç¬¬äºŒåˆ—æ˜¯å æ»¡å‰©ä¸‹çš„å®½åº¦</li>\n<li><code>grid-column</code> æ˜¯ä¸€ä¸ªç¼©å†™å±æ€§ï¼Œè¡¨ç¤ºæœ¬å…ƒç´ åœ¨çˆ¶ç½‘æ ¼ä¸­<strong>å¼€å§‹</strong>åˆ°<strong>ç»“æŸ</strong>çš„åˆ—<strong>æ ¼çº¿</strong>ï¼Œä»¥ä¸‹å‡ ä¸ªè¡¨ç¤ºçš„éƒ½æ˜¯<q>å‰ä¸¤æ ¼</q>ï¼š<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">ul</span><span class=\"Î¼2\"> li</span><span class=\"Î¼1\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-column</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">1</span><span class=\"Î¼1\"> / </span><span class=\"Î¼5\">3</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-column</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">1</span><span class=\"Î¼1\"> / span </span><span class=\"Î¼5\">2</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-column</span><span class=\"Î¼1\">: span </span><span class=\"Î¼5\">2</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  grid-column</span><span class=\"Î¼1\">: column-1 / </span><span class=\"Î¼5\">end</span><span class=\"Î¼1\">; </span><span class=\"Î¼7\">/* å¯ä»¥é€šè¿‡å‘½åæ›´ç›´è§‚åœ°è¡¨ç¤ºèŒƒå›´ */</span></span>\n<span class=\"line\"><span class=\"Î¼1\">}</span></span></code></pre>\næœ¬ä¾‹ä¸­ï¼Œ<code>&lt;li&gt;</code> å…ƒç´ éœ€è¦å æ»¡å®½åº¦ï¼Œæ‰€ä»¥ç›´æ¥æ¡†é€‰äº†ä¸€è¡Œé‡Œçš„æ‰€æœ‰æ ¼å­</li>\n<li><code>grid-template-columns: subgrid</code> è¡¨ç¤ºæ­¤ç½‘æ ¼ç»§æ‰¿çˆ¶å…ƒç´ çš„ç½‘æ ¼ä½ç½®ï¼Œä¹Ÿå°±æ˜¯åˆšåˆšç”¨ <code>grid-column: span 2</code> æ¡†ä½çš„ä¸¤åˆ—</li>\n<li>æ‰€ä»¥æˆ‘ä»¬ç°åœ¨æœ‰ 1 + 3 ä¸ª <code>display: grid</code>ï¼Œå…¶ä¸­ <code>&lt;ul&gt;</code> æ˜¯ä¸‰è¡Œä¸¤åˆ—çš„ï¼Œè€Œæ¯ä¸ª <code>&lt;li&gt;</code> å„è‡ªå ä½ä¸€è¡Œå¹¶ä¸”æ˜¯ä¸¤åˆ—çš„ï¼Œå¹¶ä¸”ä»–ä»¬çš„<q>ä¸¤åˆ—</q>å®Œå…¨æ˜¯åŒä¸€ä¸ªé€»è¾‘ç½‘æ ¼é‡Œçš„</li>\n</ul>",
            "url": "https://hyrious.me/p/css-subgrid",
            "title": "ç½‘æ ¼å¸ƒå±€ä¸€æŠŠæ¢­",
            "date_modified": "2024-01-22T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#24292E}.Î¼2{color:#D73A49}.Î¼3{color:#032F62}.Î¼4{color:#6A737D}.Î¼5{color:#005CC5}.Î¼6{color:#6F42C1}.Î¼7{color:#E36209}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#E1E4E8}.Î¼2{color:#F97583}.Î¼3{color:#9ECBFF}.Î¼4{color:#6A737D}.Î¼5{color:#79B8FF}.Î¼6{color:#B392F0}.Î¼7{color:#FFAB70}}</style><p><time>2024-01-24</time> æ›´æ–°</p>\n<p>TypeScript è¿˜æœ‰ä¸€ä¸ªæ— é…ç½®æ–‡ä»¶æ¨¡å¼ï¼Œå½“ç„¶è¿™ä¸ªæ¨¡å¼ä¸‹é»˜è®¤æ˜¯ä¸å¼€ <code>strict</code> çš„ï¼Œæ¥çœ‹çœ‹å®é™…ä¸Šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼š</p>\n<ol start=\"0\">\n<li><code>target: &quot;es5&quot;</code>ï¼Œä¸ä½¿ç”¨ <code>tsc</code> ç¼–è¯‘çš„è¯å…¶å®æ²¡å•¥å½±å“</li>\n<li><code>alwaysStrict: false</code>ï¼Œé»˜è®¤ä¸äº§ç”Ÿ <code>&quot;use strict&quot;</code></li>\n<li><code>noImplicitAny: false</code>ï¼Œéšå¼ <code>any</code> ä¸ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ä½ å¯ä»¥å†™ä¸‹é¢è¿™ä¸ªä¸œä¸œ<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">window.foo </span><span class=\"Î¼2\">=</span><span class=\"Î¼3\"> 'bar'</span></span>\n<span class=\"line\"><span class=\"Î¼4\">// å¦åˆ™ä½ å¿…é¡»æ ‡è®°æˆ</span></span>\n<span class=\"line\"><span class=\"Î¼1\">(window </span><span class=\"Î¼2\">as</span><span class=\"Î¼5\"> any</span><span class=\"Î¼1\">).foo </span><span class=\"Î¼2\">=</span><span class=\"Î¼3\"> 'bar'</span></span></code></pre>\n</li>\n<li><code>noImplicitThis: false</code>ï¼Œ<code>this</code> ä¸æ ‡ç±»å‹ä¸ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ä½ å¯ä»¥å†™ä¸‹é¢è¿™ä¸ªä¸œä¸œ<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">function</span><span class=\"Î¼6\"> foo</span><span class=\"Î¼1\">() { </span><span class=\"Î¼2\">return</span><span class=\"Î¼5\"> this</span><span class=\"Î¼1\">.bar }</span></span>\n<span class=\"line\"><span class=\"Î¼4\">// å¦åˆ™ä½ å¿…é¡»æ ‡è®°æˆ</span></span>\n<span class=\"line\"><span class=\"Î¼2\">function</span><span class=\"Î¼6\"> foo</span><span class=\"Î¼1\">(</span><span class=\"Î¼5\">this</span><span class=\"Î¼2\">:</span><span class=\"Î¼1\"> { </span><span class=\"Î¼7\">bar</span><span class=\"Î¼2\">:</span><span class=\"Î¼5\"> unknown</span><span class=\"Î¼1\"> }) { </span><span class=\"Î¼2\">return</span><span class=\"Î¼5\"> this</span><span class=\"Î¼1\">.bar }</span></span></code></pre>\n</li>\n<li><code>strictNullChecks: false</code>ï¼Œä¸ä¼šæ£€æŸ¥ <code>null | undefined</code>ï¼Œä½†æ˜¯ç›®å‰ VS Code å’Œ Sublime LSP TypeScript éƒ½æ˜¯é»˜è®¤å¼€å¯è¿™ä¸ªæ£€æŸ¥çš„ (æœ‰å¯èƒ½æ˜¯ tsserver é»˜è®¤å¼€å¯)ï¼Œæ‰€ä»¥å®é™…ä¸Šå¯ä»¥ç†è§£æˆä»ç„¶ä¼šæ£€æŸ¥ nullã€‚ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥ç”¨ tsc ç¼–è¯‘è¿‡ä½†æ˜¯å¸¸è§ç¼–è¾‘å™¨é‡Œä¼šæœ‰æç¤º<pre class=\"shiki shiki-themes github-light github-dark twoslash lsp Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">declare</span><span class=\"Î¼1\"> </span><span class=\"Î¼2\">const</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\"><span class=\"twoslash-hover\">a<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼2\">const</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">a</span><span class=\"Î¼2\">:</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">string</span><span class=\"Î¼1\"> </span><span class=\"Î¼2\">|</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">null</span></span></span></span></span><span class=\"Î¼2\">:</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">string</span><span class=\"Î¼1\"> </span><span class=\"Î¼2\">|</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">null</span></span>\n<span class=\"line\"><span class=\"Î¼1\"><span class=\"twoslash-hover\">console.<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼2\">var</span><span class=\"Î¼1\"> console</span><span class=\"Î¼2\">:</span><span class=\"Î¼1\"> </span><span class=\"Î¼6\">Console</span></span></span></span></span><span class=\"Î¼6\"><span class=\"twoslash-hover\">log<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">(method) Console.</span><span class=\"Î¼6\">log</span><span class=\"Î¼1\">(</span><span class=\"Î¼2\">...</span><span class=\"Î¼1\">data: any[]): </span><span class=\"Î¼2\">void</span></span></span></span></span><span class=\"Î¼1\"><span class=\"twoslash-error\">(a.</span></span><span class=\"Î¼6\"><span class=\"twoslash-hover\">toLowerCase<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">(method) String.</span><span class=\"Î¼6\">toLowerCase</span><span class=\"Î¼1\">(): string</span></span></span></span></span><span class=\"Î¼1\">())</span></span><div class=\"twoslash-meta-line twoslash-error-line\">'a' is possibly 'null'.</div></code></pre>\n</li>\n<li><code>strictPropertyInitialization: false</code>ï¼Œä¸ä¼šæ£€æŸ¥æœªåˆå§‹åŒ–çš„å±æ€§<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">class</span><span class=\"Î¼6\"> Foo</span><span class=\"Î¼1\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼7\">  bar</span><span class=\"Î¼2\">:</span><span class=\"Î¼5\"> string</span><span class=\"Î¼1\">;</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  constructor</span><span class=\"Î¼1\">() {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    // Not initializing 'bar' here and no error</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼1\">}</span></span></code></pre>\n</li>\n<li><code>useUnknownInCatchVariables: false</code>ï¼Œ<code>catch(error)</code> é»˜è®¤ç”¨ any ç±»å‹ã€‚å…¶å®åœ¨è§„èŒƒçš„é¡¹ç›®é‡Œæˆ‘å¸Œæœ› <code>error</code> ç›´æ¥éšå¼æ ‡æˆ <code>Error</code>ï¼Œè¿™æ · <code>.message</code> æ¯”è¾ƒå®¹æ˜“</li>\n<li>ä½ å¯ä»¥æ­£å¸¸ä½¿ç”¨ <code>import { uniq } from &quot;lodash&quot;</code> å’Œ <code>import.meta.url</code> ç­‰è¯­æ³•</li>\n<li>ä½†æ˜¯ä¸èƒ½å†™ top level awaitï¼Œè¿™ä¸ªåŠŸèƒ½å¿…é¡»è¦è®¾ç½® <code>module: &quot;ESNext&quot; / &quot;ES2022&quot;</code></li>\n</ol>\n<hr>\n<p><time>2023-12-18</time> æ›´æ–°</p>\n<p>TypeScript å‘å±•è‡³ä»Šç§¯ç´¯äº†è®¸å¤šè¿‡æ—¶é…ç½®é¡¹ä»¥åŠé‡å¤é…ç½®é¡¹ï¼Œæœ¬æ–‡è¯•å›¾æŒ‰ç°åœ¨<a target=\"_blank\" rel=\"noopener\" href=\"https://aka.ms/tsconfig\">æœ€æ–°</a>çš„æ–‡æ¡£ï¼Œç»™å‡ºæœ€å°çš„ tsconfig.json é…ç½®ã€‚</p>\n<h3 id=\"tldr\">TL;DR</h3>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">{</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  \"compilerOptions\"</span><span class=\"Î¼1\">: {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"strict\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"target\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼3\">\"ESNext\"</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼1\">}</span></span></code></pre>\n<p>å¦‚æœä½ æœ‰ç¬¬ä¸‰æ–¹åº“ï¼Œå»ºè®®å¢åŠ ä»¥ä¸‹é…ç½®ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">{</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  \"compilerOptions\"</span><span class=\"Î¼1\">: {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"strict\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"target\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼3\">\"ESNext\"</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"moduleResolution\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼3\">\"Bundler\"</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"esModuleInterop\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"types\"</span><span class=\"Î¼1\">: [],</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"skipLibCheck\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    // å¯é€‰é…ç½®</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"noEmit\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"resolveJsonModule\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span><span class=\"Î¼1\">,</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    \"verbatimModuleSyntax\"</span><span class=\"Î¼1\">: </span><span class=\"Î¼5\">true</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼1\">}</span></span></code></pre>\n<h3 id=\"è§£é‡Š\">è§£é‡Š</h3>\n<h4 id=\"strict\"><code>strict</code></h4>\n<p>å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ¯”å¦‚ä¸å…è®¸å«æœ‰ <code>null</code> çš„ç±»å‹é€šè¿‡æ£€æŸ¥ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark twoslash lsp Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">declare</span><span class=\"Î¼1\"> </span><span class=\"Î¼2\">const</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\"><span class=\"twoslash-hover\">a<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼2\">const</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">a</span><span class=\"Î¼2\">:</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">string</span><span class=\"Î¼1\"> </span><span class=\"Î¼2\">|</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">null</span></span></span></span></span><span class=\"Î¼2\">:</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">string</span><span class=\"Î¼1\"> </span><span class=\"Î¼2\">|</span><span class=\"Î¼1\"> </span><span class=\"Î¼5\">null</span></span>\n<span class=\"line\"><span class=\"Î¼1\"><span class=\"twoslash-error\">a.</span></span><span class=\"Î¼5\"><span class=\"twoslash-hover\">length<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">(property) String.</span><span class=\"Î¼5\">length</span><span class=\"Î¼1\">: number</span></span></span></span></span></span><div class=\"twoslash-meta-line twoslash-error-line\">'a' is possibly 'null'.</div></code></pre>\n<p>è¿™ä¸ªä¸¥æ ¼æ¨¡å¼ä»£æ›¿äº†å…¶ä»– 8 ä¸ªå»ºè®®å¼€å¯çš„é…ç½®é¡¹ï¼Œæˆ‘å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œæ–‡æœ«ä¼šé™„ä¸Šä¸€äº›æ›´ä¸¥æ ¼çš„é€‰é¡¹ï¼Œç”¨æˆ·æŒ‰éœ€æ‰“å¼€ã€‚</p>\n<h4 id=\"target\"><code>target</code></h4>\n<p>ä»£ç é™çº§å’Œé»˜è®¤ <code>lib</code>ï¼Œç±»æ¯” esbuild çš„ <code>target</code>ï¼Œä¸å¡«æ˜¯ <code>ES5</code>ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå½“ <code>target</code> æ˜¯ <code>ES5</code> æ—¶ï¼Œ<code>let a = 1</code> ä¼šå˜æˆ <code>var a = 1</code>ã€‚</p>\n<p>å¦‚æœä¸ä½¿ç”¨ <code>tsc</code> ç¼–è¯‘å‡º js æ–‡ä»¶ï¼Œè¿™é‡Œçš„é™çº§å¯¹æˆ‘ä»¬æ²¡æœ‰æ„ä¹‰ã€‚</p>\n<p>å½“ <code>target</code> æ˜¯ <code>ES6</code> åŠä»¥ä¸Šæ—¶ï¼Œä¼šé»˜è®¤è®¾ç½®ï¼š</p>\n<ul>\n<li><code>lib</code> ä¸º <code>[&quot;DOM&quot;, &quot;DOM.Iterable&quot;, ...]</code>ï¼›</li>\n<li><code>module</code> ä¸º <code>ES6</code>ï¼Œ<ul>\n<li><code>moduleResolution</code> ä¸º <code>Node</code>ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>å› æ­¤å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦è®¾ç½® <code>target</code> ä¸º <code>ESNext</code> å³å¯ä½¿ç”¨æœ€æ–°çš„è¯­æ³•å’Œ ESM ç¯å¢ƒã€‚</p>\n<h4 id=\"module\"><code>module</code></h4>\n<p>ä½¿ç”¨å“ªç§æ¨¡å—ç±»å‹ï¼Œæ˜¯ ESM è¿˜æ˜¯ CJSï¼Œç±»æ¯” esbuild çš„ <code>format</code>ã€‚ä¸å¡«æ—¶ï¼Œå½“ <code>target</code> æ˜¯ <code>ES6</code> ä»¥ä¸Šæ—¶é»˜è®¤æ˜¯ä¸º <code>ES6</code>ã€‚</p>\n<p>ç”±äºç°ä»£å‰ç«¯ä¸»æµå°±æ˜¯æ¨è¡Œ ESMï¼Œè¿™é‡Œè®¾ç½®ä¸ºä»¥ä¸‹ä»»ä½•ä¸€ä¸ªå˜ä½“çš„å³å¯ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>module</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ES6/ES2015</td>\n<td>æ”¯æŒ import / export</td>\n</tr>\n<tr>\n<td>ES2020</td>\n<td>å¢åŠ äº† import() / import.meta æ”¯æŒ</td>\n</tr>\n<tr>\n<td>ES2022/ESNext</td>\n<td>å¢åŠ äº† top level await æ”¯æŒ</td>\n</tr>\n<tr>\n<td>Node16/NodeNext</td>\n<td>ç­‰äº ES2020/ESNextï¼Œä½†æ˜¯å¼ºåˆ¶è¦æ±‚æ–‡ä»¶ååç¼€åŒ¹é…</td>\n</tr>\n</tbody></table>\n<h4 id=\"moduleresolution\"><code>moduleResolution</code></h4>\n<p>è¦æ±‚æŒ‰ä½•ç§ç®—æ³•æœç´¢ <code>import</code> åé¢çš„è·¯å¾„ï¼Œä½¿ç”¨ç°ä»£æ‰“åŒ…å™¨çš„å»ºè®®è®¾ç½®ä¸º <code>Bundler</code>ã€‚</p>\n<h4 id=\"esmoduleinterop\"><code>esModuleInterop</code></h4>\n<p>å½±å“å¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„é»˜è®¤å¯¼å‡ºåï¼Œä½¿ç”¨ç°ä»£æ‰“åŒ…å™¨çš„è¿™é‡Œæ— è„‘æ‰“å¼€å³å¯ã€‚</p>\n<p>å¦‚æœä½ æ²¡æœ‰ç¬¬ä¸‰æ–¹åº“ï¼Œæ ¹æœ¬æ— éœ€è¿™ä¸ªé€‰é¡¹ã€‚</p>\n<h4 id=\"types-node\"><code>types: [&quot;node&quot;]</code></h4>\n<p>è®¾ç½®å¯¼å…¥å“ªäº›æ±¡æŸ“å…¨å±€çš„ç±»å‹å£°æ˜ï¼Œæ¯”å¦‚ <code>@types/node</code>ã€‚é»˜è®¤ä¸å¡«çš„è¯æ‰€æœ‰ <code>node_modules/@types</code> é‡Œçš„ç±»å‹éƒ½ä¼šæ³¨å…¥åˆ°å…¨å±€ï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸ªè¡Œä¸ºæ…¢æˆ–è€…ä¸å®‰å…¨ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®ã€‚</p>\n<h4 id=\"skiplibcheck\"><code>skipLibCheck</code></h4>\n<p>æ‰€æœ‰ d.ts æ–‡ä»¶ä¸å†æŠ¥å‘Šé”™è¯¯æˆ–è­¦å‘Šï¼Œé€šå¸¸æ˜¯ç”¨æ¥è§„é¿ä¸€äº›ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹å†²çªé—®é¢˜ã€‚</p>\n<h4 id=\"noemit\"><code>noEmit</code></h4>\n<p>æ‰“å¼€è¿™ä¸ªé€‰é¡¹ä¸»è¦æ˜¯ä¸ºäº†è§„é¿æ–‡ä»¶åå†²çªé—®é¢˜ï¼Œ<code>tsc</code> é»˜è®¤ä¼šå‡è®¾ä½ ä¼šè¿è¡Œä»–æ¥ç”Ÿæˆç›®æ ‡ js æ–‡ä»¶ï¼Œå¦‚æœè¿™ä¸ªç”Ÿæˆä¼šè¦†ç›–å·²æœ‰æ–‡ä»¶å°±ä¼šæŠ¥é”™ã€‚ä½ å¯ä»¥çœ‹æƒ…å†µæ‰“å¼€è¿™ä¸ªé€‰é¡¹å‘Šè¯‰ä»–ä¸ä¼šç”Ÿæˆ jsã€‚</p>\n<h4 id=\"verbatimmodulesyntax\"><code>verbatimModuleSyntax</code></h4>\n<p>å¼ºåˆ¶è¦æ±‚ç±»å‹å¯¼å…¥å¿…é¡»ä½¿ç”¨ <code>import type</code>ï¼Œæ–¹ä¾¿ç¬¬ä¸‰æ–¹æ‰“åŒ…å™¨åˆ†ææ–‡ä»¶ä¾èµ–çš„æ—¶å€™ä¸äº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚</p>\n<h3 id=\"é™„includeexcludefiles\">é™„ï¼š<code>include/exclude/files</code></h3>\n<p>è¿™å‡ ä¸ªé€‰é¡¹ä¼šç”¨æ¥å†³å®šå½“å‰<q>é¡¹ç›®</q>é‡Œæœ‰å“ªäº›æ–‡ä»¶ï¼ŒTypeScript ä¼šä½¿ç”¨ä»¥ä¸‹å‡ ç§è¡Œä¸ºã€‚</p>\n<ul>\n<li>å•¥ä¹Ÿæ²¡è®¾ç½®çš„è¯ï¼Œä» tsconfig.json å½“å‰æ–‡ä»¶å¤¹é€’å½’æœç´¢æ‰€æœ‰ .ts æ–‡ä»¶ï¼Œè·³è¿‡é»˜è®¤ exclude çš„æ–‡ä»¶ (æ¯”å¦‚ node_modules)ã€‚</li>\n<li>è®¾ç½®äº† <code>files</code> å°±ç›´æ¥ç”¨è¿™ä¸ªæ•°ç»„é‡Œçš„æ–‡ä»¶ï¼Œä¸å†æœç´¢ã€‚</li>\n<li>è®¾ç½®äº† <code>include</code> æˆ– <code>exclude</code> å°±æ‰§è¡Œè¿™ä¸ªæœç´¢ç®—æ³•ï¼š<code>glob(include).reject(exclude)</code>ã€‚</li>\n</ul>\n<p>å› æ­¤æœ€æ— è„‘çš„é€‰æ‹©æ˜¯ç›´æ¥æŠŠ tsconfig.json æ”¾åˆ° src ç›®å½•é‡Œã€‚</p>\n<h3 id=\"é™„è¶…çº§ä¸¥æ ¼é€‰é¡¹\">é™„ï¼šè¶…çº§ä¸¥æ ¼é€‰é¡¹</h3>\n<h5 id=\"nofallthroughcasesinswitch-true\">noFallthroughCasesInSwitch: true</h5>\n<p>ä¸å…è®¸ç›´æ¥ fallthrough åˆ°ä¸‹ä¸€ä¸ª caseï¼Œé™¤éåŠ ä¸€ä¸ª <code>// fallthrough</code> æ³¨é‡Šã€‚</p>\n<h5 id=\"noimplicitoverride-true\">noImplicitOverride: true</h5>\n<p>ä¸å…è®¸ç›´æ¥è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œé™¤éåŠ ä¸€ä¸ª <code>override</code> å…³é”®å­—ã€‚</p>\n<h5 id=\"noimplicitreturns-true\">noImplicitReturns: true</h5>\n<p>ä¸å…è®¸ä¸å†™ <code>return</code>ã€‚</p>\n<h5 id=\"nopropertyaccessfromindexsignature-true\">noPropertyAccessFromIndexSignature: true</h5>\n<p>ä¸å…è®¸ç”¨ <code>.</code> è®¿é—®æœªçŸ¥ä¸‹æ ‡å±æ€§ã€‚</p>\n<h5 id=\"nouncheckedindexedaccess-true\">noUncheckedIndexedAccess: true</h5>\n<p>è®¿é—®æœªçŸ¥ä¸‹æ ‡å±æ€§çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Š <code>| undefined</code>ã€‚</p>\n<h5 id=\"nounusedlocals-true\">noUnusedLocals: true</h5>\n<p>ä¸å…è®¸å‡ºç°æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡ï¼ŒçœŸæœ‰å¯ä»¥åŠ å‰ç¼€ <code>_</code>ã€‚</p>\n<h5 id=\"nounusedparameters-true\">noUnusedParameters: true</h5>\n<p>ä¸å…è®¸å‡ºç°æœªä½¿ç”¨çš„å‚æ•°ï¼ŒçœŸæœ‰å¯ä»¥åŠ å‰ç¼€ <code>_</code>ã€‚</p>",
            "url": "https://hyrious.me/p/minimal-tsconfig",
            "title": "æœ€å° tsconfig.json",
            "date_modified": "2023-12-18T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#D73A49}.Î¼2{color:#6F42C1}.Î¼3{color:#24292E}.Î¼4{color:#E36209}.Î¼5{color:#005CC5}.Î¼6{color:#6A737D}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#F97583}.Î¼2{color:#B392F0}.Î¼3{color:#E1E4E8}.Î¼4{color:#FFAB70}.Î¼5{color:#79B8FF}.Î¼6{color:#6A737D}}</style><h3 id=\"implicit-nominal-typing\">Implicit Nominal Typing</h3>\n<p>ä¸çŸ¥é“ä¸­æ–‡è¯¥å«ä»€ä¹ˆï¼Œ<q>éšå¼æ ‡ç§°ç±»å‹</q>ï¼Ÿå’³å’³ï¼Œç®€å•æ¥è¯´æˆ‘ä»¬æƒ³æ ‡è®°ä¸€ç±»ç‰¹å®šçš„å¯¹è±¡æ˜¯æŸä¸ªç±»å‹çš„ï¼Œä½†æ˜¯åˆæ²¡æœ‰ä¹Ÿä¸æƒ³åœ¨ä»–èº«ä¸ŠåŠ ä¸ªè„è„çš„æ ‡è®°å­—æ®µï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼2\"> Foo</span><span class=\"Î¼3\"> {}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼2\"> Bar</span><span class=\"Î¼3\"> {}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼3\"> foo</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> Foo</span><span class=\"Î¼1\"> =</span><span class=\"Î¼1\"> new</span><span class=\"Î¼2\"> Bar</span><span class=\"Î¼3\">()</span></span></code></pre>\n<p>æ˜æ˜æ˜¯ä¸¤ä¸ªç±»ï¼Œä½†æ˜¯å…¶ä¸­ä¸€ä¸ªçš„å®ä¾‹å±…ç„¶å¯ä»¥ç›´æ¥èµ‹å€¼æˆå¦ä¸€ä¸ªç±»å‹ã€‚ä¸ºäº†ä¸è®©è¿™ä¹ˆæ“ä½œï¼Œå¯ä»¥è¦æ±‚ <code>Foo</code> èº«ä¸Šæœ‰ä¸ª <code>Bar</code> èº«ä¸Šæ²¡æœ‰çš„ä¸œè¥¿ï¼Œå¯ä»¥å¾€ä»–èº«ä¸Šæ·»åŠ ä¸€ä¸ªä¸å­˜åœ¨çš„ç§æœ‰å±æ€§æ¥è¾¾åˆ°ç›®çš„ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark twoslash lsp Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">Foo<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">Foo</span></span></span></span></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  </span><span class=\"Î¼1\">private</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">declare</span><span class=\"Î¼3\"> </span><span class=\"Î¼4\"><span class=\"twoslash-hover\">_isFoo<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼3\">(property) Foo._isFoo: </span><span class=\"Î¼5\">true</span></span></span></span></span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼5\">true</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">Bar<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">Bar</span></span></span></span></span><span class=\"Î¼3\"> {}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼3\"><span class=\"twoslash-error\"> foo</span></span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">Foo<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">Foo</span></span></span></span></span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">new</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">Bar<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼3\">constructor </span><span class=\"Î¼2\">Bar</span><span class=\"Î¼3\">(): Bar</span></span></span></span></span><span class=\"Î¼3\">()</span></span><div class=\"twoslash-meta-line twoslash-error-line\">Property '_isFoo' is missing in type 'Bar' but required in type 'Foo'.</div></code></pre>\n<p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ ‡è®°ä½¿å¾—ä»–å˜å¾—å¦‚æ­¤å¥½ç”¨ï¼š</p>\n<ul>\n<li><p><code>private</code> å†³å®šäº†å®ƒä»ç„¶å¯ä»¥äº§ç”Ÿç±»å‹æ ‡è®°ï¼Œä½†ç¦æ­¢äº†ä¸Šå±‚ç”¨æˆ·ç›´æ¥è®¿é—®ï¼Œä½ åªèƒ½é€šè¿‡æ„é€ å‡½æ•°æ¥å®ä¾‹åŒ–è¿™ä¸ªç‰¹æ®Šçš„ç±»å‹ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼6\">// ç”Ÿæˆçš„ d.ts</span></span>\n<span class=\"line\"><span class=\"Î¼1\">declare</span><span class=\"Î¼1\"> class</span><span class=\"Î¼2\"> Foo</span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  private</span><span class=\"Î¼4\"> _isFoo</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n</li>\n<li><p><code>declare</code> å†³å®šäº†è¿™ä¸ªå±æ€§åªæ˜¯ä¸ªæ ‡è®°è€Œæ²¡æœ‰å®ä½“ï¼Œå› æ­¤ç”Ÿæˆçš„ JavaScript ä¹Ÿå¾ˆå¹²å‡€ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼6\">// ç”Ÿæˆçš„ js</span></span>\n<span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼2\"> Foo</span><span class=\"Î¼3\"> {}</span></span></code></pre>\n</li>\n</ul>\n<p>å¦‚æœä½ è®¾ç½®äº† <a target=\"_blank\" rel=\"noopener\" href=\"https://www.typescriptlang.org/tsconfig#useDefineForClassFields\"><code>useDefineForClassFields: false</code></a>ï¼Œä¹Ÿå¯ä»¥çœç•¥ <code>declare</code> æ¢æˆ <code>!</code>ã€‚</p>\n<h4 id=\"shared-nominal-typing\">Shared Nominal Typing</h4>\n<p>ä¸Šæ–‡å¾€ <code>class</code> ä¸Šæ·»åŠ äº†ç§æœ‰å±æ€§ï¼Œå¦‚æœæ˜¯å¾€ <code>interface</code> ä¸ŠåŠ å‘¢ï¼Ÿè¯¶ï¼Œæˆ‘ä»¬å‘ç° <code>private</code> æ˜¯ä¿ä¸ä½äº†ï¼Œä½†æ˜¯å¯ä»¥è®©ä¸€äº›ç±»å…±äº«åŒä¸€ä¸ªç±»å‹ï¼Œè€Œä¸”ç”¨æˆ·ä¸€èˆ¬ä¸ä¼šè‡ªå·±å°è¯•å®ç°è¿™ä¸ªç±»å‹ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark twoslash lsp Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">FooLike<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    </span><span class=\"Î¼4\">_isFoo</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\">;</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></span></span></span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> { </span><span class=\"Î¼4\"><span class=\"twoslash-hover\">_isFoo<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼3\">(property) </span><span class=\"Î¼2\">_isFoo</span><span class=\"Î¼3\">: FooLike</span></span></span></span></span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover twoslash-query-presisted\">FooLike<span class=\"twoslash-popup-info\"><div class=\"twoslash-popup-arrow\"></div><span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    </span><span class=\"Î¼4\">_isFoo</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\">;</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></span></span></span><span class=\"Î¼3\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">Bar<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">Bar</span></span></span></span></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  </span><span class=\"Î¼1\">declare</span><span class=\"Î¼3\"> </span><span class=\"Î¼4\"><span class=\"twoslash-hover\">_isFoo<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼3\">(property) Bar._isFoo: </span><span class=\"Î¼5\">this</span></span></span></span></span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼5\">this</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼3\"><span class=\"twoslash-hover\"> a<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼3\"> a</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span></span></span></span></span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">FooLike<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    </span><span class=\"Î¼4\">_isFoo</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\">;</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></span></span></span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">new</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">Bar<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼3\">constructor </span><span class=\"Î¼2\">Bar</span><span class=\"Î¼3\">(): Bar</span></span></span></span></span><span class=\"Î¼3\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">UserDefined<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">UserDefined</span></span></span></span></span><span class=\"Î¼3\"> {}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼3\"><span class=\"twoslash-error\"> b</span></span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">FooLike<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    </span><span class=\"Î¼4\">_isFoo</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\">FooLike</span><span class=\"Î¼3\">;</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></span></span></span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> </span><span class=\"Î¼1\">new</span><span class=\"Î¼3\"> </span><span class=\"Î¼2\"><span class=\"twoslash-hover\">UserDefined<span class=\"twoslash-popup-info\"><span class=\"line\"><span class=\"Î¼3\">constructor </span><span class=\"Î¼2\">UserDefined</span><span class=\"Î¼3\">(): UserDefined</span></span></span></span></span><span class=\"Î¼3\">()</span></span><div class=\"twoslash-meta-line twoslash-error-line\">Property '_isFoo' is missing in type 'UserDefined' but required in type 'FooLike'.</div></code></pre>\n<h3 id=\"tagged-value\">Tagged Value</h3>\n<p>ä¼ ç»Ÿ JavaScript äººçš„åšæ³•æ˜¯å­˜ä¸€ä¸ª <code>{ type: string, value }</code>ï¼Œå†™èµ·æ¥ä¸å…æœ‰äº›ç¹çè€Œä¸”ä¸åˆ©äºä»£ç å‹ç¼©ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸‹é¢è¿™ä¸ªå†™æ³•ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼2\"> Value</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">> {</span></span>\n<span class=\"line\"><span class=\"Î¼6\">  /** </span><span class=\"Î¼1\">@internal</span><span class=\"Î¼6\"> */</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  constructor</span><span class=\"Î¼3\">(</span><span class=\"Î¼1\">readonly</span><span class=\"Î¼4\"> type</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> Type</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">>, </span><span class=\"Î¼1\">readonly</span><span class=\"Î¼4\"> value</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> T</span><span class=\"Î¼3\">) {}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">  static</span><span class=\"Î¼2\"> define</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">>() {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    return</span><span class=\"Î¼1\"> new</span><span class=\"Î¼2\"> Type</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">>()</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼2\">  is</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">>(</span><span class=\"Î¼4\">type</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> Type</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">>)</span><span class=\"Î¼1\">:</span><span class=\"Î¼5\"> this</span><span class=\"Î¼1\"> is</span><span class=\"Î¼2\"> Value</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    return</span><span class=\"Î¼5\"> this</span><span class=\"Î¼3\">.type </span><span class=\"Î¼1\">===</span><span class=\"Î¼3\"> type</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼2\"> Type</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">> {</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  of</span><span class=\"Î¼3\">(</span><span class=\"Î¼4\">value</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> T</span><span class=\"Î¼3\">)</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> Value</span><span class=\"Î¼3\">&#x3C;</span><span class=\"Î¼2\">T</span><span class=\"Î¼3\">> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    return</span><span class=\"Î¼1\"> new</span><span class=\"Î¼2\"> Value</span><span class=\"Î¼3\">(</span><span class=\"Î¼5\">this</span><span class=\"Î¼3\">, value)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼6\">// å®šä¹‰ä¸€ä¸ªç±»å‹å«æ¸©åº¦</span></span>\n<span class=\"line\"><span class=\"Î¼1\">const</span><span class=\"Î¼5\"> temperature</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> Value</span><span class=\"Î¼1\">&#x3C;</span><span class=\"Î¼3\">number</span><span class=\"Î¼1\">></span><span class=\"Î¼3\">.</span><span class=\"Î¼2\">define</span><span class=\"Î¼3\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼6\">// å®ä¾‹åŒ–è¿™ä¸ªç±»å‹</span></span>\n<span class=\"line\"><span class=\"Î¼1\">const</span><span class=\"Î¼5\"> a</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> temperature.</span><span class=\"Î¼2\">of</span><span class=\"Î¼3\">(</span><span class=\"Î¼5\">42</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">a.</span><span class=\"Î¼2\">is</span><span class=\"Î¼3\">(temperature) </span><span class=\"Î¼6\">// true</span></span></code></pre>\n<p>æ³¨æ„åˆ° <code>@internal</code> æ ‡è®°ï¼Œè¿™ä½¿å¾—æœ€ç»ˆç”¨æˆ·ä¸èƒ½çœ‹åˆ°è¿™ä¸ªæ„é€ ï¼Œä¹Ÿå°±å¯ä»¥è¦æ±‚ä¸€å®šé€šè¿‡æŒ‡å®šçš„å·¥å‚å‡½æ•°å®ä¾‹åŒ–è‡ªå®šä¹‰ç±»å‹äº†ã€‚</p>",
            "url": "https://hyrious.me/p/typescript-tips",
            "title": "TypeScript å°æŠ€å·§",
            "date_modified": "2023-12-15T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#6A737D}.Î¼2{color:#D73A49}.Î¼3{color:#24292E}.Î¼4{color:#005CC5}.Î¼5{color:#032F62}.Î¼6{color:#6F42C1}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#6A737D}.Î¼2{color:#F97583}.Î¼3{color:#E1E4E8}.Î¼4{color:#79B8FF}.Î¼5{color:#9ECBFF}.Î¼6{color:#B392F0}}</style><p>Code Splitting ä¸€ç›´æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œä½†æ˜¯å¦‚æ­¤é‡è¦çš„åŠŸèƒ½åœ¨ <a target=\"_blank\" rel=\"noopener\" href=\"https://esbuild.github.io/api/#splitting\">esbuild</a> ä¸­æ—¶è‡³ä»Šæ—¥ä»ç„¶æ˜¯å®éªŒæ€§çš„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢å°±æ¥çœ‹çœ‹ã€‚</p>\n<h3 id=\"ä¸€ä¸ªç®€å•çš„ä¾‹å­\">ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3>\n<p>è€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">// shared.js</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> let</span><span class=\"Î¼3\"> util </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> 1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// a.js (entry)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼3\"> { util } </span><span class=\"Î¼2\">from</span><span class=\"Î¼5\"> './shared.js'</span></span>\n<span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼3\"> b </span><span class=\"Î¼2\">from</span><span class=\"Î¼5\"> './b.js'</span></span>\n<span class=\"line\"><span class=\"Î¼6\">foo</span><span class=\"Î¼3\">(b, util)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// b.js (entry)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼3\"> { util } </span><span class=\"Î¼2\">from</span><span class=\"Î¼5\"> './shared.js'</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> default</span><span class=\"Î¼6\"> bar</span><span class=\"Î¼3\">(util)</span></span></code></pre>\n<p>å¦‚æœæˆ‘è¦ä½ å¯¹ a.js å’Œ b.js è¿›è¡Œæ‰“åŒ…ï¼Œä¸”è¦æ±‚ä»…æ‰“åŒ…å‡ºä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ä½•å¯¹æ•Œï¼Ÿ</p>\n<p>ç®€å•æ¥è¯´ï¼Œæ­¤æ—¶ä½ å¿…é¡»å†³å®šæŠŠ shared.js æ”¾å…¥æŸä¸ªæ–‡ä»¶é‡Œï¼Œè€Œè¿™æ¬¡ã€Œæ”¾å…¥ã€å®é™…ä¸Šäº§ç”Ÿäº†æŸç§ç¨‹åº¦ä¸Šè¯´å¯ä»¥ç§°ä¹‹ä¸ºé”™è¯¯çš„ç»“æœï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">// dist/a.js (a + shared)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> let</span><span class=\"Î¼3\"> util </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼3\"> b </span><span class=\"Î¼2\">from</span><span class=\"Î¼5\"> './b.js'</span><span class=\"Î¼1\"> // a -> b</span></span>\n<span class=\"line\"><span class=\"Î¼6\">foo</span><span class=\"Î¼3\">(b, util)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// dist/b.js (b)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼3\"> { util } </span><span class=\"Î¼2\">from</span><span class=\"Î¼5\"> './a.js'</span><span class=\"Î¼1\"> // b -> a</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> default</span><span class=\"Î¼6\"> bar</span><span class=\"Î¼3\">(util)</span></span></code></pre>\n<p>å¯ä»¥è§‚å¯Ÿåˆ°ï¼šç«Ÿç„¶å‡ºç°äº†å¾ªç¯å¼•ç”¨ï¼å®é™…ä¸Šå…‰æ˜¯åœ¨ dist/a.js ä¸­åˆ›å»ºå‡º <code>util</code> è¿™ä¸ªå¯¼å‡ºéƒ½æ˜¯æœ‰é—®é¢˜çš„â€”â€”å› ä¸ºåŸæ–‡ä»¶ a.js æ²¡æœ‰è¦ä½ å¯¼å‡º <code>util</code>ã€‚</p>\n<p>è¯­ä¹‰ä¸Šçš„äº‹æƒ…æš‚ä¸”æ”¾åˆ°ä¸€è¾¹ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹è¿è¡Œæ—¶æ•ˆæœæ˜¯å¦æ­£ç¡®ã€‚å› ä¸º a.js å’Œ b.js éƒ½æ˜¯å…¥å£æ–‡ä»¶ï¼Œç†è®ºä¸Šä»–ä»¬éƒ½å¯èƒ½è¢«å•ç‹¬æ‰§è¡Œã€‚ç„¶è€Œï¼Œå½“ä½ è¿è¡Œ dist/a.js æ—¶ï¼Œä»–è¦ import dist/b.jsï¼Œæ‰€ä»¥ bar() å…ˆæ‰§è¡Œï¼›å½“ä½ è¿è¡Œ dist/b.js æ—¶ï¼Œä»–è¦ import dist/a.jsï¼Œæ‰€ä»¥ foo() å…ˆæ‰§è¡Œã€‚ğŸ¤¯</p>\n<p>ä½†æ˜¯æˆ‘ä»¬çœ‹ä¸€ä¸‹æºæ–‡ä»¶ï¼Œb.js å‹æ ¹æ²¡æœ‰ä¾èµ– a.jsï¼Œæ‰€ä»¥ç†è®ºä¸Šæ¥è¯´æ‰§è¡Œ b.js æ—¶ä¸åº”è¯¥æ‰§è¡Œ foo() æ‰å¯¹ã€‚</p>\n<h3 id=\"å‰¯ä½œç”¨ç®¡ç†æ²¡æœ‰å¹³å‡¡è§£\">å‰¯ä½œç”¨ç®¡ç†æ²¡æœ‰<abbr title=\"trivial\">å¹³å‡¡</abbr>è§£</h3>\n<p>æˆ‘ä»¬çš„è½¯ä»¶åŠŸèƒ½åŸºäºå‰¯ä½œç”¨å·¥ä½œï¼Œå¤§éƒ¨åˆ†<abbr title=\"imperative\">å‘½ä»¤å¼</abbr>ç¼–ç¨‹è¯­è¨€éœ€è¦ä»£ç æŒ‰é¡ºåºè¿è¡Œã€‚è€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼Œä»è¯­æ³•ä¸Šè¯´ä»–ä»¬æ˜¯åˆ†ç¦»çš„è¯­æ³•æ ‘ï¼Œä½†æ˜¯ç”±äºå¼•ç”¨å…³ç³»ï¼Œä¸€äº›ä»£ç å¿…é¡»è¦åœ¨å…¶ä»–ä¸€äº›ä»£ç ä¹‹åæ‰§è¡Œï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">class</span><span class=\"Î¼6\"> A</span><span class=\"Î¼3\"> {} </span><span class=\"Î¼1\">// [1]</span></span>\n<span class=\"line\"><span class=\"Î¼4\">A</span><span class=\"Î¼3\">.foo </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> 1</span><span class=\"Î¼1\"> // [2] å¿…é¡»åœ¨ [1] ä¹‹åæ‰§è¡Œ</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// [3] ã€Œä¼¼ä¹ã€ä¸éœ€è¦åœ¨ [1] ä¹‹åæ‰§è¡Œ</span></span>\n<span class=\"line\"><span class=\"Î¼2\">function</span><span class=\"Î¼6\"> foo</span><span class=\"Î¼3\">() {</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  return</span><span class=\"Î¼2\"> new</span><span class=\"Î¼6\"> A</span><span class=\"Î¼3\">()</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼6\">foo</span><span class=\"Î¼3\">() </span><span class=\"Î¼1\">// [4] å¦‚æœä½ ä¸çŸ¥é“ foo() é‡Œåœ¨å¹²ä»€ä¹ˆï¼Œä½ æ— æ³•ç¡®å®š [4] è¦åœ¨ [1] ä¹‹åæ‰§è¡Œ</span></span></code></pre>\n<p>å®é™…ä¸Šï¼Œè¿½è¸ªè¯­æ³•æ ‘ä¹‹é—´çš„<strong>å®é™…æ‰§è¡Œé¡ºåº</strong>å…³ç³»å¤ªå¤æ‚äº† (å…‰æ˜¯å¼•ç”¨å…³ç³»è¿˜å¥½è¯´ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­å¯ä»¥è½»æ˜“å‡ºç°äº¤å‰å¼•ç”¨)ï¼Œå„ç§éšå¼çš„ä¾èµ–å…³ç³»å‡ ä¹ä¸å¯èƒ½åˆ†æå®Œæ•´ã€‚å› ä¸ºæ‰“åŒ…å™¨æ— æ³•çŸ¥é“äº§ç‰©å…·ä½“æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œåªèƒ½å°½æœ€å¤§åŠªåŠ›å…¼å®¹æ‰€æœ‰æƒ…å†µï¼Œå‡ºç° <a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/evanw/esbuild/issues/399\">bug</a> ä¹Ÿæ˜¯å¸¸æœ‰çš„ã€‚</p>\n<h3 id=\"å¦‚ä½•å®è·µ\">å¦‚ä½•å®è·µ</h3>\n<p>å¯¹äºåº“ä½œè€…ï¼Œå°½é‡å‘å¸ƒ ESM æ ¼å¼çš„çº¯å‡½æ•°åŒ…ã€‚å¦‚æœè¦ä¾èµ–å‰¯ä½œç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨åŒ…è£…æˆå·¥å‚å‡½æ•°æˆ–è€…å…¶ä»–å½¢å¼å®ç°æ‡’æƒ°åŠ è½½ï¼Œå¦‚æ­¤ä¸€æ¥ç­‰åˆ°è¿è¡Œæ—¶ï¼Œç›¸å…³å‰¯ä½œç”¨ä»£ç å¤§æ¦‚ç‡å·²ç»è¢«æ‰§è¡Œè¿‡äº†ï¼Œå°±ä¸æ€•é¡ºåºé—®é¢˜äº†ã€‚å¦å¤–ï¼Œå°½é‡ä¸è¦å‡ºç°å¾ªç¯å¼•ç”¨ï¼Œæ‰“åŒ…å™¨é€šå¸¸å¾ˆéš¾å†³å®šåœ¨è¿™ç§æƒ…å†µä¸‹å“ªä¸ªæ–‡ä»¶å…ˆæ‰§è¡Œã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">// bundle.js</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> function</span><span class=\"Î¼6\"> foo</span><span class=\"Î¼3\">() {</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  return</span><span class=\"Î¼2\"> new</span><span class=\"Î¼6\"> A</span><span class=\"Î¼3\">()</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">class</span><span class=\"Î¼6\"> A</span><span class=\"Î¼3\"> {} </span><span class=\"Î¼1\">// å‡è®¾ class A {} è¢«æ‰“åŒ…å™¨æŒªåˆ°äº†åé¢</span></span>\n<span class=\"line\"><span class=\"Î¼4\">A</span><span class=\"Î¼3\">.data </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> 1</span><span class=\"Î¼1\"> // å‰¯ä½œç”¨</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// main.js</span></span>\n<span class=\"line\"><span class=\"Î¼6\">foo</span><span class=\"Î¼3\">() </span><span class=\"Î¼1\">// ç”¨æˆ·ä»£ç æ‰§è¡Œçš„æ—¶å€™ä¹Ÿä¸æ€• A.data æœªå®šä¹‰äº†</span></span></code></pre>\n<p>å¯¹äºç»ˆç«¯å¼€å‘è€…ï¼Œå¦‚æœä½ æœ‰ HTTP/2ï¼Œå¯ä»¥æ— è„‘ä½¿ç”¨æ‰“åŒ…å™¨çš„é»˜è®¤é…ç½®æ¥åˆ†åŒ…ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šåˆ†å‡ºç›¸å½“å¤šçš„ç¢ç‰‡ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯è¯­ä¹‰å’Œè¿è¡Œé¡ºåºçš„æ­£ç¡®æ€§ã€‚ä¸ç”¨æ‹…å¿ƒç¢ç‰‡æ–‡ä»¶çš„æ€§èƒ½é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æœ‰ <a target=\"_blank\" rel=\"noopener\" href=\"https://guybedford.com/es-module-preloading-integrity#modulepreload-polyfill\">preload</a> æœºåˆ¶å¯ä»¥æå‰ä¸‹è½½å¹¶è§£ææ¨¡å—ã€‚ä¸€å¥è¯æ¦‚æ‹¬ï¼ŒJust use <a target=\"_blank\" rel=\"noopener\" href=\"https://vitejs.dev/\">Vite</a>ã€‚</p>\n<p>å¦‚æœä½ éœ€è¦ä¸€å®šç¨‹åº¦çš„æ‰‹åŠ¨é…ç½® (<a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/evanw/esbuild/issues/207\">Manual chunks</a>)ï¼Œç›®å‰ Rollup å’Œ webpack å„è‡ªå®ç°äº†ä¸€å¥—ç›¸å¯¹ç¨³å®šçš„åˆ†åŒ…ç®—æ³•ã€‚è€Œ esbuild è¿˜æ²¡å®ç°ï¼Œä¸è¿‡ä½ å¯ä»¥<a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/hyrious/esbuild-split-vendors-example\">æ‰‹åŠ¨</a>æ¨¡æ‹Ÿ webpack çš„æ•ˆæœã€‚</p>",
            "url": "https://hyrious.me/p/code-splitting-is-not-trivial",
            "title": "ä»£ç åˆ†å‰²å¹¶ä¸ç®€å•",
            "date_modified": "2023-11-27T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#6F42C1}.Î¼2{color:#D73A49}.Î¼3{color:#24292E}.Î¼4{color:#005CC5}.Î¼5{color:#E36209}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#B392F0}.Î¼2{color:#F97583}.Î¼3{color:#E1E4E8}.Î¼4{color:#79B8FF}.Î¼5{color:#FFAB70}}</style><p>ä»¥å‰å†™è¿‡ä¸€ç¯‡ <a href=\"./crdt-fractional-indexing\">&laquo;CRDT: åˆ†æ•°æ’åº&raquo;</a>ã€‚æˆ‘è®¤ä¸ºï¼ŒCRDT å¯èƒ½æ˜¯æœªæ¥å®ç°å¤§éƒ¨åˆ†è½¯ä»¶çš„æœ€ä½³é€‰æ‹©ã€‚æœ‰äº†å®ƒï¼Œä½ å°±å…è´¹è·å¾—äº†ç¦»çº¿ç¼–è¾‘ã€åä½œã€å†å²è®°å½•ã€æ’¤é”€é‡åšç­‰ç­‰åŠŸèƒ½ï¼Œä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘ä¸­ä»¥ä¸Šä»»ä½•ä¸€æ¡éƒ½æ˜¯éå¸¸éš¾è®¾è®¡å’Œå®ç°çš„ã€‚</p>\n<h3 id=\"å®šä¹‰\">å®šä¹‰</h3>\n<p>Conflict-free Replicated Data Typeï¼Œæ— å†²çªæ•°æ®ç»“æ„ã€‚ä»€ä¹ˆå«å†²çªï¼Ÿè¿™é€šå¸¸éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯æ¥ç†è§£å’Œå®šä¹‰ï¼Œå¯¹äºå¤§å®¶æœ€ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘åœºæ™¯ï¼Œå†²çªå°±æ˜¯ä¸¤ä¸ªæˆ–ä»¥ä¸Šç”¨æˆ·çš„ç¼–è¾‘æœ€ç»ˆå˜æˆäº†é‡å ã€é”™ä½ã€ä¸ä¸€è‡´çš„æƒ…å†µã€‚CRDT çš„ç›®æ ‡å°±æ˜¯é’ˆå¯¹å„ç§ä¸åŒçš„åœºæ™¯ï¼Œ<strong>åˆ†åˆ«</strong>è®¾è®¡å‡ºç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥ç¬¦åˆå¤§å¤šæ•°äººçš„é¢„æœŸã€ä¿æŒä¸€è‡´ã€‚ç”±äº CRDT ä¸æ˜¯ä¸€ç§ï¼Œæœ‰çš„æ—¶å€™å¤§å®¶ä¹Ÿä¼šç”¨ CRDTs æ¥ä»£æŒ‡æ‰€æœ‰çš„ CRDTã€‚ä¸‹æ–‡ä¸­è¿˜ä¼šåˆ—ä¸¾ä¸€äº›å¸¸è§çš„å®ç°ã€‚</p>\n<h4 id=\"é—®é¢˜æ¡†æ¶\">é—®é¢˜æ¡†æ¶</h4>\n<p>CRDT è¦è§£å†³çš„é—®é¢˜å¿…é¡»éƒ½èƒ½ç”¨è¿™ä¸ªæ¡†æ¶æ¥æè¿°ã€‚</p>\n<blockquote>\n<p>å‡è®¾æœ‰ä¸€ä¸ªæ— æ•Œä¿¡é“ï¼Œå¯ä»¥è®©ä»»ä½•åœ¨é‡Œé¢çš„æ¶ˆæ¯éƒ½å¹¿æ’­åˆ°æ‰€æœ‰å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”ä¸ä¼šå‘ç”Ÿæ¶ˆæ¯çš„ä¸¢å¤± (ä¸ç”¨ä¿è¯é¡ºåº)ï¼Œé‚£ä¹ˆå¦‚ä½•åŸºäºå®ƒè®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä½¿å…¶å¯ä»¥æ»¡è¶³æŸä¸ªåä½œåœºæ™¯çš„éœ€æ±‚ï¼Ÿ</p>\n</blockquote>\n<p>ç®€å•æ¥è¯´è¦æ±‚æœ‰è¿™æ ·ä¸€ä¸ªåŸºå»º:</p>\n<ul>\n<li>æ¶ˆæ¯å…¨éƒ¨åˆ°è¾¾ï¼ŒåŒ…æ‹¬æ‰€æœ‰å†å²æ¶ˆæ¯ï¼Œä¸ç”¨ä¿è¯é¡ºåº</li>\n<li>æ¶ˆæ¯ä¸ä¼šé‡å¤</li>\n</ul>\n<p>&hellip;è¿™åœ¨ç°å®ä¸­å½“ç„¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œäºæ˜¯å…·ä½“åº”ç”¨å°±éœ€è¦åˆ†åˆ«å®ç°æŸäº›åŸºå»ºï¼Œè¿™é€šå¸¸åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>ä¸€ä¸ªå­˜å‚¨æœåŠ¡ï¼Œç”¨äºåœ¨æ‰€æœ‰è®¾å¤‡éƒ½ä¸‹çº¿æ—¶ä¿å­˜æœ€æ–°çš„çŠ¶æ€</li>\n<li>ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºä¿è¯æ¶ˆæ¯çš„åˆ°è¾¾ (ä½†ä¸ç”¨ä¿è¯æ°¸ä¹…å­˜å‚¨)<ul>\n<li>åŸºäº P2P çš„å®ç°æœ‰å¯èƒ½æ— æ³•ä¿è¯ï¼Œæ­¤æ—¶éœ€è¦å®¢æˆ·ç«¯å®ç°é‡è¯•ç­–ç•¥</li>\n</ul>\n</li>\n<li>å…¶ä»–å¯¹ä¸šåŠ¡æœ‰ç”¨çš„æœåŠ¡<ul>\n<li>ä¾‹å¦‚ï¼Œä¸€ä¸ªåŒæ­¥è§‚çœ‹è§†é¢‘çš„åº”ç”¨å°†éœ€è¦åŒæ­¥è®¾å¤‡çš„æ—¶é—´ä»¥å¯¹é½è§†é¢‘æ’­æ”¾çš„ä½ç½®</li>\n</ul>\n</li>\n</ul>\n<p>å› æ­¤ï¼Œå¦‚æœæœ‰äº§å“å°†ä»¥ä¸ŠåŸºå»ºå°è£…æˆä¸€ä¸ªç»Ÿä¸€çš„æœåŠ¡ï¼Œå°†ä¼šéå¸¸æœ‰åˆ©äº CRDT åº”ç”¨çš„è½åœ°ã€‚</p>\n<h4 id=\"æœ¬åœ°ä¼˜å…ˆè½¯ä»¶\">æœ¬åœ°ä¼˜å…ˆè½¯ä»¶</h4>\n<p>CRDT éå¸¸é€‚åˆç”¨æ¥åˆ¶ä½œæœ¬åœ°ä¼˜å…ˆè½¯ä»¶ (Local-first software)ã€‚ç°å¦‚ä»Šäººä»¬é€šå¸¸æ¥è§¦çš„éƒ½æ˜¯äº‘åº”ç”¨ (æˆ–è€…ä½ å¯ä»¥ç§°å…¶ä¸º <abbr title=\"Software as a service\">SaaS</abbr>)ï¼Œä½ éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®å’Œä½¿ç”¨ä½ ä¸Šä¼ çš„æ•°æ®ã€‚è€Œä¸€æ—¦æœåŠ¡å™¨å®•æœºæˆ–è€…ç”±äºä¸€äº›ä¸å¯æŠ—åŠ›ï¼Œä½ çè´µçš„æ•°æ®å°±ä¼šæš‚æ—¶æ¶ˆå¤±ä¸€æ®µæ—¶é—´ã€‚æœ‰äº† CRDTï¼Œä½ çš„æœ¬åœ°ç¼–è¾‘å†å²ä¼šè¢«æŒä¹…åŒ–å­˜å‚¨ï¼Œå°±ä¸æ€•å†…å®¹ä¸¢å¤±äº†ã€‚</p>\n<p>å½“ç„¶ï¼Œå‰é¢æåˆ°çš„é—®é¢˜å¯ä»¥é€šè¿‡æœ¬åœ°å¤šä¿å­˜å‡ æ¬¡å¤‡ä»½ç­‰åœŸåŠæ³•æ¥è§£å†³ã€‚ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œæœ¬åœ°ä¼˜å…ˆçš„æ„ä¹‰åœ¨äº<q>è®©æœ¬åœ°çš„ä¿®æ”¹ä¼˜å…ˆå‘ç”Ÿ</q>ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·åº”å½“ç«‹å³çœ‹åˆ°æ“ä½œçš„æ•ˆæœï¼Œè€Œä¸æ˜¯ç­‰æœåŠ¡å™¨è¿”å›å“åº”ã€‚å¦åˆ™è¿æ°”ä¸å¥½çš„è¯ç”¨æˆ·æ¯æ“ä½œä¸€ä¼šå°±å¾—ç­‰åº”ç”¨è½¬åœˆåœˆï¼Œè¿™ç§ä½“éªŒæ˜¯éå¸¸ç³Ÿç³•çš„ã€‚CRDT ä¸Šçš„ä¿®æ”¹éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼Œå°±ç®—ç½‘ç»œæ–­å¼€ä¹Ÿä¸ä¼šä¸¢å¤±è¿™æ¬¡çš„æ“ä½œã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ—¶å€™ä¸ç”¨-crdt\">ä»€ä¹ˆæ—¶å€™ä¸ç”¨ CRDTï¼Ÿ</h4>\n<p>CRDT çš„æœ€ä½ç›®æ ‡åªæ˜¯ä¿è¯ç»“æœä¸€è‡´ï¼Œè€Œä¸ä¿è¯æ€»æ˜¯ç¬¦åˆé¢„æœŸã€‚ä¾‹å¦‚ï¼Œ<abbr title=\"Multiplayer Online Battle Arena\">MOBA</abbr> ç±»æ¸¸æˆä¸­å¯¹äºä¼¤å®³çš„ç»“ç®—éœ€è¦æœ‰ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨è¿›è¡Œè£å†³å’Œä¸‹å‘ä»¥ä¿è¯å…¬å¹³æ€§ã€‚å†æ¯”å¦‚ï¼Œé“¶è¡Œç±»ç³»ç»Ÿä¼šè¦æ±‚æ¯æ¬¡é‡‘èæ“ä½œçš„åŸå­æ€§ã€ä¸€è‡´æ€§ç­‰ç¡¬æ ‡å‡†ï¼Œè¿™äº›åœ°æ–¹è¯¥è½¬åœˆåœˆè¿˜æ˜¯å¾—è½¬ã€‚</p>\n<p>å¤šäººæ¸¸æˆçš„åŒæ­¥æ˜¯åˆä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„è¯é¢˜ï¼Œä»¥åæœ‰æœºä¼šå¯ä»¥å†å±•å¼€ã€‚</p>\n<h3 id=\"åˆ†ç±»\">åˆ†ç±»</h3>\n<p>æœ‰ä¸¤å¤§ç±» CRDT çš„è®¾è®¡æ–¹å‘ï¼Œä¸€ç±»æ˜¯åŸºäºæ“ä½œ (Operation) çš„ï¼Œä¹Ÿå°±æ˜¯å¹¿æ’­æ¶ˆæ¯å†…å®¹ç›´æ¥æ˜¯<q>æ“ä½œ</q>ï¼Œæ¯”å¦‚ (+1) (insert 0 &quot;hello&quot;) ä¹‹ç±»çš„ï¼Œç°åœ¨ä¸»è¦æµè¡Œçš„ CRDT åº“å¤§éƒ½æ˜¯è¿™ç±»ï¼Œä¹Ÿå« <abbr title=\"Commutative replicated data types\">CmRDTs</abbr>ã€‚å¦ä¸€ç±»æ˜¯åŸºäºçŠ¶æ€ (State) çš„ï¼Œå¹¿æ’­æ¶ˆæ¯æ˜¯æœ¬åœ°çš„çŠ¶æ€ (å¯ä»¥æ˜¯å…¨é‡æˆ–éƒ¨åˆ†)ï¼Œè€Œæ¥æ”¶ç«¯éœ€è¦å®ç°ç‰¹æ®Šçš„åˆå¹¶ç®—æ³•æ¥ç®—åˆ°æœ€æ–°çŠ¶æ€ï¼Œä¹Ÿå« <abbr title=\"Convergent replicated data types\">CvRDTs</abbr>ã€‚</p>\n<h3 id=\"å¸¸è§åœºæ™¯å’Œå®ç°\">å¸¸è§åœºæ™¯å’Œå®ç°</h3>\n<p>ä¸‹é¢æœ‰ä¸€äº›æ˜¯çº¯å­¦æœ¯æ„æƒ³çš„è™šæ‹Ÿåœºæ™¯ï¼Œæœ‰ä¸€äº›åˆ™æ˜¯çœŸå®ä¸”æœ‰çº¿ä¸Šåº”ç”¨çš„ã€‚</p>\n<h4 id=\"æŠ•ç¥¨ç³»ç»Ÿ\">æŠ•ç¥¨ç³»ç»Ÿ</h4>\n<p>å‡å¦‚ä½ åœ¨åšä¸€ä¸ªç›´æ’­ç±»è½¯ä»¶ï¼Œè½¯ä»¶ä¸Šæœ‰ä¸€ä¸ªç‚¹èµæŒ‰é’®ï¼Œæ‰€æœ‰è§‚ä¼—éƒ½å¯ä»¥ç‚¹å‡»æ­¤æŒ‰é’®ä¸ºä¸»æ’­çš„äººæ°”å€¼ +1ï¼Œä½ è¯¥å¦‚ä½•å®ç°ï¼šæœ‰ä¸€ä¸‡ä¸ªäººåŒæ—¶ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œå¦‚ä½•è®©ä¸»æ’­æœ€ç»ˆçœ‹åˆ°äººæ°”å€¼ = ä¸€ä¸‡ï¼Œä¸”æœåŠ¡å™¨ä¸ç‚¸ã€‚</p>\n<p><strong>è§£</strong>: å¯ä»¥è®¾è®¡è¿™æ ·ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒçš„æ¶ˆæ¯ä½“é‡Œåªæœ‰ä¸€ä¸ª <code>1</code>ï¼Œä¸»æ’­æ‹¿åˆ°æ¶ˆæ¯åç«‹åˆ»å¢åŠ äººæ°”å€¼ã€‚å›æƒ³ä¸Šæ–‡ä¸­çš„ä¿¡é“ï¼Œæ˜¾ç„¶ï¼Œæ—¢ç„¶æ¶ˆæ¯éƒ½å¯ä»¥åˆ°è¾¾ï¼Œé‚£ä¹ˆæœ€ç»ˆæ”¶åˆ°çš„ <code>1</code> çš„æ•°é‡ä¸€å®šæ˜¯å®Œæ•´çš„ä¸€ä¸‡ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">ç‚¹èµ</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> () </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> è§‚ä¼—.</span><span class=\"Î¼1\">å‘é€</span><span class=\"Î¼3\">(</span><span class=\"Î¼4\">1</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">æ”¶åˆ°</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> (</span><span class=\"Î¼5\">ç‚¹èµ</span><span class=\"Î¼3\">) </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  this</span><span class=\"Î¼3\">.äººæ°”å€¼ </span><span class=\"Î¼2\">+=</span><span class=\"Î¼3\"> ç‚¹èµ</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<h4 id=\"åˆ†ç»„æŠ•ç¥¨ç³»ç»Ÿ\">åˆ†ç»„æŠ•ç¥¨ç³»ç»Ÿ</h4>\n<p>è¿˜æ˜¯ä¸Šé¢çš„åœºæ™¯ï¼Œä½†æ˜¯ä½ æƒ³çœ‹åˆ°å…·ä½“æ¯ä¸ªäººç‚¹äº†å¤šå°‘æ¬¡èµã€‚</p>\n<p><strong>è§£</strong>: å¯ä»¥è®©æ¶ˆæ¯ä½“é‡Œå¸¦ä¸Šè§‚ä¼—çš„ IDï¼Œä¸»æ’­é‚£é‡Œåˆ†åˆ«ç»Ÿè®¡æ¯ä¸ªäººçš„ç‚¹èµæ¬¡æ•°ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">ç‚¹èµ</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> () </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> è§‚ä¼—.</span><span class=\"Î¼1\">å‘é€</span><span class=\"Î¼3\">(</span><span class=\"Î¼4\">this</span><span class=\"Î¼3\">.id, </span><span class=\"Î¼4\">1</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">æ”¶åˆ°</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> ([</span><span class=\"Î¼5\">è°</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">ç‚¹èµ</span><span class=\"Î¼3\">]) </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  this</span><span class=\"Î¼3\">.äººæ°”å€¼[è°] </span><span class=\"Î¼2\">+=</span><span class=\"Î¼3\"> ç‚¹èµ</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<h4 id=\"ç¤¼ç‰©ç³»ç»Ÿ-set\">ç¤¼ç‰©ç³»ç»Ÿ (Set)</h4>\n<p>è¿˜æ˜¯ä¸Šé¢çš„åœºæ™¯ï¼Œä½†æ˜¯è¿™æ¬¡ä¸è¦æ±‚ç»Ÿè®¡èµæ•°ï¼Œè€Œæ˜¯è¦æ±‚çŸ¥é“ä¸»æ’­æ”¶åˆ°äº†å“ªäº›ç§ç±»çš„ç¤¼ç‰©ã€‚</p>\n<p><strong>è§£</strong>: å¯ä»¥è®©æ¶ˆæ¯ä½“é‡Œå¸¦ä¸Šç¤¼ç‰©çš„ IDï¼Œä¸»æ’­é‚£é‡ŒæŠŠæ”¶åˆ°çš„ç¤¼ç‰© ID æ”¾åˆ°ä¸€ä¸ªé›†åˆé‡Œã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">å‘é€ç¤¼ç‰©</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> () </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> è§‚ä¼—.</span><span class=\"Î¼1\">å‘é€</span><span class=\"Î¼3\">(ç¤¼ç‰©.id)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">æ”¶åˆ°</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> ([</span><span class=\"Î¼5\">è°</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">ç¤¼ç‰©</span><span class=\"Î¼3\">]) </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  this</span><span class=\"Î¼3\">.æ”¶åˆ°çš„[ç¤¼ç‰©] </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> true</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<h4 id=\"çŸ¥ä¹\">çŸ¥ä¹</h4>\n<p>è¿™æ¬¡ä¸å…‰å¯ä»¥ç‚¹èµï¼Œè¿˜å¯ä»¥ç‚¹è¸©ã€‚åªéœ€è¦çŸ¥é“æœ€å <code>èµ - è¸©</code> æ˜¯å¤šå°‘å³å¯ã€‚</p>\n<p><strong>è§£</strong>: å¯ä»¥è®¾è®¡ä¸¤ç§æ¶ˆæ¯ï¼Œä¸€ä¸ª <code>+1</code>ï¼Œä¸€ä¸ª <code>-1</code>ï¼Œä¸»æ’­ç´¯åŠ æ‰€æœ‰æ¶ˆæ¯ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">ç‚¹èµ</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> () </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> è§‚ä¼—.</span><span class=\"Î¼1\">å‘é€</span><span class=\"Î¼3\">(</span><span class=\"Î¼2\">+</span><span class=\"Î¼4\">1</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"><span class=\"Î¼1\">ç‚¹è¸©</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> () </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> è§‚ä¼—.</span><span class=\"Î¼1\">å‘é€</span><span class=\"Î¼3\">(</span><span class=\"Î¼2\">-</span><span class=\"Î¼4\">1</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">æ”¶åˆ°</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> (</span><span class=\"Î¼5\">ç‚¹èµæˆ–ç‚¹è¸©</span><span class=\"Î¼3\">) </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  this</span><span class=\"Î¼3\">.äººæ°”å€¼ </span><span class=\"Î¼2\">+=</span><span class=\"Î¼3\"> ç‚¹èµæˆ–ç‚¹è¸©</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<h4 id=\"é€šç”¨-map\">é€šç”¨ (Map)</h4>\n<p>å¯¹äºä¸€äº›å…ƒä¿¡æ¯ç±»çš„æ•°æ®ï¼Œåªéœ€è¦ä¿ç•™æœ€åä¸€æ¬¡ä¿®æ”¹çš„ç»“æœã€‚ä¾‹å¦‚æ–‡ç« æ ‡é¢˜ã€å¡ç‰‡é¢œè‰²ç­‰ç­‰ã€‚</p>\n<p><strong>æ³¨æ„</strong>: ä¸Šæ–‡ä¸­çš„ä¿¡é“æ˜¯ä¸ä¿åºçš„ï¼Œå› æ­¤ä½ ä¸èƒ½ä¾èµ–æ¶ˆæ¯åˆ°è¾¾çš„é¡ºåºæ¥å®ç°ã€‚</p>\n<p><strong>è§£</strong>: å¯ä»¥ä½¿ç”¨ <a target=\"_blank\" rel=\"noopener\" href=\"https://en.wikipedia.org/wiki/Lamport_timestamp\">Lamport</a> æ—¶é’Ÿæ¥å¯¹æ¶ˆæ¯è¿›è¡Œæ’åºï¼Œæ¶ˆæ¯å†…å®¹å°±æ˜¯ä¿®æ”¹ <code>Map</code> å†…å®¹ã€‚</p>\n<blockquote>\n<p>Lamport æ—¶é’Ÿæ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ•°ï¼šåˆå§‹åŒ–ä¸º 0ï¼Œæ¯æ¬¡å‘é€æ¶ˆæ¯ä¸€èµ·å‘å‡ºå»ä¸” +1ï¼Œæ¯æ¬¡æ”¶åˆ°æ¶ˆæ¯æ—¶è®¾ä¸ºæœ€æ–°æ¶ˆæ¯çš„æ—¶é’Ÿ +1ã€‚</p>\n</blockquote>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">å†™å…¥</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> (</span><span class=\"Î¼5\">key</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">value</span><span class=\"Î¼3\">) </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  this</span><span class=\"Î¼3\">.</span><span class=\"Î¼1\">å‘é€</span><span class=\"Î¼3\">(</span><span class=\"Î¼4\">this</span><span class=\"Î¼3\">.lamport</span><span class=\"Î¼2\">++</span><span class=\"Î¼3\">, key, value)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span>\n<span class=\"line\"><span class=\"Î¼1\">æ”¶åˆ°</span><span class=\"Î¼2\"> =</span><span class=\"Î¼3\"> (</span><span class=\"Î¼5\">lamport</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">key</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">value</span><span class=\"Î¼3\">) </span><span class=\"Î¼2\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  if</span><span class=\"Î¼3\"> (</span><span class=\"Î¼4\">this</span><span class=\"Î¼3\">.lamport </span><span class=\"Î¼2\">&#x3C;</span><span class=\"Î¼3\"> lamport) {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    this</span><span class=\"Î¼3\">.lamport </span><span class=\"Î¼2\">=</span><span class=\"Î¼3\"> lamport </span><span class=\"Î¼2\">+</span><span class=\"Î¼4\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    this</span><span class=\"Î¼3\">.æ•°æ®[key] </span><span class=\"Î¼2\">=</span><span class=\"Î¼3\"> value</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<h4 id=\"åˆ—è¡¨-list\">åˆ—è¡¨ (List)</h4>\n<p>å¯¹äºè®°äº‹æœ¬ç­‰å°å‹åˆ—è¡¨åœºæ™¯ï¼Œç›´æ¥æ›¿æ¢æ•´ä¸ªåˆ—è¡¨ä¼¼ä¹æœ‰ç‚¹æµªè´¹å¸¦å®½ã€‚</p>\n<p><a target=\"_blank\" rel=\"noopener\" href=\"https://madebyevan.com/algos/crdt-fractional-indexing/\">Evan</a> æå‡ºç»™å…ƒç´ å¢åŠ ä¸€ä¸ªåˆ†æ•°ä¿¡æ¯è¡¨ç¤ºåˆ—è¡¨ä½ç½®çš„æ–¹æ³•ï¼Œè¯¦è§ <a href=\"./crdt-fractional-indexing\">&laquo;CRDT: åˆ†æ•°æ’åº&raquo;</a>ã€‚</p>\n<h4 id=\"æ–‡æœ¬-ä¸€ç§åˆ—è¡¨\">æ–‡æœ¬ (ä¸€ç§åˆ—è¡¨)</h4>\n<p>å¯¹äºæ–‡æœ¬ç¼–è¾‘å™¨ä¹‹ç±»å¤§é‡æœ‰åºæ•°æ®çš„åœºæ™¯ï¼Œä¸€ä¸ªé‡è¦çš„éœ€æ±‚æ˜¯ä¿è¯ä¸é‡å ï¼Œä¾‹å¦‚ä¸¤ä¸ªäººåˆ†åˆ«åœ¨åŒä¸€ä¸ªä½ç½®è¾“å…¥äº† <code>ab</code> <code>cd</code>ï¼Œåˆå¹¶ç»“æœå¯ä»¥æ˜¯ <code>abcd</code> æˆ– <code>cdab</code>ï¼Œä½†ä¸èƒ½æ˜¯ <code>acbd</code>ã€‚</p>\n<p><a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/yjs\">Yjs</a> å®ç°äº†ä¸€ä¸ªåå« <a target=\"_blank\" rel=\"noopener\" href=\"https://zhuanlan.zhihu.com/p/452980520\">YATA</a> çš„ç®—æ³•ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯ä¿è¯ <code>a-b</code> å’Œ <code>c-d</code> è¿™ä¸¤æ ¹çº¿ä¸èƒ½å½¢æˆäº¤å‰ã€‚</p>\n<p><a target=\"_blank\" rel=\"noopener\" href=\"https://www.loro.dev/blog/crdt-richtext\">Loro</a> å®ç°äº† Peritext å’Œ Fugue ä¸¤ä¸ªæ–°ç®—æ³•ï¼Œèƒ½å¾ˆå¥½åœ°æ”¯æŒå¯Œæ–‡æœ¬ (æ–‡æœ¬ä¸Šæœ‰å„ç§æ ‡è®°ï¼Œå¦‚åŠ ç²—å˜è‰²ç­‰) åœºæ™¯ä»¥åŠè§£å†³æ–‡æœ¬é‡å é—®é¢˜ã€‚</p>\n<h4 id=\"æ ‘-æ— ç¯å›¾\">æ ‘ (æ— ç¯å›¾)</h4>\n<p>å¦‚æœåªæœ‰ <code>Map</code>ï¼Œä½ å¯ä»¥å¯¹æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨å…¶çˆ¶èŠ‚ç‚¹çš„ ID æ¥å®ç°å›¾ç»“æ„ï¼Œä½†æ˜¯è¿™æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p>\n<p><a target=\"_blank\" rel=\"noopener\" href=\"https://www.loro.dev/blog/loro-now-open-source#movable-tree\">Loro</a> å®ç°äº†ä¸€ä¸ªæ‹¥æœ‰ç§»åŠ¨èŠ‚ç‚¹æŒ‡ä»¤ (ä¹Ÿå°±æ˜¯<q>è®¾ç½®æŸä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</q>) çš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯æ’å…¥é€‚å½“çš„<q>æ’¤é”€</q>æ“ä½œæ¥æ¢å¤æ ‘ç»“æ„ä¸èƒ½æœ‰ç¯çš„çº¦å®šã€‚</p>\n<p><a target=\"_blank\" rel=\"noopener\" href=\"https://madebyevan.com/algos/crdt-mutable-tree-hierarchy/\">Evan</a> å®ç°äº†ä¸€ä¸ªç±»ä¼¼çš„ç®—æ³•ã€‚</p>",
            "url": "https://hyrious.me/p/crdt",
            "title": "CRDT æ¼«è°ˆ",
            "date_modified": "2023-11-23T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#6A737D}.Î¼2{color:#D73A49}.Î¼3{color:#005CC5}.Î¼4{color:#24292E}.Î¼5{color:#6F42C1}.Î¼6{color:#032F62}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#6A737D}.Î¼2{color:#F97583}.Î¼3{color:#79B8FF}.Î¼4{color:#E1E4E8}.Î¼5{color:#B392F0}.Î¼6{color:#9ECBFF}}</style><p>æˆ‘åˆã•›å•é‡å†™äº†ä¸€éåšå®¢ï¼Œè¿™æ¬¡ç”¨ä¸Šäº† <a target=\"_blank\" rel=\"noopener\" href=\"https://vitejs.dev/\">Vite</a>ã€‚å…¶å®æˆ‘ä»¥å‰ç”¨è¿‡ä¸å°‘åšå®¢ç”Ÿæˆå™¨ï¼ŒåŒ…æ‹¬ <a target=\"_blank\" rel=\"noopener\" href=\"https://jekyllrb.com/\">Jekyll</a>ã€<a target=\"_blank\" rel=\"noopener\" href=\"https://hexo.io/\">Hexo</a>ã€<a target=\"_blank\" rel=\"noopener\" href=\"https://www.gatsbyjs.com/\">Gatsby</a> ç­‰ç­‰ï¼Œä½†æ˜¯ä»–ä»¬è¦ä¹ˆæ¸²æŸ“å¤ªæ…¢ï¼Œè¦ä¹ˆå®‰è£…æˆæœ¬å¤ªå¤§ã€‚æˆ‘<a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/hyrious/hyrious/issues/5\">æ›¾ç»</a>å£èƒ¡è¿‡è¯¦ç»†çš„éœ€æ±‚ï¼Œç®€å•æ¥è¯´æˆ‘éœ€è¦è¿™ä¸ªç”Ÿæˆå™¨æ‹¥æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>æ”¯æŒæ—  JS è®¿é—®ï¼Œä¹Ÿå°±æ˜¯è¯´æ•´ä¸ªé¡µé¢åªæœ‰ HTML å’Œ CSS å°±åº”è¯¥èƒ½æ­£å¸¸è¿è¡Œäº†</li>\n<li>æ”¯æŒ <a target=\"_blank\" rel=\"noopener\" href=\"https://github.github.com/gfm/\" title=\"GitHub Flavored Markdown\">GFM</a>ï¼Œå› ä¸ºæºç æ”¾åœ¨ GitHubï¼Œæœ€å¥½èƒ½ç›´æ¥æ‰“å¼€ GitHub è§‚çœ‹</li>\n<li>ä»ç„¶æ”¯æŒæŒ‰éœ€å¼•å…¥ JS è„šæœ¬ï¼Œè¿™æ ·åœ¨æˆ‘çš„åšå®¢ä¸Šé˜…è¯»æ—¶å¯ä»¥æœ‰æ›´ä¸°å¯Œçš„ä½“éªŒ</li>\n<li>[ä¼˜åŒ–] æ”¯æŒç§’çº§åˆ·æ–°ï¼Œè¿™æ ·ç¼–è¾‘æ—¶åŸºæœ¬ä¸ä¼šæ‰“æ–­æ€è·¯ï¼ˆæˆ‘æ—¶ä¸æ—¶å°±æƒ³çœ‹çœ‹æ¸²æŸ“ç»“æœï¼‰</li>\n</ul>\n<p>æˆ‘æ›¾ç»è¯•è¿‡æ‰‹æ’¸ HTML æºç ï¼Œè¿™æ ·ç¡®å®çµæ´»æ€§å¾ˆé«˜ä¸”åªéœ€è¦<abbr title=\"ä¸å«å­¦ä¹  HTML å’Œ CSS çš„æ—¶é—´\">æˆæœ¬ä¸ºé›¶</abbr>çš„å…ˆéªŒçŸ¥è¯†ï¼Œä½†æ˜¯é‡åˆ°ä»£ç é«˜äº®ç­‰è¯»å†™éƒ½æ¯”è¾ƒéº»çƒ¦çš„å†…å®¹è¿˜æ˜¯ä¸å¤Ÿæ–¹ä¾¿ã€‚åæ¥æˆ‘å†™äº†ä¸€ä¸ª <a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/hyrious/telegraph\">telegraph</a>ï¼Œé™¤äº†çµæ´»åº¦ä¸é«˜å¤–åŸºæœ¬å®ç°äº†ä¸Šè¿°éœ€æ±‚ã€‚</p>\n<p>è¿™æ¬¡é‡å†™æˆ‘å†³å®šå°è¯•ä¸€ä¸‹ Vite çš„ <a target=\"_blank\" rel=\"noopener\" href=\"https://vitejs.dev/guide/ssr.html#pre-rendering-ssg\">SSR</a>ï¼Œåœ¨ç ”ç©¶äº†ä¸€ä¸‹ <a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/antfu/vite-ssg\">Vue</a> çš„æ–¹æ¡ˆåï¼Œæˆ‘å‘ç°æ ¸å¿ƒå°±æ˜¯è¦è®©å‰ç«¯ä»£ç èƒ½è·‘åœ¨ Node.js ä¸Šï¼Œè¿™æ ·æœ¬åœ°çš„è„šæœ¬å°±å¯ä»¥åˆ†æåŒä¸€ä»½å‰ç«¯æ•°æ®ä»¥æ¸²æŸ“é‚£äº›ç½‘é¡µäº†ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">// src/main.ts</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> const</span><span class=\"Î¼3\"> app</span><span class=\"Î¼2\"> =</span><span class=\"Î¼2\"> import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.env.</span><span class=\"Î¼3\">SSR</span><span class=\"Î¼2\"> ?</span><span class=\"Î¼5\"> createSSRApp</span><span class=\"Î¼4\">(App) </span><span class=\"Î¼2\">:</span><span class=\"Î¼5\"> createApp</span><span class=\"Î¼4\">(App)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// scripts/build.ts</span></span>\n<span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼4\"> { app } </span><span class=\"Î¼2\">from</span><span class=\"Î¼6\"> '../src/main'</span></span>\n<span class=\"line\"><span class=\"Î¼4\">console.</span><span class=\"Î¼5\">log</span><span class=\"Î¼4\">(</span><span class=\"Î¼5\">renderToString</span><span class=\"Î¼4\">(app))</span></span></code></pre>\n<p>å› ä¸ºæˆ‘ä¸æƒ³è¦è¿è¡Œæ—¶å¸¦ä¸€ä¸ª 100 kB çš„ Vueï¼Œä½†æ˜¯åˆæƒ³è¦ dev ç¯å¢ƒä¸‹èƒ½çœ‹åˆ°å†…å®¹ï¼Œæœ€åæˆ‘çš„å…¥å£æ–‡ä»¶é•¿è¿™æ ·ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">// è¿™å‡ ä¸ªå˜é‡éƒ½æ˜¯çº¯çš„ï¼Œæ‰“åŒ…æ—¶ä¼šè¢« tree shake æ‰</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> let</span><span class=\"Î¼4\"> templates </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> {}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">export</span><span class=\"Î¼2\"> let</span><span class=\"Î¼4\"> posts </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> {}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">// åªåœ¨é¢„æ¸²æŸ“å’Œ dev æ—¶åŠ è½½çœŸæ­£çš„æ•°æ®</span></span>\n<span class=\"line\"><span class=\"Î¼2\">if</span><span class=\"Î¼4\"> (</span><span class=\"Î¼2\">import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.env.</span><span class=\"Î¼3\">SSR</span><span class=\"Î¼2\"> ||</span><span class=\"Î¼2\"> import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.hot) {</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  templates </span><span class=\"Î¼2\">=</span><span class=\"Î¼2\"> import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.</span><span class=\"Î¼5\">glob</span><span class=\"Î¼4\">(</span><span class=\"Î¼6\">'./templates/*.html'</span><span class=\"Î¼4\">, { as: </span><span class=\"Î¼6\">'raw'</span><span class=\"Î¼4\">, eager: </span><span class=\"Î¼3\">true</span><span class=\"Î¼4\"> })</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  posts </span><span class=\"Î¼2\">=</span><span class=\"Î¼2\"> import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.</span><span class=\"Î¼5\">glob</span><span class=\"Î¼4\">(</span><span class=\"Î¼6\">'../posts/*.md'</span><span class=\"Î¼4\">, { eager: </span><span class=\"Î¼3\">true</span><span class=\"Î¼4\"> })</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼2\">  if</span><span class=\"Î¼4\"> (</span><span class=\"Î¼2\">import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.hot) {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    render</span><span class=\"Î¼4\">(location.pathname, templates, posts)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">    import</span><span class=\"Î¼4\">.</span><span class=\"Î¼3\">meta</span><span class=\"Î¼4\">.hot.</span><span class=\"Î¼5\">accept</span><span class=\"Î¼4\">()</span></span>\n<span class=\"line\"><span class=\"Î¼4\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼4\">}</span></span></code></pre>\n<p>å®Œæ•´çš„ä»£ç è§<a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/hyrious/hyrious.github.io/blob/-/src/main.ts\">è¿™é‡Œ</a>ã€‚</p>\n<p>ç»è¿‡è¿™ä¹ˆä¸€é€šæŠ˜è…¾ï¼Œç°åœ¨æˆ‘å¯ä»¥ç”¨ Vite ç”Ÿæˆæ—  JS çš„åšå®¢äº†ï¼</p>\n<pre><code>&gt; @ build /path/to/hyrious.github.io\n&gt; esbuild-dev scripts/build.ts\n\n[build] Build for client...\nvite v5.0.0 building for production...\nâœ“ 7 modules transformed.\ndist/index.html                 0.50 kB â”‚ gzip: 0.30 kB\ndist/assets/index-vWxNvpCb.css  6.42 kB â”‚ gzip: 2.37 kB\nâœ“ built in 898ms\n\n[build] Build for server...\ndist/index.html          4.41 kB\ndist/p/index.html        3.04 kB\ndist/p/hello-world.html  12.11 kB\n\n[build] Build finished.\n</code></pre>",
            "url": "https://hyrious.me/p/hello-world",
            "title": "Hello, world!",
            "date_modified": "2023-11-17T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#6F42C1}.Î¼2{color:#24292E}.Î¼3{color:#005CC5}.Î¼4{color:#D73A49}.Î¼5{color:#6A737D}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#B392F0}.Î¼2{color:#E1E4E8}.Î¼3{color:#79B8FF}.Î¼4{color:#F97583}.Î¼5{color:#6A737D}}</style><p><a target=\"_blank\" rel=\"noopener\" href=\"https://zh-hans.react.dev/reference/react-dom/createPortal\">Portal</a> æ˜¯ React çš„ <q>DOM ä¼ é€é—¨</q>ï¼Œå®ƒå¯ä»¥æŠŠè™šæ‹Ÿ DOM è½¬ç§»åˆ°å…¶ä»–çœŸå® DOM ä¸‹æ¸²æŸ“ï¼ŒåŒæ—¶è¿˜ä¼šä¿æŒè™šæ‹Ÿ DOM æ ‘çš„äº‹ä»¶å†’æ³¡ã€‚ä½†å®é™…ä½¿ç”¨æ—¶æˆ‘ä»¬å¯èƒ½åè€Œä¸æƒ³è¦äº‹ä»¶å†’æ³¡è¢«<q>ä¼ é€</q>èµ°ï¼Œåªéœ€è¦ä¸¤è¡Œ CSS å³å¯è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹ã€‚</p>\n<h3 id=\"tldr\">TL;DR</h3>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">.portal</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  pointer-events</span><span class=\"Î¼2\">: </span><span class=\"Î¼3\">none</span><span class=\"Î¼2\">;</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼1\">.contents</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  pointer-events</span><span class=\"Î¼2\">: </span><span class=\"Î¼3\">all</span><span class=\"Î¼2\">;</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<h3 id=\"portal-çš„çœŸèº«\">Portal çš„çœŸèº«</h3>\n<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<a target=\"_blank\" rel=\"noopener\" href=\"https://zh-hans.react.dev/reference/react-dom/components/common#react-event-object\">React DOM åŒ…è£…äº†ä¸€å¥—åˆæˆäº‹ä»¶</a>æ¥æ‰“å¹³ä¸åŒæµè§ˆå™¨çš„åŒºåˆ«ï¼Œä½†æ˜¯ä¸ä»…ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜è´Ÿè´£ä»¥ä¸‹ä¸¤ä¸ªé‡è¦ä»»åŠ¡ï¼š</p>\n<ul>\n<li>å‡å°‘å¯¹çœŸå® DOM çš„ <code>addEventListener</code> çš„è°ƒç”¨ï¼Œé¿å…æ€§èƒ½é—®é¢˜</li>\n<li><a target=\"_blank\" rel=\"noopener\" href=\"https://zh-hans.react.dev/reference/react-dom/createPortal\">æ•æ‰æ‰€æœ‰ Portal é‡Œçš„äº‹ä»¶ï¼Œä¼ é€åˆ°å¯¹åº”çš„ç»„ä»¶é‡Œå¤„ç†</a></li>\n</ul>\n<p>é™¤äº†ç¬¬ä¸€ä¸ªçº¯ç²¹æ˜¯è‡ªä½œè‡ªå—ä»¥å¤–ï¼Œç¬¬äºŒä¸ªå…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬è§‚å¯Ÿ Portal å…ƒç´ ï¼Œä¼šå‘ç°ä¸Šé¢æŒ‚äº†æ‰€æœ‰å¯èƒ½çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå¤§æ¦‚å°±å¯ä»¥çŒœåˆ°ä»–æ˜¯æ€ä¹ˆè½¬ç§»è¿™äº›äº‹ä»¶çš„äº†ã€‚</p>\n<h3 id=\"å±è”½äº‹ä»¶ç›‘å¬å™¨\">å±è”½äº‹ä»¶ç›‘å¬å™¨</h3>\n<p>å¦‚ä½•æ¸…ç©ºä¸€ä¸ªå…ƒç´ ä¸Šæ‰€æœ‰æœªçŸ¥çš„ç›‘å¬å™¨ï¼Ÿåœ¨ä¸é»‘åŸç”Ÿ API çš„æƒ…å†µä¸‹ï¼Œä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç´ æ›¿ä»£ä»–ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼4\">let</span><span class=\"Î¼2\"> dup </span><span class=\"Î¼4\">=</span><span class=\"Î¼2\"> old.</span><span class=\"Î¼1\">cloneNode</span><span class=\"Î¼2\">() </span><span class=\"Î¼5\">// æ‰€æœ‰ DOM å±æ€§ç»§æ‰¿ï¼Œä½†æ˜¯æ–°å…ƒç´ æ²¡æœ‰æŒ‚ä»»ä½•ç›‘å¬å™¨</span></span>\n<span class=\"line\"><span class=\"Î¼2\">dup.</span><span class=\"Î¼1\">append</span><span class=\"Î¼2\">(</span><span class=\"Î¼4\">...</span><span class=\"Î¼2\">old.childNodes)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">old.</span><span class=\"Î¼1\">replaceWith</span><span class=\"Î¼2\">(dup)</span></span></code></pre>\n<p>ä¸è¿‡è¿™ä¼šå¯¼è‡´è¿™ä¸ªæ–°å…ƒç´ ä¸è¢« React DOM ç®¡ç†ï¼Œä¸Šé¢ç¼ºå°‘äº†ä¸€äº›ç§æœ‰ JS å±æ€§ã€‚</p>\n<p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼Œé€šè¿‡è®¾ç½® CSSï¼Œè¿™ä¸ªå…ƒç´ å°±ä¼šå˜æˆçº¯çº¯çš„ç©ºæ°”ï¼Œæ‰€æœ‰äº‹ä»¶éƒ½ä¸ä¼šå‘åˆ°ä»–èº«ä¸Šã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">.portal</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  pointer-events</span><span class=\"Î¼2\">: </span><span class=\"Î¼3\">none</span><span class=\"Î¼2\">;</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<p>ä½†æ˜¯è¿™ä¸ªå±æ€§æ˜¯<strong>ç»§æ‰¿</strong>çš„ï¼Œå°±åƒ <code>color</code> å±æ€§ä¼šå½±å“ä¸‹é¢æ‰€æœ‰å…ƒç´ ä¸€æ ·ï¼Œè¿™ä¸‹é‡Œé¢å…ƒç´ çš„äº‹ä»¶ä¹Ÿå‘ä¸å‡ºæ¥äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å†å¯ç”¨é‡Œé¢çš„å…ƒç´ çš„äº‹ä»¶ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">.contents</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  pointer-events</span><span class=\"Î¼2\">: </span><span class=\"Î¼3\">all</span><span class=\"Î¼2\">;</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<p>è¿™æ ·ä¸€æ¥ï¼Œä¼ é€é—¨ä¸‹é¢çš„äº‹ä»¶å°±å¯ä»¥æ­£å¸¸å‘é€åˆ°å¤–é¢ï¼Œè¢«å¤–é¢çš„å…ƒç´ ï¼ˆä¾‹å¦‚å¦ä¸€ä¸ª React DOM æ ¹å…ƒç´ ï¼‰æ•è·äº†ã€‚</p>",
            "url": "https://hyrious.me/p/break-react-portal",
            "title": "æ‰“ç ´ React Portal",
            "date_modified": "2023-03-01T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#D73A49}.Î¼2{color:#24292E}.Î¼3{color:#005CC5}.Î¼4{color:#6A737D}.Î¼5{color:#6F42C1}.Î¼6{color:#E36209}.Î¼7{color:#032F62}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#F97583}.Î¼2{color:#E1E4E8}.Î¼3{color:#79B8FF}.Î¼4{color:#6A737D}.Î¼5{color:#B392F0}.Î¼6{color:#FFAB70}.Î¼7{color:#9ECBFF}}</style><p>TypeScript ä¸­å­˜åœ¨ä¸‰ç§å¯ä»¥ç”¨æ¥æè¿°<q>å¯¹è±¡</q>çš„ç±»å‹ï¼š<code>object</code>ã€<code>Record&lt;string, any&gt;</code>ã€<code>{}</code>ï¼Œè¯¥ç”¨å“ªç§ï¼Ÿä¸‹é¢å°±æ¥çœ‹çœ‹ã€‚</p>\n<h3 id=\"-ç©ºçš„å½¢çŠ¶\"><code>{}</code> ç©ºçš„å½¢çŠ¶</h3>\n<p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“ <code>{}</code> æ˜¯ä¸€ä¸ª interfaceï¼Œå®ƒè´Ÿè´£åŒ¹é…<q>å½¢çŠ¶</q>ï¼Œè€Œä¸€ä¸ªç©ºçš„å½¢çŠ¶çº¦ç­‰äº <code>any</code> â€”â€”</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼2\"> a</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> {} </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> 1</span><span class=\"Î¼4\"> // ok</span></span></code></pre>\n<p>å®é™…ä¸Šï¼Œå®ƒä¿è¯å³ä¾§çš„å€¼æ˜¯å¯ä»¥æŒ‰<q>å¯¹è±¡</q>å½¢å¼ï¼ˆä¹Ÿå°±æ˜¯ä¸‹æ ‡å½¢å¼ï¼‰è®¿é—®çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>null</code> å’Œ <code>undefined</code> ä¸åœ¨æ­¤åˆ—ï¼ˆå› ä¸ºä»–ä»¬ç›´æ¥ <code>.foo</code> ä¼šç‚¸ï¼‰ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼2\"> a</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> {} </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> null</span><span class=\"Î¼4\"> // error</span></span></code></pre>\n<p>æ­¤å¤–ï¼Œæ³¨æ„åˆ°å¯¹è±¡éƒ½ç»§æ‰¿æœ‰ <code>Object.prototype</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•è€Œä¸çˆ†ç‚¸ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼2\"> a</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> {} </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼2\">a.</span><span class=\"Î¼5\">toString</span><span class=\"Î¼2\">() </span><span class=\"Î¼4\">// ok</span></span></code></pre>\n<p>ä¸Šé¢çš„è¯´æ³•æœ‰ä¸ªé—®é¢˜ï¼Œ<code>Object.create(null)</code> å¯ä»¥ä¸ç»§æ‰¿é‚£äº›æ–¹æ³•ï¼Œä½†æ˜¯ <code>Object.create()</code> çš„ç±»å‹è¿”å› <code>any</code>ï¼Œæ‰€ä»¥ TypeScript å®é™…æ£€æŸ¥ä¸å‡ºä¸‹é¢ä»£ç çš„é”™è¯¯ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼2\"> a</span><span class=\"Î¼1\">:</span><span class=\"Î¼2\"> {} </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> Object.</span><span class=\"Î¼5\">create</span><span class=\"Î¼2\">(</span><span class=\"Î¼3\">null</span><span class=\"Î¼2\">)</span></span>\n<span class=\"line\"><span class=\"Î¼2\">a.</span><span class=\"Î¼5\">toString</span><span class=\"Î¼2\">() </span><span class=\"Î¼4\">// types ok, but runtime error</span></span></code></pre>\n<h3 id=\"object-éåŸºæœ¬ç±»å‹ä»¥å¤–çš„æ‰€æœ‰\"><code>object</code> éåŸºæœ¬ç±»å‹ä»¥å¤–çš„æ‰€æœ‰</h3>\n<p>å¯ä»¥é˜…è¯» <a target=\"_blank\" rel=\"noopener\" href=\"https://devblogs.microsoft.com/typescript/announcing-typescript-2-2/#the-object-type\">TypeScript 2.2 çš„æ›´æ–°è¯´æ˜</a>ï¼Œå°±æ˜¯ <code>{}</code> å»æ‰ <code>number</code> ä¹‹ç±»çš„åŸºæœ¬ç±»å‹ã€‚</p>\n<p>å®é™…ä¸Šï¼Œé™¤äº†æ ‡å‡†åº“é‡Œä¼šæœ‰ä¸€äº›æ¥å£å¿…é¡»ä¼ å…¥éåŸºæœ¬ç±»å‹å¯¹è±¡ï¼ˆå¦‚ <code>map.set(object,value)</code>ï¼‰å¤–ï¼Œæ—¥å¸¸æ“ä½œå‡ ä¹ç”¨ä¸ç€è¿™ä¸ªç©æ„å„¿ã€‚</p>\n<h4 id=\"object-æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿çš„å½¢çŠ¶\"><code>Object</code> æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿çš„å½¢çŠ¶</h4>\n<p><code>Object</code>ï¼ˆå¤§å†™ <code>O</code>ï¼‰æ˜¯å®šä¹‰åœ¨ <code>libes*.d.ts</code> é‡Œçš„ interfaceï¼Œå®ƒæ˜¯æ‰€æœ‰å¯¹è±¡ç±»å‹æœ€ç»ˆç»§æ‰¿çš„å½¢çŠ¶ï¼Œæ‰€ä»¥å®ƒä¸Šé¢çš„æ–¹æ³•å¯ä»¥ä»ä»»æ„å¯¹è±¡ä¸Šç‚¹å‡ºæ¥ä½¿ç”¨ã€‚</p>\n<p>é™¤äº†ç”¨äºæ‰©å±•æ ‡å‡†åº“ä»¥å¤–ï¼Œæ—¥å¸¸æ“ä½œå‡ ä¹ç”¨ä¸ç€è¿™ä¸ªç©æ„å„¿ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼4\">// å¯èƒ½çš„ç”¨é€”</span></span>\n<span class=\"line\"><span class=\"Î¼4\">// æ¨¡å—ä¸Šä¸‹æ–‡éœ€è¦ declare globalï¼Œè„šæœ¬ä¸Šä¸‹æ–‡ä¸éœ€è¦</span></span>\n<span class=\"line\"><span class=\"Î¼1\">declare</span><span class=\"Î¼2\"> global {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  interface</span><span class=\"Î¼5\"> Object</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">    foo</span><span class=\"Î¼2\">()</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> number</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  }</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼3\">Object</span><span class=\"Î¼2\">.</span><span class=\"Î¼3\">prototype</span><span class=\"Î¼2\">.</span><span class=\"Î¼5\">foo</span><span class=\"Î¼1\"> =</span><span class=\"Î¼1\"> function</span><span class=\"Î¼5\"> foo</span><span class=\"Î¼2\">() {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  return</span><span class=\"Î¼3\"> 42</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<h3 id=\"recordstring-any-ä¼ ç»Ÿå­—å…¸æˆ–è€…ä¸å¦‚-\"><code>Record&lt;string, any&gt;</code> ä¼ ç»Ÿå­—å…¸ï¼Œæˆ–è€…ä¸å¦‚ <code>{}</code></h3>\n<p>åœ¨ <code>Map</code>ï¼ˆes6ï¼‰å‘æ˜å‡ºæ¥ä¹‹å‰ï¼ŒJS é‡Œåªèƒ½ä½¿ç”¨å¯¹è±¡æ¥æ¨¡æ‹Ÿä½¿ç”¨å­—å…¸ï¼ˆå®é™…ä¸Š v8 ä¼šæ£€æµ‹è¿™ç§ç”¨æ³•å¹¶åœ¨åº•å±‚åˆ‡åˆ°ä¸€ä¸ªçœŸçš„å­—å…¸å®ç°ï¼‰ã€‚å› æ­¤ <code>Record&lt;K, V&gt;</code> å¯ä»¥ç”¨äºæ ‡è®°è¿™ç§ç”¨æ³•ã€‚</p>\n<p>å¦ä¸€ç§ç”¨æ³•æ˜¯ï¼Œå½“ä½ åœ¨ç©ä¸€äº›ç±»å‹ä½“æ“ï¼Œæ“ä½œç”¨æˆ·ä¼ å…¥æˆ–è€… infer å‡ºæ¥çš„å¯¹è±¡ç±»å‹æ—¶ï¼Œéœ€è¦å…ˆç”¨ <code>extends</code> æ¥é™åˆ¶ä¼ è¿›æ¥çš„ç¡®å®æ˜¯å¯¹è±¡ç±»å‹ï¼Œä½ å¯èƒ½ä¼šåœ¨å“ªé‡Œçœ‹åˆ°è¿™ç§å†™æ³•ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">function</span><span class=\"Î¼5\"> foo</span><span class=\"Î¼2\">&#x3C;</span><span class=\"Î¼5\">T</span><span class=\"Î¼1\"> extends</span><span class=\"Î¼5\"> Record</span><span class=\"Î¼2\">&#x3C;</span><span class=\"Î¼3\">string</span><span class=\"Î¼2\">, </span><span class=\"Î¼3\">any</span><span class=\"Î¼2\">>>(</span><span class=\"Î¼6\">obj</span><span class=\"Î¼1\">:</span><span class=\"Î¼5\"> T</span><span class=\"Î¼2\">, </span><span class=\"Î¼6\">key</span><span class=\"Î¼1\">:</span><span class=\"Î¼1\"> keyof</span><span class=\"Î¼5\"> T</span><span class=\"Î¼2\">) {}</span></span></code></pre>\n<p>ç®€å•è§£é‡Šä¸€ä¸‹ <code>extends</code>ï¼Œè¿™ä¸ªå…³é”®å­—é™åˆ¶ä¼ è¿›æ¥çš„ç±»å‹å¿…é¡»è¢«å³ä¾§çš„ç±»å‹<em>åŒ…å«</em>ï¼Œç„¶åå¯ä»¥å¯¹åŸç±»å‹åšåç»­å¤„ç†ï¼ˆå¦‚ <code>keyof</code> å’Œåˆ«çš„ä½“æ“ï¼‰ã€‚</p>\n<p>æ˜¾ç„¶ï¼Œè¿™ä¸ªä¾‹å­é‡Œæˆ‘ä»¬é™åˆ¶ç¬¬ä¸€ä¸ªå‚æ•°å¤§æ¦‚éœ€è¦æ˜¯ä¸ªå¯¹è±¡ï¼Œç„¶åç¬¬äºŒä¸ªå‚æ•°ä¼šæ¨å¯¼å‡ºç¬¬ä¸€ä¸ªå‚æ•°çš„ä¸‹æ ‡ã€‚é‚£ä¹ˆç”¨ <code>{}</code> å¯ä»¥å—ï¼Ÿå¯ä»¥ï¼</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼5\"> Foo</span><span class=\"Î¼2\">&#x3C;</span><span class=\"Î¼5\">T</span><span class=\"Î¼1\"> extends</span><span class=\"Î¼2\"> {}> </span><span class=\"Î¼1\">=</span><span class=\"Î¼1\"> keyof</span><span class=\"Î¼5\"> T</span></span>\n<span class=\"line\"><span class=\"Î¼4\">// type A = 'a' | 'b'</span></span>\n<span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼5\"> A</span><span class=\"Î¼1\"> =</span><span class=\"Î¼5\"> Foo</span><span class=\"Î¼2\">&#x3C;{ </span><span class=\"Î¼6\">a</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> 1</span><span class=\"Î¼2\">; </span><span class=\"Î¼6\">b</span><span class=\"Î¼1\">:</span><span class=\"Î¼3\"> 2</span><span class=\"Î¼2\"> }></span></span>\n<span class=\"line\"><span class=\"Î¼4\">// type B = 'toString' | 'toFixed' | 'toExponential' | 'toPrecision' | 'valueOf' | 'toLocaleString'</span></span>\n<span class=\"line\"><span class=\"Î¼1\">type</span><span class=\"Î¼5\"> B</span><span class=\"Î¼1\"> =</span><span class=\"Î¼5\"> Foo</span><span class=\"Î¼2\">&#x3C;</span><span class=\"Î¼3\">1</span><span class=\"Î¼2\">></span></span></code></pre>\n<p><q>è¿™ä¸å¯¹</q>ï¼Œä½ å¯èƒ½æƒ³è¿™ä¹ˆè¯´ã€‚è¿™ä¸€çœ¼çœ‹ä¸Šå»ä¸ç¬¦åˆä½ å¯¹ç”¨æˆ·çš„ç”¨æ³•çš„æœŸå¾…ï¼Œä½†æ˜¯ç±»å‹å’Œè¿è¡Œæ—¶ä¸Šéƒ½æ˜¯å…è®¸çš„ã€‚</p>\n<!-- prettier-ignore -->\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">foo</span><span class=\"Î¼2\">(</span><span class=\"Î¼3\">1</span><span class=\"Î¼2\">, </span><span class=\"Î¼7\">'toString'</span><span class=\"Î¼2\">); </span><span class=\"Î¼4\">// ok</span></span>\n<span class=\"line\"><span class=\"Î¼2\">(</span><span class=\"Î¼3\">1</span><span class=\"Î¼2\">)[</span><span class=\"Î¼7\">'toString'</span><span class=\"Î¼2\">] </span><span class=\"Î¼4\">// ok</span></span></code></pre>\n<p>æˆ‘å»ºè®®æ‰€æœ‰äººéƒ½æŠŠ <code>extends Record&lt;string, any&gt;</code> æ¢æˆ <code>extends {}</code>ï¼Œå› ä¸º</p>\n<ul>\n<li>å¯¹ç±»å‹çš„é™åˆ¶æ›´å®½æ¾</li>\n<li>æ›´çŸ­ï¼Œå¥½å†™å¥½è¯»</li>\n<li>ï¼ˆæ€§èƒ½ä¸Šï¼‰æ›´å¿«</li>\n<li>ï¼ˆè¯­ä¹‰ä¸Šï¼‰æ›´æ­£ç¡®</li>\n</ul>\n<h3 id=\"typescript-eslint-å†å²é—ç•™é—®é¢˜\"><code>typescript-eslint</code> å†å²é—ç•™é—®é¢˜</h3>\n<p><a target=\"_blank\" rel=\"noopener\" href=\"https://typescript-eslint.io/rules/ban-types/\">typescript-eslint é»˜è®¤ç¦æ­¢ä½ ä½¿ç”¨ <code>Object</code> å’Œ <code>{}</code></a>ï¼Œå‰è€…æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½† <code>{}</code> å®é™…ä¸Šæ˜¯å¾ˆæœ‰ç”¨çš„ç±»å‹ã€‚è¿™çº¯ç²¹æ˜¯å› ä¸º TypeScript ä»¥å‰çš„ <code>{}</code> æ²¡é‚£ä¹ˆå¥½ç”¨ã€‚</p>\n<p>ä½ å¯ä»¥æ·»åŠ ä»¥ä¸‹è§„åˆ™æ¥è¦†ç›–å®ƒå¯¹ <code>{}</code> çš„é™åˆ¶ï¼š</p>\n<!-- prettier-ignore -->\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">{</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  \"@typescript-eslint/ban-types\"</span><span class=\"Î¼2\">: [</span><span class=\"Î¼7\">\"error\"</span><span class=\"Î¼2\">, {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    \"types\"</span><span class=\"Î¼2\">: { </span><span class=\"Î¼3\">\"{}\"</span><span class=\"Î¼2\">: </span><span class=\"Î¼3\">false</span><span class=\"Î¼2\"> },</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    \"extendDefaults\"</span><span class=\"Î¼2\">: </span><span class=\"Î¼3\">true</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  }]</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>",
            "url": "https://hyrious.me/p/ts-object",
            "title": "TypeScript <code>object</code> vs <code>record</code> vs <code>{}</code>",
            "date_modified": "2023-02-21T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#D73A49}.Î¼2{color:#24292E}.Î¼3{color:#032F62}.Î¼4{color:#005CC5}.Î¼5{color:#6A737D}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#F97583}.Î¼2{color:#E1E4E8}.Î¼3{color:#9ECBFF}.Î¼4{color:#79B8FF}.Î¼5{color:#6A737D}}</style><blockquote>\n<p>åŸæ–‡ï¼š<a target=\"_blank\" rel=\"noopener\" href=\"https://madebyevan.com/algos/crdt-fractional-indexing\">&laquo;CRDT: Fractional Indexing&raquo;</a>\nåŸç½‘ç«™é‡Œè¿˜æœ‰ç²¾ç¾çš„å¯è§†åŒ–æ•ˆæœã€‚</p>\n</blockquote>\n<p>CRDT æ˜¯ä¸€ç³»åˆ—è§£å†³åä½œé—®é¢˜çš„ç®—æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªä¸å¯é¿å…çš„é—®é¢˜å°±æ˜¯ï¼šå¦‚ä½•è®°å½•é¡ºåºï¼Œå¦‚ä½•åœ¨å‘ç”Ÿé¡ºåºä¿®æ”¹æ—¶è¡¨ç°æ­£ç¡®ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ä¸€ç»„æ•°æ®çš„è¯ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">var</span><span class=\"Î¼2\"> todos </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> [</span><span class=\"Î¼3\">'hello'</span><span class=\"Î¼2\">, </span><span class=\"Î¼3\">'world'</span><span class=\"Î¼2\">]</span></span></code></pre>\n<p>åœ¨åŒæ­¥è¿™ä¸ªæ•°æ®æ—¶ï¼Œä¸å¯é¿å…åœ°è¦å°†è¿™ä¸ªæ•°ç»„å‘æ¥å‘å»ï¼Œå½“æ•°æ®é‡å¾ˆå¤§æ—¶æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªä¼˜è§£ã€‚æ­¤æ—¶å…ˆåˆ«æ€¥ç€å®ç° CRDT é“¾è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥è®©æ¯ä¸ªå…ƒç´ å¤šè®°å½•ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ç”¨æ¥æ’åºï¼Œå¹¶ä¸”ç”¨è¿™ç§æ–¹å¼çš„ç½‘ç»œä¼ è¾“å‹åŠ›å¾ˆå°ï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹ã€‚</p>\n<p>é¦–å…ˆï¼Œåˆ©ç”¨ä¼ ç»Ÿçš„ LWW (last-write-win) ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å®ç° CRDT Mapï¼Œä½†è¿™é‡Œé¢çš„å…ƒç´ ä¸æ˜¯æœ‰åºçš„ã€‚æ¥ç€ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ ä¸€ä¸ªå­—æ®µè¡¨ç¤ºå®ƒåœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">var</span><span class=\"Î¼2\"> todos </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@1'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'hello'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼3\">'?'</span><span class=\"Î¼2\"> },</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@2'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'world'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼3\">'?'</span><span class=\"Î¼2\"> },</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<p>å…¶ä¸­å·¦è¾¹çš„ <code>1@1</code> åªæ˜¯ç”¨æ¥æ ‡è®°å…ƒç´ å”¯ä¸€çš„ï¼Œå®ƒå¯ä»¥é€šè¿‡ <code>client(æœ¬åœ°éšæœºid) + clock(è‡ªå¢æ•´æ•°)</code> çš„æ–¹å¼ç”Ÿæˆã€‚å³è¾¹çš„ <code>position</code> æ˜¯æœ¬æ–‡å³å°†è¯´æ˜çš„æŠ€å·§ï¼Œæœ‰äº†å®ƒå°±å¯ä»¥è½»æ¾å®ç°æ’åºã€æœ‰åºå…ƒç´ é—´äº¤æ¢ç­‰è¡Œä¸ºã€‚</p>\n<h3 id=\"position-çš„å®šä¹‰\"><code>position</code> çš„å®šä¹‰</h3>\n<p>æˆ‘ä»¬å®šä¹‰ <code>position</code> æ˜¯ä¸€ä¸ªä» 0 åˆ° 1 çš„æ•°ï¼Œå½“å‡ºç°æ–°çš„å…ƒç´ è¦æ’åˆ°æŸä¸ªæœ‰åºåˆ—ä¸­æ—¶ï¼Œå–å…¶å‰åå…ƒç´ çš„ <code>position</code>ï¼ŒæŠ˜åŠå³å¯å¾—åˆ°æ–°å…ƒç´ çš„ <code>position</code>ã€‚å½“æ²¡æœ‰å‰å…ƒç´ æ—¶ï¼Œè®¤ä¸ºå®ƒæ˜¯ 0ï¼Œå½“æ²¡æœ‰åå…ƒç´ æ—¶ï¼Œè®¤ä¸ºå®ƒæ˜¯ 1ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">var</span><span class=\"Î¼2\"> todos </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@1'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'hello'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼4\">0.5</span><span class=\"Î¼2\"> }, </span><span class=\"Î¼5\">// ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ’å…¥ 0 ~ 1 çš„ä¸­é—´ï¼Œå– 0.5</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@2'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'world'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼4\">0.75</span><span class=\"Î¼2\"> }, </span><span class=\"Î¼5\">// ç¬¬äºŒä¸ªå…ƒç´ ï¼Œæ’å…¥ 0.5 ~ 1 çš„ä¸­é—´ï¼Œå– 0.75</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<p>ç›´æ¥äºŒåˆ†å–æ•°çš„è¯ï¼Œå¾ˆå¿«æˆ‘ä»¬å°±ä¼šç¢°åˆ°æµ®ç‚¹æ•°çš„ç“¶é¢ˆï¼šæŠ˜åŠå¤±æ•ˆäº†ï¼æ­¤æ—¶å¯ä»¥æŠŠå®ƒè½¬æˆå­—ç¬¦ä¸²ï¼Œåˆ©ç”¨å¤§æ•´æ•°çš„å®ç°æ€è·¯ï¼Œå®ç°ä¸€ä¸ªæ— é™ç²¾åº¦çš„å°æ•°ï¼ˆæˆ–è€…ç§°ä¹‹ä¸ºä»¥ 10 çš„æŒ‡æ•°ä¸ºåˆ†æ¯çš„åˆ†æ•°ï¼‰ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">var</span><span class=\"Î¼2\"> todos </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@1'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'hello'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼3\">'0.5'</span><span class=\"Î¼2\"> }, </span><span class=\"Î¼5\">// 5/10</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@2'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'world'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼3\">'0.75'</span><span class=\"Î¼2\"> }, </span><span class=\"Î¼5\">// 75/100</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<h3 id=\"å†²çªå¤„ç†\">å†²çªå¤„ç†</h3>\n<p>ä¸Šé¢è¿™ä¸ªæŠ€å·§åœ¨å¤šäººåä½œæ—¶ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä¸¤ä¸ªäººåŒæ—¶åœ¨ä¸€ä¸ªä½ç½®æ’å…¥äº†æ–°èŠ‚ç‚¹ï¼Œå²‚ä¸æ˜¯ä¼šäº§ç”Ÿä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„ <code>position</code>ï¼Ÿ</p>\n<p>é¦–å…ˆæˆ‘ä»¬è‚¯å®šä¸èƒ½è®©æ’åºçš„ç»“æœä¸å¯¹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®¢æˆ·ç«¯æœ¬åœ°ç”Ÿæˆçš„éšæœº id (ä¹Ÿå°±æ˜¯ä¸Šé¢ <code>todos</code> çš„ keys) å¯¹è¿™äº›èŠ‚ç‚¹çš„æ’åºç®—æ³•åšå…œåº•ã€‚</p>\n<p>å…¶æ¬¡æœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•å¯ä»¥é¿å…è¿™ç§ç¡®å®šæ€§å†²çªâ€”â€”å¼•å…¥ä¸ç¡®å®šçš„éšæœºæ•°å³å¯ï¼Œæ¯æ¬¡ä¸å…‰æ˜¯æŠ˜åŠäº§ç”Ÿä¸‹æ ‡ï¼Œå¹¶ä¸”æˆ‘ä»¬æ•…æ„å¾€åå¤šæ·»åŠ å‡ ä½éšæœºæ•°ã€‚åœ¨åè¿›åˆ¶ä¸‹ï¼Œä»…ä»…æ˜¯å¤šæ·»åŠ ä¸‰ä¸ªå­—èŠ‚å°±å¯ä»¥è¾¾åˆ° 1000 ç§ä¸åŒçš„åç¼€ï¼Œè€Œè¿™ä¹ˆå¤šäººåŒæ—¶æ“ä½œåŒä¸€ä¸ªæœ‰åºåˆ—è¡¨çš„æ¦‚ç‡ä¸å¤§ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">var</span><span class=\"Î¼2\"> todos </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@1'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'hello'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼3\">'0.5123'</span><span class=\"Î¼2\"> }, </span><span class=\"Î¼5\">// ~5/10</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  '1@2'</span><span class=\"Î¼2\">: { text: </span><span class=\"Î¼3\">'world'</span><span class=\"Î¼2\">, position: </span><span class=\"Î¼3\">'0.75478'</span><span class=\"Î¼2\"> }, </span><span class=\"Î¼5\">// ~75/100</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<p>å½“ç„¶ï¼Œå¦‚æœæ”¾å®½ CRDT çš„é™åˆ¶ï¼Œå¼•å…¥ä¸­å¿ƒæœåŠ¡å™¨è£å†³çš„è¯ï¼Œä¹Ÿå¯ä»¥è®©æœåŠ¡å™¨å¸®å†²çªçš„èŠ‚ç‚¹æŒ‘é€‰ä¸€ä¸ªæ–°ä½ç½®ã€‚</p>",
            "url": "https://hyrious.me/p/crdt-fractional-indexing",
            "title": "CRDT: åˆ†æ•°æ’åº",
            "date_modified": "2023-01-19T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#D73A49}.Î¼2{color:#24292E}.Î¼3{color:#005CC5}.Î¼4{color:#6F42C1}.Î¼5{color:#6A737D}.Î¼6{color:#E36209}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#F97583}.Î¼2{color:#E1E4E8}.Î¼3{color:#79B8FF}.Î¼4{color:#B392F0}.Î¼5{color:#6A737D}.Î¼6{color:#FFAB70}}</style><p>JS é‡Œå­˜åœ¨ä¸¤ç±»<q>å—</q>ï¼Œä¸€ç§æ˜¯ block <code>{}</code>ï¼Œå¦ä¸€ç§æ˜¯ function body <code>(){}</code>ï¼ˆåŒ…æ‹¬ methodï¼‰ï¼Œè¿™ä¸¤ç§å—å¯¹ä¸åŒçš„å˜é‡å£°æ˜ä¼šæœ‰ä¸åŒçš„ä½œç”¨åŸŸæ•ˆæœï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹ã€‚</p>\n<h4 id=\"var\"><code>var</code></h4>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">if</span><span class=\"Î¼2\"> (</span><span class=\"Î¼3\">false</span><span class=\"Î¼2\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  var</span><span class=\"Î¼2\"> a </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(a) </span><span class=\"Î¼5\">// undefined</span></span></code></pre>\n<p><code>var</code> æ˜¯ä¸€ç§å†å²æ‚ ä¹…çš„å˜é‡ï¼Œä»–ä¸è®¤è¯† block <code>{}</code>ï¼Œä¼šç›´æ¥æå‡åˆ°ç¬¬ä¸€ä¸ª function body åŒºï¼Œå³ä½¿æ˜¯ Dead-code ä¹Ÿä¸ä¾‹å¤–ã€‚</p>\n<h4 id=\"let-const\"><code>let</code>, <code>const</code></h4>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼2\"> a </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼1\">if</span><span class=\"Î¼2\"> (</span><span class=\"Î¼3\">true</span><span class=\"Î¼2\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  const</span><span class=\"Î¼3\"> a</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> 2</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(a) </span><span class=\"Î¼5\">// 1</span></span></code></pre>\n<p><code>let</code> å’Œ <code>const</code> ä¸¥æ ¼å­˜åœ¨äºå½“å‰ block å†…ï¼Œä¸ä¼šå‘ç”Ÿä»»ä½•å˜é‡æå‡ã€‚</p>\n<h4 id=\"function\"><code>function</code></h4>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">if</span><span class=\"Î¼2\"> (</span><span class=\"Î¼3\">false</span><span class=\"Î¼2\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  function</span><span class=\"Î¼4\"> foo</span><span class=\"Î¼2\">() {}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(foo) </span><span class=\"Î¼5\">// undefined</span></span></code></pre>\n<p><code>function</code> ä¹Ÿæ˜¯ä¸€ç§å®šä¹‰å˜é‡çš„æ–¹å¼ï¼Œä»–å’Œ <code>var</code> ä¸€æ ·æ‚ ä¹…ï¼Œæå‡è§„åˆ™å’Œ <code>var</code> å‡ ä¹ä¸€æ ·ï¼Œä½†æœ‰ä¸¤ç‚¹ä¸åŒï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">const</span><span class=\"Î¼3\"> a</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼1\">if</span><span class=\"Î¼2\"> (</span><span class=\"Î¼3\">false</span><span class=\"Î¼2\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  var</span><span class=\"Î¼2\"> a </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> 2</span><span class=\"Î¼5\"> // SyntaxError: Identifier 'a' has already been declared</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">const</span><span class=\"Î¼3\"> foo</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼1\">if</span><span class=\"Î¼2\"> (</span><span class=\"Î¼3\">true</span><span class=\"Î¼2\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  function</span><span class=\"Î¼4\"> foo</span><span class=\"Î¼2\">() {}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(foo) </span><span class=\"Î¼5\">// 1</span></span></code></pre>\n<ol>\n<li><code>var</code> ä¼šä¸æ‹©æ‰‹æ®µåœ°æå‡ï¼Œç¢°åˆ° <code>const</code>, <code>let</code> ä¹‹ç±»ç¡¬èŒ¬å°±ä¼šçˆ†ç‚¸ï¼›è€Œ <code>function</code> åˆ™æ¸©å’Œå¾ˆå¤šã€‚</li>\n</ol>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(a, </span><span class=\"Î¼4\">foo</span><span class=\"Î¼2\">()) </span><span class=\"Î¼5\">// undefined, 2</span></span>\n<span class=\"line\"><span class=\"Î¼1\">var</span><span class=\"Î¼2\"> a </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼1\">function</span><span class=\"Î¼4\"> foo</span><span class=\"Î¼2\">() {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  return</span><span class=\"Î¼3\"> 2</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<ol start=\"2\">\n<li>å’Œ <code>var</code> åªé€ä¸€ä¸ª <code>undefined</code> ä¸åŒï¼Œ<code>function</code> ä¼šè¿ç€å®šä¹‰ä¸€èµ·é€å‡ºå»ï¼Œæˆ‘ä»¬å¯ä»¥ <em>çœ‹èµ·æ¥</em> åœ¨å®šä¹‰ä¹‹å‰å°±ä½¿ç”¨ä»–ã€‚å®é™…ä¸Šï¼Œå¯ä»¥è®¤ä¸º <code>function</code> è¿ç€å†…å®¹ä¸€èµ·è¢«æå‡åˆ°äº†å½“å‰å‡½æ•°å—çš„é¡¶éƒ¨æ‰§è¡Œã€‚</li>\n</ol>\n<p>å¦å¤–ï¼Œå½“æ•´ä¸ª <code>function</code> ä½œä¸ºè¡¨è¾¾å¼è€Œä¸æ˜¯è¯­å¥å­˜åœ¨æ—¶ï¼Œå…¶åç§°åªä¼šè¢«é™å®šåœ¨å‡½æ•°ä½“å†…å¯ä»¥è®¿é—®ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">$button.</span><span class=\"Î¼4\">onclick</span><span class=\"Î¼1\"> =</span><span class=\"Î¼1\"> function</span><span class=\"Î¼4\"> hello</span><span class=\"Î¼2\">() {</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(hello.name) </span><span class=\"Î¼5\">// 'hello'</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(hello) </span><span class=\"Î¼5\">// ReferenceError: hello is not defined</span></span></code></pre>\n<h4 id=\"class\"><code>class</code></h4>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">const</span><span class=\"Î¼3\"> A</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼1\">if</span><span class=\"Î¼2\"> (</span><span class=\"Î¼3\">true</span><span class=\"Î¼2\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  class</span><span class=\"Î¼4\"> A</span><span class=\"Î¼2\"> {}</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  A</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> 2</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span>\n<span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(</span><span class=\"Î¼3\">A</span><span class=\"Î¼2\">) </span><span class=\"Î¼5\">// 1</span></span></code></pre>\n<p><code>class</code> åˆ›é€ çš„å˜é‡çº¦ç­‰äº <code>let</code>ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ <code>class</code> çš„é™æ€è¡¨è¾¾å¼ä¸­æ˜¯å¯ä»¥ç›´æ¥è®¿é—®åˆ°å…¶ç±»åçš„ï¼Œè€Œ <code>let</code> éœ€è¦å…ˆæ‰§è¡Œå®Œ <code>class</code>ï¼Œåè€Œä¸èƒ½è¿™ä¹ˆä½¿ç”¨ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼4\"> A</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  static</span><span class=\"Î¼6\"> a</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> A</span><span class=\"Î¼2\">.name </span><span class=\"Î¼5\">// 'A'</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  static</span><span class=\"Î¼6\"> b</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> this</span><span class=\"Î¼2\">.name </span><span class=\"Î¼5\">// can also use `this`</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">let</span><span class=\"Î¼3\"> A</span><span class=\"Î¼1\"> =</span><span class=\"Î¼1\"> class</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  static</span><span class=\"Î¼6\"> a</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> A</span><span class=\"Î¼2\">.name </span><span class=\"Î¼5\">// ReferenceError: A is not defined</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  static</span><span class=\"Î¼6\"> b</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> this</span><span class=\"Î¼2\">.name </span><span class=\"Î¼5\">// 'A'</span></span>\n<span class=\"line\"><span class=\"Î¼2\">}</span></span></code></pre>\n<p>æ³¨æ„åˆ°æœ€åä¸€ä¸ªä¾‹å­ï¼Œ<code>A.b</code> å¯ä»¥æ‹¿åˆ° <code>&#39;A&#39;</code>ï¼Œè¿™æ˜¯å› ä¸ºåŒ¿åç±»ä¼šè¢«è‡ªåŠ¨èµ‹äºˆå·¦è¾¹çš„å˜é‡åã€‚å½“å·¦è¾¹ä¸æ˜¯ä¸€ä¸ªå˜é‡çš„æ—¶å€™è¯¥ç±»çš„åå­—å°±æ˜¯ç©ºäº†ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">console.</span><span class=\"Î¼4\">log</span><span class=\"Î¼2\">(</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  class</span><span class=\"Î¼2\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    static</span><span class=\"Î¼6\"> b</span><span class=\"Î¼1\"> =</span><span class=\"Î¼3\"> this</span><span class=\"Î¼2\">.name</span></span>\n<span class=\"line\"><span class=\"Î¼2\">  }.b,</span></span>\n<span class=\"line\"><span class=\"Î¼2\">) </span><span class=\"Î¼5\">// ''</span></span></code></pre>",
            "url": "https://hyrious.me/p/js-scope",
            "title": "JS ä½œç”¨åŸŸç¢ç¢å¿µ",
            "date_modified": "2023-01-17T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<p><time>2022-12-14</time> æ›´æ–°</p>\n<p>æœ€è¿‘ npm å®˜ç½‘ä¸Šçº¿äº†ä¸€ä¸ªæŸ¥çœ‹åŒ…å†…å®¹çš„ tab <a target=\"_blank\" rel=\"noopener\" href=\"https://www.npmjs.com/package/npm?activeTab=explore\">https://www.npmjs.com/package/npm?activeTab=explore</a>, <a target=\"_blank\" rel=\"noopener\" href=\"https://github.blog/changelog/2022-12-06-explore-the-content-of-your-npm-packages-with-the-new-code-explorer/\">https://github.blog/changelog/2022-12-06-explore-the-content-of-your-npm-packages-with-the-new-code-explorer/</a></p>\n<hr>\n<p><time>2022-08-24</time> æ›´æ–°</p>\n<p>æˆ‘ä»¥å‰ç»å¸¸ä½¿ç”¨ <a target=\"_blank\" rel=\"noopener\" href=\"https://cdn.jsdelivr.net/npm/lib0/\">jsdelivr</a> å’Œ <a target=\"_blank\" rel=\"noopener\" href=\"https://unpkg.com/lib0/\">unpkg</a> æ¥æŸ¥çœ‹ä¸€äº› NPM åŒ…çš„æºç ï¼Œè¿™ä¹ˆåšæœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>\n<ol>\n<li>å‡å¦‚è¿™ä¸ªåŒ…æ²¡æœ‰å¼€æº<sup><a href=\"#user-content-fn-1\" data-footnote-ref=\"\" id=\"user-content-fnref-1\">1</a></sup>ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è¯»åˆ°ä¸€äº›æœ‰ç”¨çš„å†…å®¹ï¼›</li>\n<li>è™½ç„¶å¼€æºäº†ï¼Œä½†æ˜¯æœ‰å¯èƒ½æ‰“åŒ…å·¥å…·é…ç½®æœ‰é—®é¢˜ï¼Œå¯ä»¥å€ŸåŠ©è¿™äº›ç½‘ç«™å¿«é€ŸæŸ¥çœ‹åŒ…ç»“æ„ï¼›</li>\n<li>æ˜¯åœ¨çº¿çš„ï¼Œä¸ç”¨æ±¡æŸ“æœ¬åœ°ç¯å¢ƒã€‚</li>\n</ol>\n<p>è™½ç„¶è¿™ä¸¤ä¸ª CDN éƒ½å¾ˆå¿«ï¼Œä½†æ˜¯æƒ³è¦åˆ‡æ¢æ–‡ä»¶è¿˜æ˜¯æ¯”è¾ƒæ…¢ã€‚å› æ­¤æˆ‘å†™äº†ä¸ª <a target=\"_blank\" rel=\"noopener\" href=\"https://hyrious.me/npm-browser\">NPM Browser</a> æ¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œå®ƒçš„å‰èº«æ˜¯ <a target=\"_blank\" rel=\"noopener\" href=\"https://hyrious.me/tool/npm.html\">tool/npm</a>ã€‚</p>\n<h3 id=\"ç”¨æ³•\">ç”¨æ³•</h3>\n<p>ç›´æ¥æ‰“å¼€è¾“å…¥åŒ…åå³å¯ä» npm registry ä¸Šä¸‹è½½ tgz å¹¶è§£å‹å‡ºæ¥æŸ¥çœ‹ã€‚ç›®å‰æˆ‘è¿˜æ²¡æœ‰å‘ç°ç¬¬äºŒä¸ª npm registry é•œåƒèƒ½å¤Ÿç»™å‰ç«¯å¼€ CORS çš„ã€‚å¹¶ä¸”æˆ‘è¿˜ç”¨äº† indexeddb ç¼“å­˜æ¯ä¸ªåŒ…çš„å†…å®¹ï¼Œæµè§ˆçœ‹è¿‡çš„åŒ…ä¼šå¾ˆå¿«ã€‚</p>\n<p>æœç´¢åŒ…ä¹Ÿæ˜¯ç”¨çš„ npm registry çš„ APIï¼Œæœ‰æ—¶å¯èƒ½ä¼šè¶…å‡º rate limit å¯¼è‡´æ— æ³•å“åº”ã€‚</p>\n<p>åœ°å€æ ä¼šå®æ—¶æ˜¾ç¤ºæ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œå¯ä»¥ç®€å•åœ°åˆ†äº«ç»™åˆ«äºº<del>å¯¹çº¿</del>ï¼Œæ ¼å¼ä¸º:</p>\n<pre><code>ç½‘å€?q=åŒ…å@ç‰ˆæœ¬/package/è·¯å¾„:è¡Œæ•°\n</code></pre><p>ä¸‹é¢æ¼”ç¤ºå‡ ä¸ªç”¨æ³•ï¼š</p>\n<ul>\n<li>æŸ¥çœ‹æœ€æ–°ç‰ˆ lodash åŒ…çš„å†…å®¹: <a target=\"_blank\" rel=\"noopener\" href=\"https://hyrious.me/npm-browser/?q=lodash\">https://hyrious.me/npm-browser/?q=lodash</a></li>\n<li>æŒ‡å®šåˆ°å…·ä½“ç‰ˆæœ¬çš„å…·ä½“æ–‡ä»¶çš„å…·ä½“è¡Œ: <a target=\"_blank\" rel=\"noopener\" href=\"https://hyrious.me/npm-browser/?q=@github/textarea-autosize@0.3.0/package/dist/index.js:72\">https://hyrious.me/npm-browser/?q=@github/textarea-autosize@0.3.0/package/dist/index.js:72</a></li>\n</ul>\n<p>å¦ä¸€ä¸ªæˆ‘è§‰å¾—å¾ˆæœ‰ç”¨çš„åŠŸèƒ½æ˜¯æ–‡ä»¶ diffï¼Œåœ¨æ ‡é¢˜æ åŒ…åå³è¾¹ç¬¬äºŒä¸ªæŒ‰é’®å°±æ˜¯ã€‚æœ‰çš„æ—¶å€™ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…å‡çº§ï¼Œä½†æ˜¯ changelog ä¸ä¼šäº‹æ— å·¨ç»†åœ°åˆ—å‡ºæ‰€æœ‰ä»£ç çš„ä¿®æ”¹ï¼Œæ­¤æ—¶å¯ä»¥åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½æŸ¥çœ‹åˆ°åº•æ”¹äº†å•¥ï¼Œä¾‹å¦‚å‰å‡ å¤© markedjs æ›´æ–°äº†ä¸€ä¸ªå°ç‰ˆæœ¬ï¼š</p>\n<ul>\n<li><a target=\"_blank\" rel=\"noopener\" href=\"https://hyrious.me/tool/diff-npm.html?a=marked%404.0.18%2Flib%2Fmarked.esm.js&b=marked%404.0.19%2Flib%2Fmarked.esm.js&s=1&f=l\">/package/lib/marked.esm.js: marked@4.0.18 &rarr; marked@4.0.19</a></li>\n</ul>\n<p>ä»¥ä¸Šã€‚</p>\n<section class=\"footnotes\"><ol dir=\"auto\"><li id=\"user-content-fn-1\"><p dir=\"auto\">ä¾‹å¦‚ <a target=\"_blank\" rel=\"noopener\" href=\"https://motion.dev\">motion</a> <a href=\"#user-content-fnref-1\" class=\"data-footnote-backref\" aria-label=\"Back to content\"><g-emoji class=\"g-emoji\" alias=\"leftwards_arrow_with_hook\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/21a9.png\">â†©</g-emoji></a></p></li></ol></section>",
            "url": "https://hyrious.me/p/npm-browser",
            "title": "NPM Browser: åœ¨çº¿æµè§ˆ NPM åŒ…å†…å®¹",
            "date_modified": "2022-12-14T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#D73A49}.Î¼2{color:#24292E}.Î¼3{color:#6F42C1}.Î¼4{color:#005CC5}.Î¼5{color:#6A737D}.Î¼6{color:#032F62}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#F97583}.Î¼2{color:#E1E4E8}.Î¼3{color:#B392F0}.Î¼4{color:#79B8FF}.Î¼5{color:#6A737D}.Î¼6{color:#9ECBFF}}</style><p>æ³¨ï¼šå¹¶éæŒ‡çº¿ä¸Šè½¯ä»¶ä¸é‡å¯æ›´æ–°ï¼Œè€Œæ˜¯æŒ‡å¼€å‘é˜¶æ®µèƒ½å¤Ÿè·å¾—æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚</p>\n<hr>\n<p>å‡ å¹´å‰æˆ‘ç© RPG Maker çš„æ—¶å€™ä¹Ÿæƒ³è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡ä¿®æ”¹è¿‡è„šæœ¬åéƒ½è¦é‡æ–°å¯åŠ¨æ¸¸æˆæ‰èƒ½æµ‹è¯•æ•ˆæœï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ä¸é‡å¯å‘¢ï¼Ÿ</p>\n<p>ç®€å•åœ°æƒ³ï¼Œå¦‚æœç›´æ¥é‡æ–°æ‰§è¡Œè¢«ä¿®æ”¹çš„é‚£ä¸€é¡µè„šæœ¬ï¼Œé‚£ä¹ˆåªéœ€è¦ä»–èƒ½ä¿è¯æ‰§è¡Œåæ˜¯æƒ³è¦çš„æ•ˆæœå°±è¡Œäº†ã€‚ç”±äºå¤§éƒ¨åˆ†è„šæœ¬æ’ä»¶éƒ½æ˜¯<q>æ’ä»¶</q>å¼çš„ï¼Œä»–ä»¬é€šå¸¸æ˜¯ä½¿ç”¨ <code>alias</code> ä¿®æ”¹ä¸€äº›ä¸ªé»˜è®¤ç³»ç»Ÿé‡Œçš„æ–¹æ³•ä»¥åŠå®šä¹‰ä¸€äº›æ–°æ¨¡å—ï¼Œç”±äº Ruby æœ‰<q>æ‰“å¼€ç±»</q>çš„å…ƒç¼–ç¨‹ç‰¹æ€§ï¼Œæ‰€ä»¥é‡æ–°æ‰§è¡Œä¸€æ®µç±»/æ¨¡å—å®šä¹‰å¹¶ä¸ä¼šå‡ºé”™ï¼Œé‚£ä¹ˆåªéœ€è¦èƒ½è®©ä¸€æ®µåŸºäº <code>alias</code> å†™çš„æ’ä»¶æ‰§è¡Œä¸¤éç­‰äºåªæ‰§è¡Œç¬¬äºŒéå°±è¡Œäº†ï¼</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">alias</span><span class=\"Î¼2\"> old_meth meth</span></span>\n<span class=\"line\"><span class=\"Î¼1\">def</span><span class=\"Î¼3\"> meth</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  return</span><span class=\"Î¼2\"> old_meth </span><span class=\"Î¼1\">+</span><span class=\"Î¼4\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼1\">end</span></span></code></pre>\n<p>å‡è®¾æœ‰è¿™æ ·çš„æ’ä»¶ä»£ç ã€‚ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬éœ€è¦è®© <code>old_meth</code> ç¬¬äºŒæ¬¡æ‰§è¡Œçš„æ—¶å€™ä»ç„¶æ˜¯<q>åŸæ–¹æ³•</q>ã€‚æ€ä¹ˆåšå‘¢ï¼Ÿå¯ä»¥æ¢æˆä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>alias</code>ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">magic_alias </span><span class=\"Î¼4\">:old_meth</span><span class=\"Î¼2\">, </span><span class=\"Î¼4\">:meth</span></span>\n<span class=\"line\"><span class=\"Î¼2\">...</span></span></code></pre>\n<p>å¦‚æœä¸Šä¸‹æ–‡é‡Œå·²ç»æœ‰ <code>old_meth</code>ï¼Œè¯´æ˜å·²ç»æ‰§è¡Œè¿‡ä¸€æ¬¡ï¼Œä»€ä¹ˆéƒ½ä¸åšå°±è¡Œï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼1\"> &#x3C;&#x3C;</span><span class=\"Î¼2\"> self</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  def</span><span class=\"Î¼3\"> magic_alias</span><span class=\"Î¼2\">(name, value)</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    return</span><span class=\"Î¼1\"> if</span><span class=\"Î¼2\"> method_defined? name</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    alias_method</span><span class=\"Î¼2\"> name, value </span><span class=\"Î¼5\"># å¦åˆ™æ­£å¸¸ä½¿ç”¨åŸ alias æ•ˆæœ</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">end</span></span></code></pre>\n<p>æ‰€ä»¥ï¼Œæˆ‘å½“æ—¶çš„æ–¹æ¡ˆå°±æ˜¯ï¼šåœ¨æ¯é¡µæ–‡ä»¶å¼€å¤´åŠ è¿™ä¹ˆä¸€ä¸ªç¥ç§˜å‡½æ•°ï¼Œç”¨å®ƒä»£æ›¿ aliasï¼Œç„¶åé‡æ–°æ‰§è¡Œè¿™é¡µä»£ç ï¼Œå°±å¯ä»¥é€‚é…å¤§éƒ¨åˆ†æ’ä»¶è„šæœ¬çš„çƒ­æ›´æ–°äº†ã€‚</p>\n<hr>\n<p>Sublime Text é‡Œä¹Ÿæœ‰ä¸€ä¸ªé’ˆå¯¹æ’ä»¶çš„çƒ­æ›´æ–°æœºåˆ¶ï¼Œä¹Ÿæ˜¯ç›´æ¥é‡æ–°æ‰§è¡Œä¸€ä¸‹æ’ä»¶ python æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œå®ƒå¯ä»¥åœ¨é¡¶å±‚å®šä¹‰ <code>plugin_loaded</code> å’Œ <code>plugin_unloaded</code> æ–¹æ³•ï¼Œåœ¨æ’ä»¶é‡è½½çš„æ—¶å€™å¯ä»¥åˆ©ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ç¡®ä¿æ‰§è¡Œæ•ˆæœæ­£ç¡®ã€‚</p>\n<p>æ¯”èµ·æˆ‘çš„<q>ç¥ç§˜ä»£ç </q> + é‡æ–°æ‰§è¡Œï¼ŒST çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åŸæ’ä»¶éé˜»å¡è°ƒç”¨ <code>plugin_unloaded</code></li>\n<li>æ‰§è¡Œæ–°æ’ä»¶</li>\n<li>æ‰§è¡Œæ–°æ’ä»¶çš„ <code>plugin_loaded</code></li>\n</ol>\n<p>è¿™æ ·ä¸€æ¥ï¼Œç­‰äºå°†çƒ­æ›´æ–°é€»è¾‘äº¤ç»™å†™æ’ä»¶çš„äººå®ç°ã€‚</p>\n<hr>\n<p>å‰ç«¯å¼€å‘ä¹Ÿæœ‰ä¸€å¥—çƒ­æ›´æ–°æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ <a target=\"_blank\" rel=\"noopener\" href=\"https://webpack.js.org/concepts/hot-module-replacement/\">webpack</a>ã€<a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/rixo/rollup-plugin-hot\">rollup</a>ã€<a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/PepsRyuu/nollup/blob/master/docs/nollup-hooks.md\">nollup</a>ã€<a target=\"_blank\" rel=\"noopener\" href=\"https://vitejs.dev/guide/features.html#hot-module-replacement\">vite</a> é‡Œçœ‹åˆ°ä¸€å¥— HMR æ¥å£ï¼Œå…¶åŸºæœ¬æ€è·¯å’Œä¸Šé¢æåˆ°çš„å…¶å®ä¹Ÿæ˜¯ä¸€å›äº‹ï¼Œæ¯ä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰å¯ä»¥æ³¨å†Œé€€å‡º <code>hot.dispose()</code> å’Œè¿›å…¥ <code>hot.accept()</code> æ—¶å¹²çš„äº‹æƒ…ï¼Œä»è€Œè¾¾åˆ°çƒ­æ›´æ–°æ•ˆæœã€‚</p>\n<p>ä»¥ Vite ä¸ºä¾‹ï¼Œä»–çš„çƒ­æ›´æ–°æµç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åç«¯æ‰«æä»£ç æ–‡ä»¶ï¼Œç†æ¸…ä¾èµ–å…³ç³»ï¼ŒæŠŠä»£ç é‡ŒåŒ…å« <code>hot.accept()</code> çš„æ–‡ä»¶è§†ä¸º<q>çƒ­æ›´æ–°æ¨¡å—è¾¹ç•Œ</q></li>\n<li>æœ‰æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡ 1 çš„ä¾èµ–å…³ç³»æŸ¥æ‰¾åˆ°å˜åŒ–æ–‡ä»¶çš„å…¬å…±çƒ­æ›´æ–°è¾¹ç•Œï¼Œé€šçŸ¥å‰ç«¯åˆ·æ–°è¿™ä¸ªæ–‡ä»¶</li>\n<li>å‰ç«¯ä¾æ¬¡æ‰§è¡Œï¼š<ol>\n<li>è°ƒç”¨æ‰€æœ‰ç›¸å…³æ–‡ä»¶çš„ <code>hot.dispose()</code> å›è°ƒ</li>\n<li>ä¸‹è½½æ‰§è¡Œ 2 æ‰¾åˆ°çš„è¾¹ç•Œæ–‡ä»¶</li>\n<li>è°ƒç”¨è¯¥æ–‡ä»¶çš„ <code>hot.accept()</code> å›è°ƒ</li>\n</ol>\n</li>\n</ol>\n<p>ä¸è¿‡ï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªé™·é˜±ï¼šä½ èƒ½ä¿è¯é™¤äº†æ›´æ–°çš„æ–‡ä»¶ä»¥å¤–çš„æ¨¡å—ä¸å˜å—ï¼Ÿ</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">// global.js</span></span>\n<span class=\"line\"><span class=\"Î¼1\">export</span><span class=\"Î¼1\"> let</span><span class=\"Î¼2\"> state </span><span class=\"Î¼1\">=</span><span class=\"Î¼2\"> []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼5\">// a.js</span></span>\n<span class=\"line\"><span class=\"Î¼1\">import</span><span class=\"Î¼2\"> { state } </span><span class=\"Î¼1\">from</span><span class=\"Î¼6\"> './global.js'</span></span>\n<span class=\"line\"><span class=\"Î¼2\">state.</span><span class=\"Î¼3\">push</span><span class=\"Î¼2\">(</span><span class=\"Î¼6\">'a'</span><span class=\"Î¼2\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼5\">// b.js</span></span>\n<span class=\"line\"><span class=\"Î¼1\">import</span><span class=\"Î¼2\"> { state } </span><span class=\"Î¼1\">from</span><span class=\"Î¼6\"> './global.js'</span></span>\n<span class=\"line\"><span class=\"Î¼2\">state.</span><span class=\"Î¼3\">push</span><span class=\"Î¼2\">(</span><span class=\"Î¼6\">'b'</span><span class=\"Î¼2\">)</span></span></code></pre>\n<p>å¦‚æœ a.js å‘ç”Ÿäº†çƒ­æ›´æ–°ï¼Œä»–èƒ½å¦åœ¨æ›´æ–°æœŸé—´æ‹¿åˆ°å’Œ b.js ä¸€æ ·çš„ <code>state</code>ï¼Ÿ</p>\n<p>å¦‚æœä¸èƒ½ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿è¡Œæ—¶å‡ºç°äº†ä¸¤ä¸ª <code>state</code>ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº› bugã€‚</p>\n<p>å› æ­¤ï¼Œé‚£äº›åŸºäºé»‘ <code>require</code> æˆ–ç±»ä¼¼æŠ€æœ¯ï¼ˆå¦‚ SystemJSï¼‰çš„ HMR å®ç°ï¼Œå¯ä»¥ä¿è¯æ–°åŠ è½½çš„æ¨¡å—ä¾ç„¶å¯ä»¥å¼•ç”¨åˆ°å…¬å…±æ¨¡å—ï¼Œåªéœ€è¦åŠ¨æ€å†³å®š <code>require</code> è¿”å›å•¥å°±è¡Œäº†ï¼ˆæ¯”å¦‚å¯ä»¥ç”¨ <code>id+timestamp</code> æ ‡è¯†æ¨¡å—çš„å”¯ä¸€æ€§ï¼‰ã€‚</p>\n<p>è€Œ Vite è¿™ç§åŸºäºåŸç”Ÿ ESM çš„ï¼Œæ˜¾ç„¶æ²¡æœ‰åœ°æ–¹ç»™ä»–é»‘ <code>import</code>ï¼Œä»–å”¯ä¸€èƒ½åšçš„å°±æ˜¯åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æ¥è®©æµè§ˆå™¨è§‰å¾—ä½¿ç”¨äº†åŒä¸€ä¸ªæ¨¡å—ã€‚ç»§ç»­æ€è€ƒï¼Œç„¶åä½ ä¼šå‘ç°ä»–è¿™ç§æ–¹æ¡ˆåªèƒ½<q>ä¸æ‰“åŒ…</q>ï¼Œå¦åˆ™æ€»æ˜¯æ— æ³•å®ç°æ¨¡å—çš„å”¯ä¸€æ€§ã€‚</p>\n<p>Vite çš„æ–¹æ¡ˆæœ‰æ²¡æœ‰å¯èƒ½åœ¨ Node.js é‡Œå®ç°å‘¢ï¼Ÿä¸å¥½è¯´ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ¸…æ¥š <code>import</code> åˆ°åº•æœ‰æ²¡æœ‰ cacheï¼Œä»¥åŠè¿™ä¸ª cache è®¤ä¸è®¤ queryï¼ˆ<code>import &quot;mod?t=114514&quot;</code>ï¼‰ã€‚</p>\n<hr>\n<p>ä»€ä¹ˆä¸œè¥¿é€‚åˆçƒ­æ›´æ–°ï¼Ÿè™½ç„¶æˆ‘ä¸Šé¢åªæäº† RM/ST æ’ä»¶ã€å‰ç«¯å·¥å…·ï¼Œä½†æ˜¯ä¸éš¾çœ‹å‡ºï¼ŒåŸºæœ¬ä¸Šå°±è¿™äº›ä¸œè¥¿<q>åœ¨</q>å®ç°çƒ­æ›´æ–°ï¼š</p>\n<ul>\n<li>å³æ’å³ç”¨çš„æ’ä»¶</li>\n<li>å‰ç«¯ç»„ä»¶åº“ï¼ŒåŒ…æ‹¬ CSS æ ·å¼</li>\n</ul>\n<p>å‰è€…ä¸éš¾ç†è§£ï¼Œæœ¬èº«å·²ç»å¯¹<q>å³æ’å³ç”¨</q>ä¸‹äº†ä¸€äº›åŠŸå¤«ã€‚åè€…å¯ä»¥ç†è§£ä¸ºï¼Œç»„ä»¶çš„å‰¯ä½œç”¨æ°å¥½æ˜¯çƒ­æ›´æ–°çš„ç›®æ ‡â€”â€”å› ä¸ºç»„ä»¶æœ¬èº«å­˜åœ¨ç”Ÿå‘½å‘¨æœŸï¼Œåªéœ€è¦è°ƒç”¨å‰ç»„ä»¶çš„å¸è½½å’Œæ–°ç»„ä»¶çš„æŒ‚è½½å°±è¡Œã€‚è¿™äº›ç»„ä»¶å°±ç±»ä¼¼æˆ‘ä¸€å¼€ç¯‡æåˆ°çš„ç”¨ alias ç¼–å†™çš„ RM æ’ä»¶ï¼Œå› ä¸ºç¬¦åˆæŸç§è§„èŒƒæ‰€ä»¥æ°å¥½è¿è¡Œè‰¯å¥½ã€‚</p>\n<p>é™¤æ­¤ä»¥å¤–ï¼Œé€‚å½“ç¼©å°ä¸šåŠ¡èŒƒå›´ä¹Ÿä¸éš¾å®šä¹‰å‡ºé€‚åˆçƒ­æ›´æ–°çš„ç›®æ ‡ã€‚</p>",
            "url": "https://hyrious.me/p/hmr",
            "title": "çƒ­æ›´æ–°æ˜¯æ€ä¹ˆå·¥ä½œçš„",
            "date_modified": "2022-02-19T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#6A737D}.Î¼2{color:#D73A49}.Î¼3{color:#6F42C1}.Î¼4{color:#24292E}.Î¼5{color:#E36209}.Î¼6{color:#032F62}.Î¼7{color:#005CC5}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#6A737D}.Î¼2{color:#F97583}.Î¼3{color:#B392F0}.Î¼4{color:#E1E4E8}.Î¼5{color:#FFAB70}.Î¼6{color:#9ECBFF}.Î¼7{color:#79B8FF}}</style><p>æ˜¥èŠ‚èŠ±äº†å‡ å¤©å†™äº†ä¸€ä¸ª <a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/hyrious/prettierd\">Sublime Text æ’ä»¶</a>ï¼Œè¿™é‡Œå¤§æ¦‚è®°å½•ä¸€ä¸‹å…³äºå®ƒï¼ˆä¸»è¦æ˜¯ python éƒ¨åˆ†ï¼‰çš„å°çŸ¥è¯†ã€‚</p>\n<h3 id=\"sublimeset_timeout-å’Œ-sublimeset_timeout_async\"><samp>sublime.set_timeout()</samp> å’Œ <samp>sublime.set_timeout_async()</samp></h3>\n<p>æ–‡æ¡£ä¸Šè¯´ <q><samp>_async</samp></q> ä¼šæ”¾åœ¨å¦ä¸€ä¸ªçº¿ç¨‹é‡Œæ‰§è¡Œï¼Œå¬ç€ä¼¼ä¹ç­‰äº <samp>threading<wbr>.Thread()<wbr>.start()</samp>ï¼Ÿå…¶å®ä¸ç„¶ï¼è¿™é‡Œæ–‡æ¡£æ²¡æœ‰æ˜è¯´çš„æ˜¯ï¼Œsublime ä¸€å…±åªæœ‰ä¸¤ä¸ªçº¿ç¨‹ â€”â€” ä¸»æ¸²æŸ“çº¿ç¨‹å’Œ worker çº¿ç¨‹ã€‚<q><samp>_async</samp></q> çš„æ„æ€æ˜¯æŠŠä¸€ä¸ªå‡½æ•°æ”¾åˆ° worker çº¿ç¨‹é‡Œè·‘ â€”â€” worker çº¿ç¨‹é‡Œçš„ä»»åŠ¡è¿˜æ˜¯ä¼šäº’ç›¸é˜»å¡ã€‚æ‰€ä»¥ä¸€æ—¦æˆ‘ä»¬éœ€è¦å®ç°ä¸€äº›é•¿æ—¶é—´é˜»å¡çš„ä»»åŠ¡ï¼ˆå¦‚ <samp>process<wbr>.stdout<wbr>.readline()</samp>ï¼Œå‡è®¾ä½ è¦åšä¸€ä¸ªä½¿ç”¨ tsserver çš„æ’ä»¶<span class=\"half-shrink-right\">ï¼‰</span>ï¼Œæœ€å¥½è¿˜æ˜¯è‡ªå·±æ‹¿ Thread æäº‹ã€‚</p>\n<p>åªæœ‰é‚£äº›çŸ­æ—¶é—´ä¸”ç¬¦åˆç”¨æˆ·æ“ä½œç›®çš„çš„å•ä»»åŠ¡ï¼ˆä¾‹å¦‚æ ¼å¼åŒ–ä¸€ä¸‹æ–‡æœ¬ï¼Œå½“ç”¨æˆ·æŒ‰ä¸‹å¿«æ·é”®æ—¶ï¼Œä»–æœŸæœ›ç¼–è¾‘å™¨åšä¸€äº›å·¥ä½œï¼Œä½†æ˜¯åˆä¸å¸Œæœ›æ•´ä¸ªç¨‹åºåƒå¡æ­»äº†ä¸€æ ·ï¼‰é€‚åˆåœ¨ worker çº¿ç¨‹å·¥ä½œã€‚</p>\n<h3 id=\"async-await-py37\"><samp>async await</samp> <span class=\"half-shrink-left\">ï¼ˆ</span>py3.7+ï¼‰</h3>\n<p>Sublime Text 4 æä¾›äº† python3.8 ç»™æ–°çš„æ’ä»¶ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å†™ <code>if a := 1</code> å’Œ <code>async def</code> äº†ã€‚è¯´åˆ° <code>async</code> æˆ‘å°±ä¸å›°äº†ï¼Œæˆ‘ç«‹é©¬æ¬å‡ºã€Š<a target=\"_blank\" rel=\"noopener\" href=\"https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\">å‡½æ•°æŸ“è‰²é—®é¢˜</a>ã€‹ã€‚å¦å¤–ï¼Œåœ¨ sublime é‡Œä½ æ€»ä¸èƒ½è®©ä¸€ä¸ª async å‡½æ•°å ç€ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥æœ‰äº†ä¸‹é¢è¿™æ®µä»£ç ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\"># Run a callback (-> coroutine) in a new `threading.Thread()`. Refer to</span></span>\n<span class=\"line\"><span class=\"Î¼1\"># https://gist.github.com/dmfigol/3e7d5b84a16d076df02baa9f53271058</span></span>\n<span class=\"line\"><span class=\"Î¼2\">def</span><span class=\"Î¼3\"> run_in_new_thread</span><span class=\"Î¼4\">(function, </span><span class=\"Î¼2\">*</span><span class=\"Î¼4\">args, </span><span class=\"Î¼2\">**</span><span class=\"Î¼4\">kwargs):</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">    # The \"loop\" holder.</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    loop </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> asyncio.new_event_loop()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">    # Kick start the event loop.</span></span>\n<span class=\"line\"><span class=\"Î¼2\">    def</span><span class=\"Î¼3\"> wrapper</span><span class=\"Î¼4\">(loop):</span></span>\n<span class=\"line\"><span class=\"Î¼4\">        asyncio.set_event_loop(loop)</span></span>\n<span class=\"line\"><span class=\"Î¼4\">        loop.run_forever() </span><span class=\"Î¼1\"># &#x3C;- block current thread, until \"loop.stop()\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">    # Send wrapper to a new thread with the loop.</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    t </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> threading.Thread(</span><span class=\"Î¼5\">target</span><span class=\"Î¼2\">=</span><span class=\"Î¼4\">wrapper, </span><span class=\"Î¼5\">args</span><span class=\"Î¼2\">=</span><span class=\"Î¼4\">(loop,))</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    t.start()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼1\">    # Run the callback with the loop.</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    coro </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> function(</span><span class=\"Î¼2\">*</span><span class=\"Î¼4\">args, </span><span class=\"Î¼2\">**</span><span class=\"Î¼4\">kwargs)</span></span>\n<span class=\"line\"><span class=\"Î¼4\">    future </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> asyncio.run_coroutine_threadsafe(coro, loop)</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    # `await future` to wait for it.</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼2\">    return</span><span class=\"Î¼4\"> future</span></span></code></pre>\n<p>è™½ç„¶ä»–æ˜¯ thread-safe çš„ï¼Œä¸è¿‡æ‰‹æ“ thread è¿˜æ˜¯è®©æˆ‘æœ‰ç‚¹ä¸çˆ½ã€‚è€Œä¸”è¿™æŠ½è±¡æ³„éœ²ä¹Ÿå¤ªä¸¥é‡äº†ï¼Œç›´æ¥ç»™ä½ ä¸€ä¸ª <samp>loop</samp> <span class=\"half-shrink-left\">ï¼ˆ</span>çº¦ç­‰äº generator å‡½æ•°ç»™ä½ çš„é‚£ä¸ªå¯¹è±¡<span class=\"half-shrink-right\">ï¼‰</span>ã€‚</p>\n<h3 id=\"subprocesspopen-å’Œåƒµå°¸è¿›ç¨‹\"><samp>subprocess.Popen</samp> å’Œåƒµå°¸è¿›ç¨‹</h3>\n<p>ä½ å¯ä»¥åœ¨ä»»ä½• python ç¯å¢ƒä¸‹ï¼ˆåŒ…æ‹¬ REPLï¼‰è¯•è¯•è¿™æ®µä»£ç ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">import</span><span class=\"Î¼4\"> subprocess</span></span>\n<span class=\"line\"><span class=\"Î¼1\"># å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹ï¼Œåªè¦èƒ½ä¸€ç›´è·‘éšä¾¿ç”¨å•¥éƒ½è¡Œ</span></span>\n<span class=\"line\"><span class=\"Î¼4\">p </span><span class=\"Î¼2\">=</span><span class=\"Î¼4\"> subprocess.Popen([</span><span class=\"Î¼6\">'ruby'</span><span class=\"Î¼4\">, </span><span class=\"Î¼6\">'-e'</span><span class=\"Î¼4\">, </span><span class=\"Î¼6\">'sleep 9999'</span><span class=\"Î¼4\">])</span></span>\n<span class=\"line\"><span class=\"Î¼7\">exit</span><span class=\"Î¼4\">()</span></span></code></pre>\n<p>ä½ çš„ python é€€å‡ºäº†ï¼Œä½†æ˜¯å­è¿›ç¨‹è¿˜åœ¨è·‘ï¼<span class=\"half-shrink-left\">ï¼ˆ</span>ä¹Ÿå°±æ˜¯æ‰€è°“çš„åƒµå°¸è¿›ç¨‹<span class=\"half-shrink-right\">ï¼‰</span>ã€‚æˆ‘ä»¥ä¸ºæ˜¯ç¼ºä»€ä¹ˆå‚æ•°ï¼Œç»“æœä»–å‹æ ¹æ²¡æœ‰å®ç°è‡ªåŠ¨é€€å‡ºå­è¿›ç¨‹çš„åŠŸèƒ½ï¼ˆéš”å£ rubyã€nodejs å¯æ˜¯é»˜è®¤è¡Œä¸ºï¼Œå¯¼è‡´æˆ‘éƒ½ä¸çŸ¥é“è¿˜èƒ½è¿™æ ·<span class=\"half-shrink-right\">ï¼‰</span>ã€‚æ²¡æœ‰åŠ›é‡ï¼Œæ‰€ä»¥åªèƒ½æ‰¾åˆ° sublime æœ‰ä¸ª <samp>on_exit</samp> ç›‘å¬å™¨ï¼Œè¦åœ¨é‚£é‡Œé€€å‡ºå­è¿›ç¨‹ã€‚</p>\n<h3 id=\"å¼‚æ­¥è§¦å‘ä¿®æ”¹\">å¼‚æ­¥è§¦å‘ä¿®æ”¹</h3>\n<p>å‡ºäºæ“ä½œçš„åŒæ­¥æ€§è€ƒè™‘ï¼Œæ’ä»¶å¿…é¡»åœ¨ä¸€æ¬¡ <samp>TextCommand</samp> å›è°ƒé‡ŒåŒæ­¥åœ°å®Œæˆå¯¹ view çš„ä¿®æ”¹ã€‚ä¸€æ—¦è¿™ä¸ªå›è°ƒæ‰§è¡Œçš„åŒæ­¥ä»£ç å¤ªå¤šï¼Œç¼–è¾‘å™¨å°±ä¼šå¡ä½ï¼Œä½“éªŒå¾ˆä¸å¥½ã€‚é‚£ä¹ˆå¦‚ä½•å®ç°å¼‚æ­¥çš„ä¿®æ”¹å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯åœ¨å¼‚æ­¥ä»»åŠ¡ç»“æŸçš„æ—¶å€™å†è§¦å‘ä¸€é <samp>TextCommand</samp> å¹¶ä¸”æŠŠå¿…è¦çš„å‚æ•°ä¼ è¿›å»ã€‚ä¸€æ—¦æœ‰æ–°çš„ç”¨æˆ·æ“ä½œä¼šæ‰“æ–­è¿™æ¬¡å¼‚æ­¥ä»»åŠ¡çš„ï¼Œå°±åŠ ä¸ªæ ‡è®°ä¸å»è§¦å‘å³å¯ã€‚</p>",
            "url": "https://hyrious.me/p/sublime-plugin-tips",
            "title": "Sublime Text æ’ä»¶è¸©å‘",
            "date_modified": "2022-02-06T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<p>è¿™ç¯‡åšå®¢ä¸»è¦æ˜¯å¯¹ 4 å¹´å‰çš„è¿™ç¯‡ <q><a target=\"_blank\" rel=\"noopener\" href=\"https://mrale.ph/blog/2018/02/03/maybe-you-dont-need-rust-to-speed-up-your-js.html\">Maybe you don&#39;t need Rust and WASM to speed up your JS</a></q> çš„ç¬”è®°ã€‚</p>\n<p><strong>æ³¨æ„</strong>ï¼šè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºï¼Œäº†è§£è¿™ç¯‡åšå®¢<strong>å¯èƒ½</strong>æœ‰åŠ©äºä½ å†™å‡ºæ›´å¿«çš„ JS/TSï¼Œä½†æ˜¯ä¸è¦ä¸€å‘³è¿½æ±‚å†™å‡ºè®©äººçœ‹ä¸æ‡‚çš„ä»£ç ã€‚</p>\n<ol>\n<li>è°ƒç”¨å‡½æ•°æ—¶ä¼ é€’å’Œå£°æ˜ä¸€æ ·å¤šçš„å‚æ•°ï¼Œä¸ä½¿ç”¨å¯é€‰å‚æ•°ã€‚</li>\n<li><a target=\"_blank\" rel=\"noopener\" href=\"https://mrale.ph/blog/2015/01/11/whats-up-with-monomorphism.html\">å•æ€åŒ–</a>å‡½æ•°ï¼Œç®€å•æ¥è¯´è®©æ¯ä¸ªå‚æ•°çš„å½¢çŠ¶ï¼ˆå¯¹è±¡çš„ç»“æ„ã€æˆ–è€…å‡½æ•°æœ¬èº«ï¼‰éƒ½æ°¸è¿œä¸å˜ã€‚è¿™ä¸ªæ‹›å¼å¹³æ—¶æ¯”è¾ƒéš¾æ“ï¼Œå»ºè®®çœ‹å‰é¢çš„æ–‡ç« è¯¦ç»†ç†è§£ã€‚</li>\n<li>å…‹åˆ¶åœ°ä½¿ç”¨ç¼“å­˜ â€”â€” é™¤éæŸ¥æ‰¾å®ƒæ¯”è®¡ç®—å®ƒå®¹æ˜“ã€‚</li>\n<li>æƒ³åŠæ³•å‡å°‘ GC çš„å‹åŠ›ï¼Œä¾‹å¦‚ç”³è¯·ä¸€ä¸ªå¤§çš„ TypedArray å­˜å‚¨å®šé•¿æ•°æ®ã€‚</li>\n<li>å¦‚æœåªæ˜¯åœ¨ <code>ASCII</code> èŒƒå›´å†…å·¥ä½œï¼Œç”¨ <code>Uint8Array</code> ä»£æ›¿ <code>String</code>ã€‚</li>\n</ol>\n<p>è¿˜æœ‰ä¸€äº›å¸¸è¯†ï¼š</p>\n<ol>\n<li>ç”¨ <code>class</code> ç»´æŠ¤å¯¹è±¡çš„å½¢çŠ¶ï¼Œä¸å»æ”¹å˜ <code>prototype</code>ã€‚</li>\n<li>ä»<q>ç»´æŠ¤å½¢çŠ¶</q>è€ƒè™‘ï¼Œä¸è¦ç”¨ <code>Record&lt;string, X&gt;</code> å½“ <code>Map/Set</code> ä½¿ â€”â€” ç›´æ¥ç”¨ <code>Map</code> å³å¯ã€‚</li>\n</ol>",
            "url": "https://hyrious.me/p/fast-js",
            "title": "å¦‚ä½•ç¼–å†™æ›´å¿«çš„ JS",
            "date_modified": "2022-01-28T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#005CC5}.Î¼2{color:#032F62}.Î¼3{color:#24292E}.Î¼4{color:#6F42C1}.Î¼5{color:#D73A49}.Î¼6{color:#6A737D}.Î¼7{color:#E36209}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#79B8FF}.Î¼2{color:#9ECBFF}.Î¼3{color:#E1E4E8}.Î¼4{color:#B392F0}.Î¼5{color:#F97583}.Î¼6{color:#6A737D}.Î¼7{color:#FFAB70}}</style><p>é—®ï¼šå¦‚ä½•åˆ†æå¹¶åˆ é™¤æ— ç”¨çš„ JS ä»£ç ï¼ŸTree-Shaking ç»™äº†æ‰“åŒ…å™¨ä»¬ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼šåªéœ€è¦åˆ é™¤æ¯ä¸ªé—­åŒ…é‡Œçš„æ²¡æœ‰<strong>ä½¿ç”¨</strong>ä¸”æ²¡æœ‰<strong>å‰¯ä½œç”¨</strong>çš„å˜é‡å£°æ˜/è¡¨è¾¾å¼å³å¯ã€‚å‰©ä¸‹çš„å°±æ˜¯éœ€è¦ç»™ä»£ç å—ï¼ˆè¯­æ³•èŠ‚ç‚¹ï¼‰æ ‡ä¸Šæœ‰æ²¡æœ‰è¢«ä½¿ç”¨ã€æœ‰æ²¡æœ‰å‰¯ä½œç”¨çš„ä¿¡æ¯ã€‚</p>\n<p>æ€ä¹ˆçŸ¥é“ä¸€æ®µä»£ç çš„å‰¯ä½œç”¨å‘¢ï¼Ÿ<span class=\"half-shrink-left\">ï¼ˆ</span>æ¢å¥è¯è¯´ï¼Œæ˜¯ä¸æ˜¯<q>çº¯</q>çš„ï¼‰</p>\n<p>é¦–å…ˆï¼Œçº¯å­—é¢é‡ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ç­‰è¡¨è¾¾å¼ï¼‰è‚¯å®šæ²¡æœ‰å‰¯ä½œç”¨ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">42</span></span>\n<span class=\"line\"><span class=\"Î¼2\">'hello'</span></span>\n<span class=\"line\"><span class=\"Î¼3\">{ </span><span class=\"Î¼4\">a</span><span class=\"Î¼3\">: [] }</span></span>\n<span class=\"line\"><span class=\"Î¼5\">function</span><span class=\"Î¼3\">(){} </span><span class=\"Î¼6\">// å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„ -- é™¤éä½ è°ƒä»–</span></span></code></pre>\n<p><del>å…¶æ¬¡ï¼Œ</del> æ²¡æœ‰å…¶æ¬¡äº†ï¼Œä»…æ­¤è€Œå·²ã€‚å…‰æœ‰ä¸Šé¢è¿™äº›ä¿¡æ¯å°±è¶³å¤Ÿ shake æ‰è¿™ä¸ªä¾‹å­ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">function</span><span class=\"Î¼4\"> add</span><span class=\"Î¼3\">(</span><span class=\"Î¼7\">a</span><span class=\"Î¼3\">, </span><span class=\"Î¼7\">b</span><span class=\"Î¼3\">) { </span><span class=\"Î¼5\">return</span><span class=\"Î¼3\"> a </span><span class=\"Î¼5\">+</span><span class=\"Î¼3\"> b }</span></span>\n<span class=\"line\"><span class=\"Î¼5\">function</span><span class=\"Î¼4\"> mul</span><span class=\"Î¼3\">(</span><span class=\"Î¼7\">a</span><span class=\"Î¼3\">, </span><span class=\"Î¼7\">b</span><span class=\"Î¼3\">) { </span><span class=\"Î¼5\">return</span><span class=\"Î¼3\"> a </span><span class=\"Î¼5\">*</span><span class=\"Î¼3\"> b }</span></span>\n<span class=\"line\"><span class=\"Î¼5\">export</span><span class=\"Î¼5\"> let</span><span class=\"Î¼3\"> sum </span><span class=\"Î¼5\">=</span><span class=\"Î¼4\"> add</span><span class=\"Î¼3\">(</span><span class=\"Î¼1\">3</span><span class=\"Î¼3\">, </span><span class=\"Î¼1\">5</span><span class=\"Î¼3\">)</span></span></code></pre>\n<p align=center>&darr; &darr; &darr;</p>\n\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">function</span><span class=\"Î¼4\"> add</span><span class=\"Î¼3\">(</span><span class=\"Î¼7\">a</span><span class=\"Î¼3\">, </span><span class=\"Î¼7\">b</span><span class=\"Î¼3\">) { </span><span class=\"Î¼5\">return</span><span class=\"Î¼3\"> a </span><span class=\"Î¼5\">+</span><span class=\"Î¼3\"> b }</span></span>\n<span class=\"line\"><span class=\"Î¼5\">export</span><span class=\"Î¼5\"> let</span><span class=\"Î¼3\"> sum </span><span class=\"Î¼5\">=</span><span class=\"Î¼4\"> add</span><span class=\"Î¼3\">(</span><span class=\"Î¼1\">3</span><span class=\"Î¼3\">, </span><span class=\"Î¼1\">5</span><span class=\"Î¼3\">)</span></span></code></pre>\n<p>ä½†æ˜¯â€”â€”ä½ ä¸€æ‹å¤§è…¿â€”â€”èƒ½ä¸èƒ½æŠŠå‡½æ•°è°ƒç”¨ä¹Ÿåˆ æ‰å‘¢ï¼Ÿä¾‹å¦‚ï¼Œå‡å¦‚æˆ‘æœ€ç»ˆæ²¡æœ‰ç”¨ä¸Šé¢çš„ <code>sum</code>ï¼Œèƒ½ä¸èƒ½æŠŠå®ƒè¿åŒ <code>add</code> çš„å®šä¹‰ä¸€èµ·åˆ æ‰å‘¢ï¼Ÿâ€”â€”æ˜¯å¯ä»¥çš„ï¼Œç”¨ Pure Annotationï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">export</span><span class=\"Î¼5\"> let</span><span class=\"Î¼3\"> sum </span><span class=\"Î¼5\">=</span><span class=\"Î¼6\"> /* @__PURE__ */</span><span class=\"Î¼4\"> add</span><span class=\"Î¼3\">(</span><span class=\"Î¼1\">3</span><span class=\"Î¼3\">, </span><span class=\"Î¼1\">5</span><span class=\"Î¼3\">)</span></span></code></pre>\n<p>è¿™ä¸ªæ³¨é‡Šåœ¨å‘Šè¯‰æ‰“åŒ…å™¨ï¼šæœ¬æ¬¡å‡½æ•°è°ƒç”¨æ˜¯<q>çº¯</q>çš„ï¼Œå…¶è¿”å›å€¼å’Œ <code>123</code> å·®ä¸å¤šï¼Œå¦‚æœæ²¡äººç”¨çš„è¯å¯ä»¥æŠŠè¿™ä¸ªè°ƒç”¨åˆ äº†ã€‚</p>\n<p><strong>é™·é˜±</strong>ï¼šä½†æ˜¯ä½ ä¸èƒ½åˆ æ‰å‡½æ•°æ‹¬å·é‡Œçš„ä¸œè¥¿ã€‚è¿™æ˜¯å› ä¸ºå‚æ•°æœ¬èº«å¯èƒ½æ˜¯ç”±åˆ«çš„å‰¯ä½œç”¨äº§ç”Ÿçš„ï¼Œå…´è®¸æœ‰äººä¾èµ–è¿™ä¸ªå‰¯ä½œç”¨å‘¢ã€‚ä¾‹å¦‚ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼6\">/* @__PURE__ */</span><span class=\"Î¼4\"> debugPrint</span><span class=\"Î¼3\">(</span><span class=\"Î¼4\">createApp</span><span class=\"Î¼3\">())</span></span></code></pre>\n<p align=center>&darr; &darr; &darr;</p>\n\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼4\">createApp</span><span class=\"Î¼3\">()</span></span></code></pre>\n<p>è¿™ä¸ªæ ‡è®°å¯¹ä¸‹é¢è¿™ç§è°ƒç”¨ä¹Ÿæœ‰æ•ˆï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼6\">/* @__PURE__ */</span><span class=\"Î¼3\"> React.</span><span class=\"Î¼4\">createElement</span><span class=\"Î¼3\">(</span><span class=\"Î¼2\">'div'</span><span class=\"Î¼3\">, {}, </span><span class=\"Î¼2\">'Hello'</span><span class=\"Î¼3\">)  </span><span class=\"Î¼6\">// => nothing</span></span>\n<span class=\"line\"><span class=\"Î¼6\">/* @__PURE__ */</span><span class=\"Î¼5\"> new</span><span class=\"Î¼1\"> A</span><span class=\"Î¼3\">.b.c.</span><span class=\"Î¼4\">d</span><span class=\"Î¼3\">()                            </span><span class=\"Î¼6\">// => nothing</span></span></code></pre>\n<p>ç»†å¿ƒçš„ä½ å·²ç»å‘ç°äº†ï¼šä½ æ— æ³•å¯¹è®¿é—®ä¸‹æ ‡ï¼ˆ<code>a.b</code>ï¼‰æ ‡è®°æ˜¯å¦å«æœ‰å‰¯ä½œç”¨ã€‚å®é™…ä¸Š esbuild ä¼šè®¤ä¸ºæ‰€æœ‰çš„ getter setter éƒ½æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚æ‰€ä»¥ä¸‹é¢è¿™æ®µä»£ç ä¸èƒ½è¢« shake æ‰ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">let</span><span class=\"Î¼3\"> a </span><span class=\"Î¼5\">=</span><span class=\"Î¼3\"> {}</span></span>\n<span class=\"line\"><span class=\"Î¼3\">a.b </span><span class=\"Î¼5\">=</span><span class=\"Î¼1\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼6\">// å³ä½¿æ²¡æœ‰ç”¨åˆ° aï¼Œè¿™æ®µä»£ç ä¹Ÿä¸èƒ½è¢«åˆ æ‰</span></span></code></pre>\n<p>å¦‚æœæœ‰ä¸€äº›å¤æ‚çš„åˆå§‹åŒ–å‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå†™æ³•æ¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">let</span><span class=\"Î¼3\"> a </span><span class=\"Î¼5\">=</span><span class=\"Î¼6\"> /* @__PURE__ */</span><span class=\"Î¼3\"> (() </span><span class=\"Î¼5\">=></span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  let</span><span class=\"Î¼3\"> a </span><span class=\"Î¼5\">=</span><span class=\"Î¼3\"> {}</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  a.b </span><span class=\"Î¼5\">=</span><span class=\"Î¼1\"> 1</span></span>\n<span class=\"line\"><span class=\"Î¼5\">  return</span><span class=\"Î¼3\"> a</span></span>\n<span class=\"line\"><span class=\"Î¼3\">})()</span></span></code></pre>\n<p>æ³¨æ„ï¼šesbuild çš„ <code>--minify-whitespace</code> ä¼šå°† <code>/* @__PURE__ */</code> è§†ä¸ºç©ºæ ¼åˆ æ‰ï¼Œå› æ­¤åœ¨è¾“å‡º esm æ—¶ä¸€å®šè¦è®°å¾—å…³é—­è¿™ä¸ªåŠŸèƒ½ã€‚</p>\n<hr>\n<p><strong>é™„èµ ï¼šå¦‚ä½•åœ¨æ‰“å‡ºçš„åŒ…é‡ŒåŒºåˆ† dev/prod ç¯å¢ƒï¼Ÿ</strong></p>\n<p>è™½ç„¶ Node.js æ¨å‡ºäº† conditional exports å¹¶å»ºè®®å¤§å®¶ç”¨è¿™æ ·çš„å½¢å¼å¯¼å‡ºä¸åŒçš„åŒ…ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼2\">\"exports\"</span><span class=\"Î¼3\">: {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  \"development\"</span><span class=\"Î¼3\">: </span><span class=\"Î¼2\">\"./dist/index.dev.js\"</span><span class=\"Î¼3\">,</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  \"production\"</span><span class=\"Î¼3\">: </span><span class=\"Î¼2\">\"./dist/index.prod.js\"</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<p>ä½†æ˜¯å‰ç«¯ç”Ÿæ€å¯ç­‰ä¸åˆ°ä»–æ¨å¹¿è¿™ä¸ª featureï¼Œåè€Œæ˜¯ä½¿ç”¨äº†ä¸€ä¸ªéå¸¸ cjs çš„æ–¹æ³•ï¼š</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼5\">if</span><span class=\"Î¼3\"> (process.env.</span><span class=\"Î¼1\">NODE_ENV</span><span class=\"Î¼5\"> ===</span><span class=\"Î¼2\"> 'production'</span><span class=\"Î¼3\">) {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  module</span><span class=\"Î¼3\">.</span><span class=\"Î¼1\">exports</span><span class=\"Î¼5\"> =</span><span class=\"Î¼4\"> require</span><span class=\"Î¼3\">(</span><span class=\"Î¼2\">'./dist/index.prod.js'</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">} </span><span class=\"Î¼5\">else</span><span class=\"Î¼3\"> {</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  module</span><span class=\"Î¼3\">.</span><span class=\"Î¼1\">exports</span><span class=\"Î¼5\"> =</span><span class=\"Î¼4\"> require</span><span class=\"Î¼3\">(</span><span class=\"Î¼2\">'./dist/index.dev.js'</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<p>ä½ å¯ä»¥åœ¨ React å’Œ Vue3 çš„åŒ…é‡Œçœ‹åˆ°è¿™ç§å†™æ³•ï¼Œè€Œä¸”ç°ä»£æ‰“åŒ…å™¨éƒ½å¯¹è¿™ç§å†™æ³•åšäº†é¢„å¤„ç†ã€‚</p>\n<hr>\n<p>æ€»ä¹‹ï¼Œç†è§£äº† Tree-Shaking æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ‰èƒ½è®©æ‰“åŒ…ç»“æœç¬¦åˆä½ çš„é¢„æœŸã€‚</p>",
            "url": "https://hyrious.me/p/tree-shaking",
            "title": "ç®€å•ç†è§£ Tree Shaking",
            "date_modified": "2022-01-25T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        },
        {
            "content_html": "<style>.Î¼0{background-color:#fff;color:#24292e}.Î¼1{color:#D73A49}.Î¼2{color:#6F42C1}.Î¼3{color:#24292E}.Î¼4{color:#6A737D}.Î¼5{color:#005CC5}.Î¼6{color:#032F62}.Î¼7{color:#032F62}@media(prefers-color-scheme:dark){.Î¼0{background-color:#24292e;color:#e1e4e8}.Î¼1{color:#F97583}.Î¼2{color:#B392F0}.Î¼3{color:#E1E4E8}.Î¼4{color:#6A737D}.Î¼5{color:#79B8FF}.Î¼6{color:#9ECBFF}.Î¼7{color:#DBEDFF}}</style><ul>\n<li><a target=\"_blank\" rel=\"noopener\" href=\"https://en.wikipedia.org/wiki/Earley_parser\">Earley parser - Wikipedia</a></li>\n<li><a target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/bitpeach/p/3602522.html\">æ¨¡å¼è¯†åˆ«ä¹‹ Earley ç®—æ³•å…¥é—¨è¯¦è®² - bitpeach</a></li>\n</ul>\n<p>Earley parser æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨æœ€å <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> çš„å¤æ‚åº¦ä¸‹è§£æä»»ä½• CFG æ–‡æ³•çš„äº§ç”Ÿå¼çš„ç®—æ³•ï¼Œå®ƒæ˜¯æ”¯æŒå·¦é€’å½’çš„ã€‚</p>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">new</span><span class=\"Î¼2\"> EarleyParser</span><span class=\"Î¼3\">({ CFG }).</span><span class=\"Î¼2\">parse</span><span class=\"Î¼3\">(str) </span><span class=\"Î¼4\">//=> AST</span></span></code></pre>\n<p>è®¾æŸæ¡ CFG æ˜¯ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>â†’</mo><mi>Î±</mi><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">X \\to \\alpha \\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span>ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ª <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding=\"application/x-tex\">\\cdot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">â‹…</span></span></span></span> ä»£è¡¨è§£æä½ç½®ï¼Œä¾‹å¦‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>â†’</mo><mi>Î±</mi><mo>â‹…</mo><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">X \\to \\alpha \\cdot \\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span> ä»£è¡¨å½“å‰æ­£åœ¨åŒ¹é… <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> è§„åˆ™ï¼Œå·²ç»åŒ¹é…æˆåŠŸäº† <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span></span></span></span>ï¼Œä¸‹ä¸€æ­¥æ˜¯åŒ¹é… <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span>ã€‚</p>\n<p>è®¾ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> æ˜¯è¾“å…¥åºåˆ—çš„ç¬¬ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> ä¸ª token æ‰€åœ¨çš„ä½ç½®ï¼Œå¯¹äºæ¯ä¸ª <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span>ï¼ŒEarley ç®—æ³•éƒ½è¦äº§ç”Ÿä¸€ä¸ª State é›†åˆã€‚æ¯ä¸ª State å½¢å¦‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>â†’</mo><mi>Î±</mi><mo>â‹…</mo><mi>Î²</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X \\to \\alpha \\cdot \\beta, i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span></span></span></span>ï¼Œä»£è¡¨æˆ‘ä» <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> ä½ç½®å¼€å§‹åŒ¹é…çš„ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> è§„åˆ™ï¼Œå·²ç»åŒ¹é…æˆåŠŸäº† <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span></span></span></span>ï¼Œä¸‹ä¸€æ­¥æ˜¯åŒ¹é… <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span>ã€‚è®¾ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ä½ç½®å¯¹åº”çš„ State é›†åˆä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span>ã€‚</p>\n<p>é¦–å…ˆï¼Œç”Ÿæˆ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(0)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span>ï¼›æ¥ä¸‹æ¥é‡å¤æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>\n<ul>\n<li>é¢„æµ‹ï¼šå¦‚æœ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding=\"application/x-tex\">\\cdot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">â‹…</span></span></span></span> åé¢æ˜¯ä¸€ä¸ªéç»ˆç»“ç¬¦å¦‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>â†’</mo><mi>Î±</mi><mo>â‹…</mo><mi>Y</mi><mi>Î²</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X \\to \\alpha \\cdot Y \\beta, j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span>ï¼Œæˆ‘ä»¬æŠŠ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span> å¼€å¤´çš„è§„åˆ™æ·»åŠ åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span>ï¼ˆ<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> æ˜¯å½“å‰ä½ç½®ï¼Œ<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span> æ˜¯åˆšæ‰åŒ¹é… <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> çš„èµ·å§‹ä½ç½®ï¼‰</li>\n<li>æ‰«æï¼šå¦‚æœ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding=\"application/x-tex\">\\cdot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">â‹…</span></span></span></span> åé¢æ˜¯ä¸€ä¸ªç»ˆç»“ç¬¦å¦‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>â†’</mo><mi>Î±</mi><mo>â‹…</mo><mi>a</mi><mi>Î²</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X \\to \\alpha \\cdot a \\beta, j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span>ï¼Œæˆ‘ä»¬æŠŠ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>â†’</mo><mi>Î±</mi><mi>a</mi><mo>â‹…</mo><mi>Î²</mi><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X \\to \\alpha a \\cdot \\beta, j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span> æ·»åŠ åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(k + 1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></li>\n<li>è§„çº¦ï¼šå¯¹äº <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span> ä¸­çš„æ¯ä¸ª Stateï¼Œå¦‚æœå®ƒçš„ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding=\"application/x-tex\">\\cdot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">â‹…</span></span></span></span> åˆ°è¾¾è¯¥è§„åˆ™çš„æœ«å°¾ï¼Œå¦‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo>â†’</mo><mi>y</mi><mo>â‹…</mo><mo separator=\"true\">,</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X \\to y \\cdot, j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">â‹…</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span>ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»åŒ¹é…å®Œæˆäº†è¿™ä¸ªï¼ˆå­ï¼‰è§„åˆ™ï¼Œåœ¨ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>j</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span> ä¸­æ‰¾åˆ°æ‰€æœ‰ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding=\"application/x-tex\">\\cdot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">â‹…</span></span></span></span> åé¢æ˜¯ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> çš„å¦‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>Y</mi><mo>â†’</mo><mi>Î±</mi><mo>â‹…</mo><mi>X</mi><mi>Î²</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(Y \\to \\alpha \\cdot X \\beta, i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">XÎ²</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå°†å°åœ†ç‚¹åç§»ä¸€ä½ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>Y</mi><mo>â†’</mo><mi>Î±</mi><mi>X</mi><mo>â‹…</mo><mi>Î²</mi><mo separator=\"true\">,</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(Y \\to \\alpha X \\cdot \\beta, i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span></span></span></span> æ·»åŠ åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<p>æ³¨æ„ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ä¸€ä¸ª <strong>é›†åˆ</strong>ï¼Œé‡Œé¢æ²¡æœ‰é‡å¤çš„ Stateã€‚</p>\n<p>è®¾è¾“å…¥æœ‰ n ä¸ª tokenï¼Œæˆ‘ä»¬åœ¨ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> ä¸­æ‰¾åˆ°æ‰€æœ‰ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> æ˜¯ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> çš„ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»åŒ¹é…å®Œæˆäº†å…¨éƒ¨çš„è§„åˆ™ï¼Œæ‰¾åˆ°çš„éƒ½æ˜¯åˆæ³•çš„ç”Ÿæˆæ ‘ã€‚</p>\n<h4 id=\"ç®€å•å®ç°\">ç®€å•å®ç°</h4>\n<pre class=\"shiki shiki-themes github-light github-dark Î¼0\" tabindex=\"0\"><code><span class=\"line\"><span class=\"Î¼1\">class</span><span class=\"Î¼2\"> Earley</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  def</span><span class=\"Î¼2\"> initialize</span><span class=\"Î¼3\"> rules </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> []</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    @rules </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> rules</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  def</span><span class=\"Î¼2\"> lazy_each_with_index</span><span class=\"Î¼3\"> arr, i </span><span class=\"Î¼1\">=</span><span class=\"Î¼5\"> 0</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    yield</span><span class=\"Î¼3\"> arr[i], (i </span><span class=\"Î¼1\">+=</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼3\">) </span><span class=\"Î¼1\">-</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼1\"> while</span><span class=\"Î¼3\"> arr[i]</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  def</span><span class=\"Î¼2\"> uniq_bfs</span><span class=\"Î¼3\"> start </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> [], i </span><span class=\"Î¼1\">=</span><span class=\"Î¼5\"> 0</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    yield</span><span class=\"Î¼3\"> start[(i </span><span class=\"Î¼1\">+=</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼3\">) </span><span class=\"Î¼1\">-</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼3\">], </span><span class=\"Î¼5\">-></span><span class=\"Î¼3\"> x { start.push(x).uniq!; x } </span><span class=\"Î¼1\">while</span><span class=\"Î¼3\"> start[i]</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  def</span><span class=\"Î¼2\"> parse</span><span class=\"Î¼3\"> str, </span><span class=\"Î¼1\">&#x26;</span><span class=\"Î¼3\">lex</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    s </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> [[[@rules[</span><span class=\"Î¼5\">0</span><span class=\"Î¼3\">], </span><span class=\"Î¼5\">0</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">0</span><span class=\"Î¼3\">]]]</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    lazy_each_with_index(s) { |set, k|</span></span>\n<span class=\"line\"><span class=\"Î¼3\">      s.push [] </span><span class=\"Î¼1\">if</span><span class=\"Î¼3\"> token </span><span class=\"Î¼1\">=</span><span class=\"Î¼3\"> lex.(str)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">      uniq_bfs(set) { |((n, rule), i, j), u|</span></span>\n<span class=\"line\"><span class=\"Î¼1\">        if</span><span class=\"Î¼3\"> rule.size </span><span class=\"Î¼1\">==</span><span class=\"Î¼3\"> i</span></span>\n<span class=\"line\"><span class=\"Î¼3\">          s[j].</span><span class=\"Î¼5\">select</span><span class=\"Î¼3\"> { |(_, rule), i, _| rule[i] </span><span class=\"Î¼1\">==</span><span class=\"Î¼3\"> n }.each { |e, i, j| u.([e, i </span><span class=\"Î¼1\">+</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼3\">, j]) }</span></span>\n<span class=\"line\"><span class=\"Î¼1\">        elsif</span><span class=\"Î¼3\"> rule[i].is_a? </span><span class=\"Î¼5\">Symbol</span></span>\n<span class=\"line\"><span class=\"Î¼3\">          @rules.</span><span class=\"Î¼5\">select</span><span class=\"Î¼3\"> { |e, _| rule[i] </span><span class=\"Î¼1\">==</span><span class=\"Î¼3\"> e }.each { |e| u.([e, </span><span class=\"Î¼5\">0</span><span class=\"Î¼3\">, k]) }</span></span>\n<span class=\"line\"><span class=\"Î¼1\">        elsif</span><span class=\"Î¼3\"> match rule[i], token</span></span>\n<span class=\"line\"><span class=\"Î¼3\">          s[k </span><span class=\"Î¼1\">+</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼3\">].push [[n, rule], i </span><span class=\"Î¼1\">+</span><span class=\"Î¼5\"> 1</span><span class=\"Î¼3\">, j]</span></span>\n<span class=\"line\"><span class=\"Î¼1\">        end</span></span>\n<span class=\"line\"><span class=\"Î¼3\">      }</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    }</span></span>\n<span class=\"line\"><span class=\"Î¼3\">    s[</span><span class=\"Î¼1\">-</span><span class=\"Î¼5\">1</span><span class=\"Î¼3\">].any? { |(n, rule), i, j| n </span><span class=\"Î¼1\">==</span><span class=\"Î¼3\"> @rules[</span><span class=\"Î¼5\">0</span><span class=\"Î¼3\">][</span><span class=\"Î¼5\">0</span><span class=\"Î¼3\">] </span><span class=\"Î¼1\">&#x26;&#x26;</span><span class=\"Î¼3\"> rule.size </span><span class=\"Î¼1\">==</span><span class=\"Î¼3\"> i </span><span class=\"Î¼1\">&#x26;&#x26;</span><span class=\"Î¼3\"> j.zero? }</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  def</span><span class=\"Î¼2\"> match</span><span class=\"Î¼3\"> pattern, token</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    case</span><span class=\"Î¼3\"> pattern</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    when</span><span class=\"Î¼5\"> String</span><span class=\"Î¼1\"> then</span><span class=\"Î¼3\"> token </span><span class=\"Î¼1\">==</span><span class=\"Î¼3\"> pattern</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    when</span><span class=\"Î¼5\"> Regexp</span><span class=\"Î¼1\"> then</span><span class=\"Î¼3\"> token </span><span class=\"Î¼1\">=~</span><span class=\"Î¼3\"> pattern</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    else</span><span class=\"Î¼5\"> false</span></span>\n<span class=\"line\"><span class=\"Î¼1\">    end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">  end</span></span>\n<span class=\"line\"><span class=\"Î¼1\">end</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span class=\"Î¼5\">p</span><span class=\"Î¼5\"> Earley</span><span class=\"Î¼3\">.</span><span class=\"Î¼1\">new</span><span class=\"Î¼3\">([</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:P</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:S</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:S</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:S</span><span class=\"Î¼3\">, </span><span class=\"Î¼6\">'+'</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:S</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:S</span><span class=\"Î¼3\">, </span><span class=\"Î¼6\">'-'</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:S</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">, </span><span class=\"Î¼6\">'*'</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">:T</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">, </span><span class=\"Î¼6\">'/'</span><span class=\"Î¼3\">, </span><span class=\"Î¼5\">:T</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:M</span><span class=\"Î¼3\">, [</span><span class=\"Î¼5\">:T</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  [</span><span class=\"Î¼5\">:T</span><span class=\"Î¼3\">, [</span><span class=\"Î¼6\">/</span><span class=\"Î¼7\">^</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\d</span><span class=\"Î¼7\">+$</span><span class=\"Î¼6\">/</span><span class=\"Î¼3\">]],</span></span>\n<span class=\"line\"><span class=\"Î¼3\">]).parse(</span><span class=\"Î¼6\">'2 + 3 - 4'</span><span class=\"Î¼3\">) { |s|</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  s.slice!(</span><span class=\"Î¼6\">/</span><span class=\"Î¼7\">^</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\s</span><span class=\"Î¼7\">+</span><span class=\"Î¼6\">/</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">  s.slice!(</span><span class=\"Î¼6\">/</span><span class=\"Î¼7\">^</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\d</span><span class=\"Î¼7\">+|</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\+</span><span class=\"Î¼7\">|</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\-</span><span class=\"Î¼7\">|</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\*</span><span class=\"Î¼7\">|</span><span style=\"color:#22863A;--s-dark:#85E89D;font-weight:bold;--s-dark-font-weight:bold\">\\/</span><span class=\"Î¼6\">/</span><span class=\"Î¼3\">)</span></span>\n<span class=\"line\"><span class=\"Î¼3\">}</span></span></code></pre>\n<h4 id=\"æœ€å\">æœ€å</h4>\n<p>Earley parser æ˜¯ä¸€ä¸ªè‡ªé¡¶å‘ä¸‹çš„ç®—æ³•ï¼Œæœ‰ä¸€ä¸ªä¸ä¹‹ç±»ä¼¼çš„æ“ä½œå« <a target=\"_blank\" rel=\"noopener\" href=\"https://en.wikipedia.org/wiki/CYK_algorithm\">CYK ç®—æ³•</a> æ˜¯è‡ªä¸‹è€Œä¸Šçš„ã€‚</p>",
            "url": "https://hyrious.me/p/earley-parser",
            "title": "Earley ç®—æ³•",
            "date_modified": "2017-09-27T00:00:00.000Z",
            "author": {
                "name": "hyrious",
                "url": "https://hyrious.me"
            }
        }
    ]
}